---
layout: post
category: spring
title: ç¬¬15ç« ï¼šé€šè¿‡æ³¨è§£æ³¨å…¥å±æ€§ä¿¡æ¯
tagline: by å°å‚…å“¥
tag: [java]
excerpt: ä½ å¬è¿‡æ‰°åŠ¨å‡½æ•°å—ï¼Ÿä½ å†™è¿‡æ–æ³¢é‚£å¥‘ï¼ˆFibonacciï¼‰æ•£åˆ—å—ï¼Ÿä½ å®ç°è¿‡æ¢…æ£®æ—‹è½¬ç®—æ³•å—ï¼Ÿ**æ€ä¹ˆ** æ²¡å¬è¿‡è¿™äº›å†™ä¸äº†ä»£ç å—ï¼ä¸ä¼šçš„ï¼Œå³ä½¿æ²¡å¬è¿‡ä½ ä¸€æ ·å¯ä»¥å†™çš„äº†ä»£ç ï¼Œæ¯”å¦‚ä½ å®ç°çš„æ•°æ®åº“è·¯ç”±æ•°æ®æ€»æ˜¯è½åœ¨1åº“1è¡¨å®ƒä¸æ•£åˆ—åˆ†å¸ƒã€ä½ å®ç°çš„æŠ½å¥–ç³»ç»Ÿæ€»æ˜¯æŠŠè¿è¥é…ç½®çš„æœ€å¤§çº¢åŒ…å‘å‡ºå»æé«˜äº†è¿è¥æˆæœ¬ã€ä½ å¼€å‘çš„ç§’æ€ç³»ç»Ÿæ€»æ˜¯åœ¨å¼€å§‹åçš„1ç§’å°±æŒ‚äº†è´§å“æ ¹æœ¬ç»™ä¸å‡ºå»ã€‚
lock: need
---

# ã€ŠSpring æ‰‹æ’¸ä¸“æ ã€‹ç¬¬ 15 ç« ï¼šä¸‡äººä¹‹æ•Œï¼Œé€šè¿‡æ³¨è§£ç»™å±æ€§æ³¨å…¥é…ç½®å’ŒBeanå¯¹è±¡

ä½œè€…ï¼šå°å‚…å“¥
<br/>åšå®¢ï¼š[https://bugstack.cn](https://bugstack.cn)
<br/>åŸæ–‡ï¼š[https://mp.weixin.qq.com/s/GNLA10AimmxUSZ0VoDI_xA](https://mp.weixin.qq.com/s/GNLA10AimmxUSZ0VoDI_xA)

> æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„

## ä¸€ã€å‰è¨€

`å†™ä»£ç ï¼Œå°±æ˜¯ä»èƒ½ç”¨åˆ°å¥½ç”¨çš„ä¸æ–­æŠ˜è…¾ï¼`

ä½ å¬è¿‡æ‰°åŠ¨å‡½æ•°å—ï¼Ÿä½ å†™è¿‡æ–æ³¢é‚£å¥‘ï¼ˆFibonacciï¼‰æ•£åˆ—å—ï¼Ÿä½ å®ç°è¿‡æ¢…æ£®æ—‹è½¬ç®—æ³•å—ï¼Ÿ**æ€ä¹ˆ** æ²¡å¬è¿‡è¿™äº›å†™ä¸äº†ä»£ç å—ï¼ä¸ä¼šçš„ï¼Œå³ä½¿æ²¡å¬è¿‡ä½ ä¸€æ ·å¯ä»¥å†™çš„äº†ä»£ç ï¼Œæ¯”å¦‚ä½ å®ç°çš„æ•°æ®åº“è·¯ç”±æ•°æ®æ€»æ˜¯è½åœ¨1åº“1è¡¨å®ƒä¸æ•£åˆ—åˆ†å¸ƒã€ä½ å®ç°çš„æŠ½å¥–ç³»ç»Ÿæ€»æ˜¯æŠŠè¿è¥é…ç½®çš„æœ€å¤§çº¢åŒ…å‘å‡ºå»æé«˜äº†è¿è¥æˆæœ¬ã€ä½ å¼€å‘çš„ç§’æ€ç³»ç»Ÿæ€»æ˜¯åœ¨å¼€å§‹åçš„1ç§’å°±æŒ‚äº†è´§å“æ ¹æœ¬ç»™ä¸å‡ºå»ã€‚

é™¤äº†ä¸€éƒ¨åˆ†ä»…æŠŠç¼–ç å½“æˆæ¬ç –åº”ä»˜å·¥ä½œå¤–çš„ç¨‹åºå‘˜ï¼Œè¿˜æœ‰ä¸€éƒ¨åˆ†æ€»æ˜¯åœ¨è¿½æ±‚æè‡´çš„ç å†œã€‚*å†™ä»£ç è¿˜èƒ½èµšé’±ï¼ŒçœŸå¼€å¿ƒï¼* è¿™æ ·çš„ç å†œæ€»æ˜¯ä¼šè€ƒè™‘ğŸ¤”è¿˜æœ‰æ²¡æœ‰æ›´å¥½çš„å®ç°é€»è¾‘èƒ½è®©ä»£ç ä¸ä»…æ˜¯èƒ½ç”¨ï¼Œè¿˜è¦å¥½ç”¨å‘¢ï¼Ÿå…¶å®è¿™ä¸€ç‚¹çš„è¿½æ±‚åˆ°å®Œæˆï¼Œéœ€è¦å¤§é‡æ‰©å±•æ€§å­¦ä¹ å’Œæ·±åº¦æŒ–æ˜ï¼Œè¿™æ ·ä½ è®¾è®¡å‡ºæ¥çš„ç³»ç»Ÿæ‰æ›´ä½ è€ƒè™‘çš„æ›´åŠ å…¨é¢ï¼Œä¹Ÿèƒ½åº”å¯¹å„ç§å¤æ‚çš„åœºæ™¯ã€‚

## äºŒã€ç›®æ ‡

åœ¨ç›®å‰ IOCã€AOP ä¸¤å¤§æ ¸å¿ƒåŠŸèƒ½æ¨¡å—çš„æ”¯æ’‘ä¸‹ï¼Œå®Œå…¨å¯ä»¥ç®¡ç† Bean å¯¹è±¡çš„æ³¨å†Œå’Œè·å–ï¼Œä¸è¿‡è¿™æ ·çš„ä½¿ç”¨æ–¹å¼æ€»æ„Ÿè§‰åƒæ˜¯åˆ€è€•ç«ç§æœ‰ç‚¹éš¾ç”¨ã€‚å› æ­¤åœ¨ä¸Šä¸€ç« èŠ‚æˆ‘ä»¬è§£å†³éœ€è¦æ‰‹åŠ¨é…ç½® `Bean` å¯¹è±¡åˆ° `spring.xml` æ–‡ä»¶ä¸­ï¼Œæ”¹ä¸ºå¯ä»¥è‡ªåŠ¨æ‰«æå¸¦æœ‰æ³¨è§£ `@Component` çš„å¯¹è±¡å®Œæˆè‡ªåŠ¨è£…é…å’Œæ³¨å†Œåˆ° `Spring` å®¹å™¨çš„æ“ä½œã€‚

é‚£ä¹ˆåœ¨è‡ªåŠ¨æ‰«æåŒ…æ³¨å†Œ Bean å¯¹è±¡ä¹‹åï¼Œå°±éœ€è¦æŠŠåŸæ¥åœ¨é…ç½®æ–‡ä»¶ä¸­é€šè¿‡ `property name="token"` é…ç½®å±æ€§å’ŒBeançš„æ“ä½œï¼Œä¹Ÿæ”¹ä¸ºå¯ä»¥è‡ªåŠ¨æ³¨å…¥ã€‚è¿™å°±åƒæˆ‘ä»¬ä½¿ç”¨ Spring æ¡†æ¶ä¸­ `@Autowired`ã€`@Value` æ³¨è§£ä¸€æ ·ï¼Œå®Œæˆæˆ‘ä»¬å¯¹å±æ€§å’Œå¯¹è±¡çš„æ³¨å…¥æ“ä½œã€‚

## ä¸‰ã€æ–¹æ¡ˆ

å…¶å®ä»æˆ‘ä»¬åœ¨å®Œæˆ Bean å¯¹è±¡çš„åŸºç¡€åŠŸèƒ½åï¼Œåç»­é™†ç»­æ·»åŠ çš„åŠŸèƒ½éƒ½æ˜¯å›´ç»•ç€ Bean çš„ç”Ÿå‘½å‘¨æœŸè¿›è¡Œçš„ï¼Œæ¯”å¦‚ä¿®æ”¹ Bean çš„å®šä¹‰ BeanFactoryPostProcessorï¼Œå¤„ç† Bean çš„å±æ€§è¦ç”¨åˆ° BeanPostProcessorï¼Œå®Œæˆä¸ªæ€§çš„å±æ€§æ“ä½œåˆ™ä¸“é—¨ç»§æ‰¿ BeanPostProcessor æä¾›æ–°çš„æ¥å£ï¼Œå› ä¸ºè¿™æ ·æ‰èƒ½é€šè¿‡ instanceof åˆ¤æ–­å‡ºå…·æœ‰æ ‡è®°æ€§çš„æ¥å£ã€‚æ‰€ä»¥å…³äº Bean ç­‰ç­‰çš„æ“ä½œï¼Œä»¥åŠç›‘å¬ Awareã€è·å– BeanFactoryï¼Œéƒ½éœ€è¦åœ¨ Bean çš„ç”Ÿå‘½å‘¨æœŸä¸­å®Œæˆã€‚é‚£ä¹ˆæˆ‘ä»¬åœ¨è®¾è®¡å±æ€§å’Œ Bean å¯¹è±¡çš„æ³¨å…¥æ—¶å€™ï¼Œä¹Ÿä¼šç”¨åˆ° BeanPostProcessor æ¥å®Œæˆåœ¨è®¾ç½® Bean å±æ€§ä¹‹å‰ï¼Œå…è®¸ BeanPostProcessor ä¿®æ”¹å±æ€§å€¼ã€‚æ•´ä½“è®¾è®¡ç»“æ„å¦‚ä¸‹å›¾ï¼š

![](https://bugstack.cn/assets/images/spring/spring-15-01.png)

- è¦å¤„ç†è‡ªåŠ¨æ‰«ææ³¨å…¥ï¼ŒåŒ…æ‹¬å±æ€§æ³¨å…¥ã€å¯¹è±¡æ³¨å…¥ï¼Œåˆ™éœ€è¦åœ¨å¯¹è±¡å±æ€§ `applyPropertyValues` å¡«å……ä¹‹å‰ ï¼ŒæŠŠå±æ€§ä¿¡æ¯å†™å…¥åˆ° PropertyValues çš„é›†åˆä¸­å»ã€‚è¿™ä¸€æ­¥çš„æ“ä½œç›¸å½“äºæ˜¯è§£å†³äº†ä»¥å‰åœ¨ spring.xml é…ç½®å±æ€§çš„è¿‡ç¨‹ã€‚
- è€Œåœ¨å±æ€§çš„è¯»å–ä¸­ï¼Œéœ€è¦ä¾èµ–äºå¯¹ Bean å¯¹è±¡çš„ç±»ä¸­å±æ€§çš„é…ç½®äº†æ³¨è§£çš„æ‰«æï¼Œ`field.getAnnotation(Value.class);` ä¾æ¬¡æ‹¿å‡ºç¬¦åˆçš„å±æ€§å¹¶å¡«å……ä¸Šç›¸åº”çš„é…ç½®ä¿¡æ¯ã€‚*è¿™é‡Œæœ‰ä¸€ç‚¹ ï¼Œå±æ€§çš„é…ç½®ä¿¡æ¯éœ€è¦ä¾èµ–äº BeanFactoryPostProcessor çš„å®ç°ç±» PropertyPlaceholderConfigurerï¼ŒæŠŠå€¼å†™å…¥åˆ° AbstractBeanFactoryçš„embeddedValueResolversé›†åˆä¸­ï¼Œè¿™æ ·æ‰èƒ½åœ¨å±æ€§å¡«å……ä¸­åˆ©ç”¨ beanFactory è·å–ç›¸åº”çš„å±æ€§å€¼*
- è¿˜æœ‰ä¸€ä¸ªæ˜¯å…³äº @Autowired å¯¹äºå¯¹è±¡çš„æ³¨å…¥ï¼Œå…¶å®è¿™ä¸€ä¸ªå’Œå±æ€§æ³¨å…¥çš„å”¯ä¸€åŒºåˆ«æ˜¯å¯¹äºå¯¹è±¡çš„è·å– `beanFactory.getBean(fieldType)`ï¼Œå…¶ä»–å°±æ²¡æœ‰ä»€ä¹ˆå·®ä¸€ç‚¹äº†ã€‚
- å½“æ‰€æœ‰çš„å±æ€§è¢«è®¾ç½®åˆ° PropertyValues  å®Œæˆä»¥åï¼Œæ¥ä¸‹æ¥å°±åˆ°äº†åˆ›å»ºå¯¹è±¡çš„ä¸‹ä¸€æ­¥ï¼Œå±æ€§å¡«å……ï¼Œè€Œæ­¤æ—¶å°±ä¼šæŠŠæˆ‘ä»¬ä¸€ä¸€è·å–åˆ°çš„é…ç½®å’Œå¯¹è±¡å¡«å……åˆ°å±æ€§ä¸Šï¼Œä¹Ÿå°±å®ç°äº†è‡ªåŠ¨æ³¨å…¥çš„åŠŸèƒ½ã€‚

## å››ã€å®ç° 

### 1. å·¥ç¨‹ç»“æ„

```java
small-spring-step-14
â””â”€â”€ src
    â”œâ”€â”€ main
    â”‚   â””â”€â”€ java
    â”‚       â””â”€â”€ cn.bugstack.springframework
    â”‚           â”œâ”€â”€ aop
    â”‚           â”‚   â”œâ”€â”€ aspectj
    â”‚           â”‚   â”‚   â””â”€â”€ AspectJExpressionPointcut.java
    â”‚           â”‚   â”‚   â””â”€â”€ AspectJExpressionPointcutAdvisor.java
    â”‚           â”‚   â”œâ”€â”€ framework 
    â”‚           â”‚   â”‚   â”œâ”€â”€ adapter
    â”‚           â”‚   â”‚   â”‚   â””â”€â”€ MethodBeforeAdviceInterceptor.java
    â”‚           â”‚   â”‚   â”œâ”€â”€ autoproxy
    â”‚           â”‚   â”‚   â”‚   â””â”€â”€ MethodBeforeAdviceInterceptor.java
    â”‚           â”‚   â”‚   â”œâ”€â”€ AopProxy.java
    â”‚           â”‚   â”‚   â”œâ”€â”€ Cglib2AopProxy.java
    â”‚           â”‚   â”‚   â”œâ”€â”€ JdkDynamicAopProxy.java
    â”‚           â”‚   â”‚   â”œâ”€â”€ ProxyFactory.java
    â”‚           â”‚   â”‚   â””â”€â”€ ReflectiveMethodInvocation.java
    â”‚           â”‚   â”œâ”€â”€ AdvisedSupport.java
    â”‚           â”‚   â”œâ”€â”€ Advisor.java
    â”‚           â”‚   â”œâ”€â”€ BeforeAdvice.java
    â”‚           â”‚   â”œâ”€â”€ ClassFilter.java
    â”‚           â”‚   â”œâ”€â”€ MethodBeforeAdvice.java
    â”‚           â”‚   â”œâ”€â”€ MethodMatcher.java
    â”‚           â”‚   â”œâ”€â”€ Pointcut.java
    â”‚           â”‚   â”œâ”€â”€ PointcutAdvisor.java
    â”‚           â”‚   â””â”€â”€ TargetSource.java
    â”‚           â”œâ”€â”€ beans
    â”‚           â”‚   â”œâ”€â”€ factory  
    â”‚           â”‚   â”‚   â”œâ”€â”€ annotation
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ Autowired.java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ AutowiredAnnotationBeanPostProcessor.java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ Qualifier.java
    â”‚           â”‚   â”‚   â”‚   â””â”€â”€ Value.java
    â”‚           â”‚   â”‚   â”œâ”€â”€ config
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ AutowireCapableBeanFactory.java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ BeanDefinition.java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ BeanFactoryPostProcessor.java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ BeanPostProcessor.java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ BeanReference.java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ ConfigurableBeanFactory.java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ InstantiationAwareBeanPostProcessor.java
    â”‚           â”‚   â”‚   â”‚   â””â”€â”€ SingletonBeanRegistry.java
    â”‚           â”‚   â”‚   â”œâ”€â”€ support
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ AbstractAutowireCapableBeanFactory.java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ AbstractBeanDefinitionReader.java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ AbstractBeanFactory.java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ BeanDefinitionReader.java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ BeanDefinitionRegistry.java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ CglibSubclassingInstantiationStrategy.java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ DefaultListableBeanFactory.java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ DefaultSingletonBeanRegistry.java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ DisposableBeanAdapter.java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ FactoryBeanRegistrySupport.java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ InstantiationStrategy.java
    â”‚           â”‚   â”‚   â”‚   â””â”€â”€ SimpleInstantiationStrategy.java  
    â”‚           â”‚   â”‚   â”œâ”€â”€ support
    â”‚           â”‚   â”‚   â”‚   â””â”€â”€ XmlBeanDefinitionReader.java
    â”‚           â”‚   â”‚   â”œâ”€â”€ Aware.java
    â”‚           â”‚   â”‚   â”œâ”€â”€ BeanClassLoaderAware.java
    â”‚           â”‚   â”‚   â”œâ”€â”€ BeanFactory.java
    â”‚           â”‚   â”‚   â”œâ”€â”€ BeanFactoryAware.java
    â”‚           â”‚   â”‚   â”œâ”€â”€ BeanNameAware.java
    â”‚           â”‚   â”‚   â”œâ”€â”€ ConfigurableListableBeanFactory.java
    â”‚           â”‚   â”‚   â”œâ”€â”€ DisposableBean.java
    â”‚           â”‚   â”‚   â”œâ”€â”€ FactoryBean.java
    â”‚           â”‚   â”‚   â”œâ”€â”€ HierarchicalBeanFactory.java
    â”‚           â”‚   â”‚   â”œâ”€â”€ InitializingBean.java
    â”‚           â”‚   â”‚   â”œâ”€â”€ ListableBeanFactory.java
    â”‚           â”‚   â”‚   â””â”€â”€ PropertyPlaceholderConfigurer.java
    â”‚           â”‚   â”œâ”€â”€ BeansException.java
    â”‚           â”‚   â”œâ”€â”€ PropertyValue.java
    â”‚           â”‚   â””â”€â”€ PropertyValues.java 
    â”‚           â”œâ”€â”€ context
    â”‚           â”‚   â”œâ”€â”€ annotation
    â”‚           â”‚   â”‚   â”œâ”€â”€ ClassPathBeanDefinitionScanner.java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ ClassPathScanningCandidateComponentProvider.java 
    â”‚           â”‚   â”‚   â””â”€â”€ Scope.java 
    â”‚           â”‚   â”œâ”€â”€ event
    â”‚           â”‚   â”‚   â”œâ”€â”€ AbstractApplicationEventMulticaster.java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ ApplicationContextEvent.java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ ApplicationEventMulticaster.java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ ContextClosedEvent.java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ ContextRefreshedEvent.java 
    â”‚           â”‚   â”‚   â””â”€â”€ SimpleApplicationEventMulticaster.java 
    â”‚           â”‚   â”œâ”€â”€ support
    â”‚           â”‚   â”‚   â”œâ”€â”€ AbstractApplicationContext.java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ AbstractRefreshableApplicationContext.java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ AbstractXmlApplicationContext.java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ ApplicationContextAwareProcessor.java 
    â”‚           â”‚   â”‚   â””â”€â”€ ClassPathXmlApplicationContext.java 
    â”‚           â”‚   â”œâ”€â”€ ApplicationContext.java 
    â”‚           â”‚   â”œâ”€â”€ ApplicationContextAware.java 
    â”‚           â”‚   â”œâ”€â”€ ApplicationEvent.java 
    â”‚           â”‚   â”œâ”€â”€ ApplicationEventPublisher.java 
    â”‚           â”‚   â”œâ”€â”€ ApplicationListener.java 
    â”‚           â”‚   â””â”€â”€ ConfigurableApplicationContext.java
    â”‚           â”œâ”€â”€ core.io
    â”‚           â”‚   â”œâ”€â”€ ClassPathResource.java 
    â”‚           â”‚   â”œâ”€â”€ DefaultResourceLoader.java 
    â”‚           â”‚   â”œâ”€â”€ FileSystemResource.java 
    â”‚           â”‚   â”œâ”€â”€ Resource.java 
    â”‚           â”‚   â”œâ”€â”€ ResourceLoader.java
    â”‚           â”‚   â””â”€â”€ UrlResource.java
    â”‚           â”œâ”€â”€ stereotype
    â”‚           â”‚   â””â”€â”€ Component.java
    â”‚           â””â”€â”€ utils
    â”‚               â”œâ”€â”€ ClassUtils.java
    â”‚               â””â”€â”€ StringValueResolver.java
    â””â”€â”€ test
        â””â”€â”€ java
            â””â”€â”€ cn.bugstack.springframework.test
                â”œâ”€â”€ bean
                â”‚   â”œâ”€â”€ IUserService.java
                â”‚   â””â”€â”€ UserService.java
                â””â”€â”€ ApiTest.java
```

**å·¥ç¨‹æºç **ï¼š`å…¬ä¼—å·ã€Œbugstackè™«æ´æ ˆã€ï¼Œå›å¤ï¼šSpring ä¸“æ ï¼Œè·å–å®Œæ•´æºç `

è‡ªåŠ¨æ‰«ææ³¨å…¥å ä½ç¬¦é…ç½®å’Œå¯¹è±¡çš„ç±»å…³ç³»ï¼Œå¦‚å›¾ 15-2

![å›¾ 15-2](https://bugstack.cn/assets/images/spring/spring-15-02.png)

- åœ¨æ•´ä¸ªç±»å›¾ä¸­ä»¥å›´ç»•å®ç°æ¥å£ InstantiationAwareBeanPostProcessor çš„ç±» AutowiredAnnotationBeanPostProcessor ä½œä¸ºå…¥å£ç‚¹ï¼Œè¢« AbstractAutowireCapableBeanFactoryåˆ›å»º Bean å¯¹è±¡è¿‡ç¨‹ä¸­è°ƒç”¨æ‰«ææ•´ä¸ªç±»çš„å±æ€§é…ç½®ä¸­å«æœ‰è‡ªå®šä¹‰æ³¨è§£ `Value`ã€`Autowired`ã€`Qualifier`ï¼Œçš„å±æ€§å€¼ã€‚
- è¿™é‡Œç¨æœ‰å˜åŠ¨çš„æ˜¯å…³äºå±æ€§å€¼ä¿¡æ¯çš„è·å–ï¼Œåœ¨æ³¨è§£é…ç½®çš„å±æ€§å­—æ®µæ‰«æåˆ°ä¿¡æ¯æ³¨å…¥æ—¶ï¼ŒåŒ…æ‹¬äº†å ä½ç¬¦ä»é…ç½®æ–‡ä»¶è·å–ä¿¡æ¯ä¹ŸåŒ…æ‹¬ Bean å¯¹è±¡ï¼ŒBean å¯¹è±¡å¯ä»¥ç›´æ¥è·å–ï¼Œä½†é…ç½®ä¿¡æ¯éœ€è¦åœ¨ AbstractBeanFactory ä¸­æ·»åŠ æ–°çš„å±æ€§é›†åˆ embeddedValueResolversï¼Œç”± PropertyPlaceholderConfigurer#postProcessBeanFactory è¿›è¡Œæ“ä½œå¡«å……åˆ°å±æ€§é›†åˆä¸­ã€‚

### 2. æŠŠè¯»å–åˆ°å±æ€§å¡«å……åˆ°å®¹å™¨

**å®šä¹‰è§£æå­—ç¬¦ä¸²æ¥å£**

**cn.bugstack.springframework.util.StringValueResolver**

```java
public interface StringValueResolver {

    String resolveStringValue(String strVal);

}
```

- æ¥å£ StringValueResolver æ˜¯ä¸€ä¸ªè§£æå­—ç¬¦ä¸²æ“ä½œçš„æ¥å£

**å¡«å……å­—ç¬¦ä¸²**

```java
public class PropertyPlaceholderConfigurer implements BeanFactoryPostProcessor {

    @Override
    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) throws BeansException {
        try {
            // åŠ è½½å±æ€§æ–‡ä»¶
            DefaultResourceLoader resourceLoader = new DefaultResourceLoader();
            Resource resource = resourceLoader.getResource(location);
            
            // ... å ä½ç¬¦æ›¿æ¢å±æ€§å€¼ã€è®¾ç½®å±æ€§å€¼

            // å‘å®¹å™¨ä¸­æ·»åŠ å­—ç¬¦ä¸²è§£æå™¨ï¼Œä¾›è§£æ@Valueæ³¨è§£ä½¿ç”¨
            StringValueResolver valueResolver = new PlaceholderResolvingStringValueResolver(properties);
            beanFactory.addEmbeddedValueResolver(valueResolver);
            
        } catch (IOException e) {
            throw new BeansException("Could not load properties", e);
        }
    }

    private class PlaceholderResolvingStringValueResolver implements StringValueResolver {

        private final Properties properties;

        public PlaceholderResolvingStringValueResolver(Properties properties) {
            this.properties = properties;
        }

        @Override
        public String resolveStringValue(String strVal) {
            return PropertyPlaceholderConfigurer.this.resolvePlaceholder(strVal, properties);
        }

    }

}
```

- åœ¨è§£æå±æ€§é…ç½®çš„ç±» PropertyPlaceholderConfigurer ä¸­ï¼Œæœ€ä¸»è¦çš„å…¶å®å°±æ˜¯è¿™è¡Œä»£ç çš„æ“ä½œ `beanFactory.addEmbeddedValueResolver(valueResolver)` è¿™æ˜¯æŠŠå±æ€§å€¼å†™å…¥åˆ°äº† AbstractBeanFactory çš„ embeddedValueResolvers ä¸­ã€‚ 
- è¿™é‡Œè¯´æ˜ä¸‹ï¼ŒembeddedValueResolvers æ˜¯ AbstractBeanFactory ç±»æ–°å¢åŠ çš„é›†åˆ `List<StringValueResolver> embeddedValueResolvers` String resolvers to apply e.g. to annotation attribute values 

### 3. è‡ªå®šä¹‰å±æ€§æ³¨å…¥æ³¨è§£

**è‡ªå®šä¹‰æ³¨è§£ï¼ŒAutowiredã€Qualifierã€Value**

```java
@Retention(RetentionPolicy.RUNTIME)
@Target({ElementType.CONSTRUCTOR, ElementType.FIELD, ElementType.METHOD})
public @interface Autowired {
}

@Target({ElementType.FIELD, ElementType.METHOD, ElementType.PARAMETER, ElementType.TYPE, ElementType.ANNOTATION_TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Inherited
@Documented
public @interface Qualifier {

    String value() default "";

}  

@Target({ElementType.FIELD, ElementType.METHOD, ElementType.PARAMETER})
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface Value {

    /**
     * The actual value expression: e.g. "#{systemProperties.myProp}".
     */
    String value();

}
```

- 3ä¸ªæ³¨è§£åœ¨æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨ Spring ä¹Ÿæ˜¯éå¸¸å¸¸è§çš„ï¼Œæ³¨å…¥å¯¹è±¡ã€æ³¨å…¥å±æ€§ï¼Œè€Œ Qualifier ä¸€èˆ¬ä¸ Autowired é…åˆä½¿ç”¨ã€‚

### 4. æ‰«æè‡ªå®šä¹‰æ³¨è§£

**cn.bugstack.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor** 

```java
public class AutowiredAnnotationBeanPostProcessor implements InstantiationAwareBeanPostProcessor, BeanFactoryAware {

    private ConfigurableListableBeanFactory beanFactory;

    @Override
    public void setBeanFactory(BeanFactory beanFactory) throws BeansException {
        this.beanFactory = (ConfigurableListableBeanFactory) beanFactory;
    }

    @Override
    public PropertyValues postProcessPropertyValues(PropertyValues pvs, Object bean, String beanName) throws BeansException {
        // 1. å¤„ç†æ³¨è§£ @Value
        Class<?> clazz = bean.getClass();
        clazz = ClassUtils.isCglibProxyClass(clazz) ? clazz.getSuperclass() : clazz;

        Field[] declaredFields = clazz.getDeclaredFields();

        for (Field field : declaredFields) {
            Value valueAnnotation = field.getAnnotation(Value.class);
            if (null != valueAnnotation) {
                String value = valueAnnotation.value();
                value = beanFactory.resolveEmbeddedValue(value);
                BeanUtil.setFieldValue(bean, field.getName(), value);
            }
        }

        // 2. å¤„ç†æ³¨è§£ @Autowired
        for (Field field : declaredFields) {
            Autowired autowiredAnnotation = field.getAnnotation(Autowired.class);
            if (null != autowiredAnnotation) {
                Class<?> fieldType = field.getType();
                String dependentBeanName = null;
                Qualifier qualifierAnnotation = field.getAnnotation(Qualifier.class);
                Object dependentBean = null;
                if (null != qualifierAnnotation) {
                    dependentBeanName = qualifierAnnotation.value();
                    dependentBean = beanFactory.getBean(dependentBeanName, fieldType);
                } else {
                    dependentBean = beanFactory.getBean(fieldType);
                }
                BeanUtil.setFieldValue(bean, field.getName(), dependentBean);
            }
        }

        return pvs;
    }

}
```

- AutowiredAnnotationBeanPostProcessor æ˜¯å®ç°æ¥å£ InstantiationAwareBeanPostProcessor çš„ä¸€ä¸ªç”¨äºåœ¨ Bean å¯¹è±¡å®ä¾‹åŒ–å®Œæˆåï¼Œè®¾ç½®å±æ€§æ“ä½œå‰çš„å¤„ç†å±æ€§ä¿¡æ¯çš„ç±»å’Œæ“ä½œæ–¹æ³•ã€‚*åªæœ‰å®ç°äº† BeanPostProcessor æ¥å£æ‰æœ‰æœºä¼šåœ¨ Bean çš„ç”Ÿå‘½å‘¨æœŸä¸­å¤„ç†åˆå§‹åŒ–ä¿¡æ¯*
- æ ¸å¿ƒæ–¹æ³• postProcessPropertyValuesï¼Œä¸»è¦ç”¨äºå¤„ç†ç±»å«æœ‰ @Valueã€@Autowired æ³¨è§£çš„å±æ€§ï¼Œè¿›è¡Œå±æ€§ä¿¡æ¯çš„æå–å’Œè®¾ç½®ã€‚ 
- è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç‚¹å› ä¸ºæˆ‘ä»¬åœ¨ AbstractAutowireCapableBeanFactory ç±»ä¸­ä½¿ç”¨çš„æ˜¯ CglibSubclassingInstantiationStrategy è¿›è¡Œç±»çš„åˆ›å»ºï¼Œæ‰€ä»¥åœ¨ AutowiredAnnotationBeanPostProcessor#postProcessPropertyValues ä¸­éœ€è¦åˆ¤æ–­æ˜¯å¦ä¸º CGlib åˆ›å»ºå¯¹è±¡ï¼Œå¦åˆ™æ˜¯ä¸èƒ½æ­£ç¡®æ‹¿åˆ°ç±»ä¿¡æ¯çš„ã€‚`ClassUtils.isCglibProxyClass(clazz) ? clazz.getSuperclass() : clazz;`  

### 5. å‘BeanFactoryä¸­æ³¨å†ŒAutowiredAnnotationBeanPostProcessor
```java
public class ClassPathBeanDefinitionScanner extends ClassPathScanningCandidateComponentProvider {

    private BeanDefinitionRegistry registry;

    public ClassPathBeanDefinitionScanner(BeanDefinitionRegistry registry) {
        this.registry = registry;
    }

    public void doScan(String... basePackages) {
        for (String basePackage : basePackages) {
            Set<BeanDefinition> candidates = findCandidateComponents(basePackage);
            for (BeanDefinition beanDefinition : candidates) {
                // è§£æ Bean çš„ä½œç”¨åŸŸ singletonã€prototype
                String beanScope = resolveBeanScope(beanDefinition);
                if (StrUtil.isNotEmpty(beanScope)) {
                    beanDefinition.setScope(beanScope);
                }
                registry.registerBeanDefinition(determineBeanName(beanDefinition), beanDefinition);
            }
        }

        // æ³¨å†Œå¤„ç†æ³¨è§£çš„ BeanPostProcessorï¼ˆ@Autowiredã€@Valueï¼‰
        registry.registerBeanDefinition("cn.bugstack.springframework.context.annotation.internalAutowiredAnnotationProcessor", new BeanDefinition(AutowiredAnnotationBeanPostProcessor.class));
    }

    // ...
}
```
- ç”±äºAutowiredAnnotationBeanPostProcessorå¹¶æ²¡æœ‰æ ‡æ³¨@Component,æ‰€ä»¥æ˜¯æ— æ³•åœ¨ç±»æ‰«ææ—¶æ³¨å…¥åˆ°beanFactoryä¸­çš„,æ­¤å¤„éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è¿›è¡Œæ³¨å†Œ.

### 6. åœ¨Beançš„ç”Ÿå‘½å‘¨æœŸä¸­è°ƒç”¨å±æ€§æ³¨å…¥

**cn.bugstack.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory**

```java
public abstract class AbstractAutowireCapableBeanFactory extends AbstractBeanFactory implements AutowireCapableBeanFactory {

    private InstantiationStrategy instantiationStrategy = new CglibSubclassingInstantiationStrategy();

    @Override
    protected Object createBean(String beanName, BeanDefinition beanDefinition, Object[] args) throws BeansException {
        Object bean = null;
        try {
            // åˆ¤æ–­æ˜¯å¦è¿”å›ä»£ç† Bean å¯¹è±¡
            bean = resolveBeforeInstantiation(beanName, beanDefinition);
            if (null != bean) {
                return bean;
            }
            // å®ä¾‹åŒ– Bean
            bean = createBeanInstance(beanDefinition, beanName, args);
            // åœ¨è®¾ç½® Bean å±æ€§ä¹‹å‰ï¼Œå…è®¸ BeanPostProcessor ä¿®æ”¹å±æ€§å€¼
            applyBeanPostProcessorsBeforeApplyingPropertyValues(beanName, bean, beanDefinition);
            // ç»™ Bean å¡«å……å±æ€§
            applyPropertyValues(beanName, bean, beanDefinition);
            // æ‰§è¡Œ Bean çš„åˆå§‹åŒ–æ–¹æ³•å’Œ BeanPostProcessor çš„å‰ç½®å’Œåç½®å¤„ç†æ–¹æ³•
            bean = initializeBean(beanName, bean, beanDefinition);
        } catch (Exception e) {
            throw new BeansException("Instantiation of bean failed", e);
        }

        // æ³¨å†Œå®ç°äº† DisposableBean æ¥å£çš„ Bean å¯¹è±¡
        registerDisposableBeanIfNecessary(beanName, bean, beanDefinition);

        // åˆ¤æ–­ SCOPE_SINGLETONã€SCOPE_PROTOTYPE
        if (beanDefinition.isSingleton()) {
            registerSingleton(beanName, bean);
        }
        return bean;
    }

    /**
     * åœ¨è®¾ç½® Bean å±æ€§ä¹‹å‰ï¼Œå…è®¸ BeanPostProcessor ä¿®æ”¹å±æ€§å€¼
     *
     * @param beanName
     * @param bean
     * @param beanDefinition
     */
    protected void applyBeanPostProcessorsBeforeApplyingPropertyValues(String beanName, Object bean, BeanDefinition beanDefinition) {
        for (BeanPostProcessor beanPostProcessor : getBeanPostProcessors()) {
            if (beanPostProcessor instanceof InstantiationAwareBeanPostProcessor){
                PropertyValues pvs = ((InstantiationAwareBeanPostProcessor) beanPostProcessor).postProcessPropertyValues(beanDefinition.getPropertyValues(), bean, beanName);
                if (null != pvs) {
                    for (PropertyValue propertyValue : pvs.getPropertyValues()) {
                        beanDefinition.getPropertyValues().addPropertyValue(propertyValue);
                    }
                }
            }
        }
    }  

    // ...
}
```

- AbstractAutowireCapableBeanFactory#createBean æ–¹æ³•ä¸­æœ‰è¿™ä¸€æ¡æ–°å¢åŠ çš„æ–¹æ³•è°ƒç”¨ï¼Œå°±æ˜¯åœ¨`è®¾ç½® Bean å±æ€§ä¹‹å‰ï¼Œå…è®¸ BeanPostProcessor ä¿®æ”¹å±æ€§å€¼` çš„æ“ä½œ `applyBeanPostProcessorsBeforeApplyingPropertyValues`
- é‚£ä¹ˆè¿™ä¸ª applyBeanPostProcessorsBeforeApplyingPropertyValues æ–¹æ³•ä¸­ï¼Œé¦–å…ˆå°±æ˜¯è·å–å·²ç»æ³¨å…¥çš„ BeanPostProcessor é›†åˆå¹¶ä»ä¸­ç­›é€‰å‡ºç»§æ‰¿æ¥å£ InstantiationAwareBeanPostProcessor çš„å®ç°ç±»ã€‚ 
- æœ€åå°±æ˜¯è°ƒç”¨ç›¸åº”çš„ postProcessPropertyValues æ–¹æ³•ä»¥åŠå¾ªç¯è®¾ç½®å±æ€§å€¼ä¿¡æ¯ï¼Œ`beanDefinition.getPropertyValues().addPropertyValue(propertyValue);`

## äº”ã€æµ‹è¯•

### 1. äº‹å…ˆå‡†å¤‡

**é…ç½® Dao**

```java
@Component
public class UserDao {

    private static Map<String, String> hashMap = new HashMap<>();

    static {
        hashMap.put("10001", "å°å‚…å“¥ï¼ŒåŒ—äº¬ï¼Œäº¦åº„");
        hashMap.put("10002", "å…«æ¯æ°´ï¼Œä¸Šæµ·ï¼Œå°–æ²™å’€");
        hashMap.put("10003", "é˜¿æ¯›ï¼Œå¤©æ´¥ï¼Œä¸œä¸½åŒº");
    }

    public String queryUserName(String uId) {
        return hashMap.get(uId);
    }

}
```

- ç»™ç±»é…ç½®ä¸Šä¸€ä¸ªè‡ªåŠ¨æ‰«ææ³¨å†Œ Bean å¯¹è±¡çš„æ³¨è§£ `@Component`ï¼Œæ¥ä¸‹æ¥ä¼šæŠŠè¿™ä¸ªç±»æ³¨å…¥åˆ° UserService ä¸­ã€‚

**æ³¨è§£æ³¨å…¥åˆ° UserService**

```java
@Component("userService")
public class UserService implements IUserService {

    @Value("${token}")
    private String token;

    @Autowired
    private UserDao userDao;

    public String queryUserInfo() {
        try {
            Thread.sleep(new Random(1).nextInt(100));
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        return userDao.queryUserName("10001") + "ï¼Œ" + token;
    }    

    // ...
}
```

- è¿™é‡ŒåŒ…æ‹¬äº†ä¸¤ç§ç±»å‹çš„æ³¨å…¥ï¼Œä¸€ä¸ªæ˜¯å ä½ç¬¦æ³¨å…¥å±æ€§ä¿¡æ¯ ` @Value("${token}")`ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯æ³¨å…¥å¯¹è±¡ä¿¡æ¯ `@Autowired`

### 2. å±æ€§é…ç½®æ–‡ä»¶

**token.properties**

```java
token=RejDlI78hu223Opo983Ds
```

**spring.xml**

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
	         http://www.springframework.org/schema/beans/spring-beans.xsd
		 http://www.springframework.org/schema/context">

    <bean class="cn.bugstack.springframework.beans.factory.PropertyPlaceholderConfigurer">
        <property name="location" value="classpath:token.properties"/>
    </bean>

    <context:component-scan base-package="cn.bugstack.springframework.test.bean"/>

</beans>
```

- åœ¨ spring.xml ä¸­é…ç½®äº†æ‰«æå±æ€§ä¿¡æ¯å’Œè‡ªåŠ¨æ‰«æåŒ…è·¯å¾„èŒƒå›´ã€‚

### 3. å•å…ƒæµ‹è¯•

```java
@Test
public void test_scan() {
    ClassPathXmlApplicationContext applicationContext = new ClassPathXmlApplicationContext("classpath:spring.xml");
    IUserService userService = applicationContext.getBean("userService", IUserService.class);
    System.out.println("æµ‹è¯•ç»“æœï¼š" + userService.queryUserInfo());
}
```

- å•å…ƒæµ‹è¯•æ—¶å€™å°±å¯ä»¥å®Œæ•´çš„æµ‹è¯•ä¸€ä¸ªç±»æ³¨å…¥åˆ° Spring å®¹å™¨ï¼ŒåŒæ—¶è¿™ä¸ªå±æ€§ä¿¡æ¯ä¹Ÿå¯ä»¥è¢«è‡ªåŠ¨æ‰«æå¡«å……ä¸Šã€‚

**æµ‹è¯•ç»“æœ**

```java
æµ‹è¯•ç»“æœï¼šå°å‚…å“¥ï¼ŒåŒ—äº¬ï¼Œäº¦åº„ï¼ŒRejDlI78hu223Opo983Ds

Process finished with exit code 0
```

![](https://bugstack.cn/assets/images/spring/spring-15-03.png)

- ä»æµ‹è¯•ç»“æœå¯ä»¥çœ‹åˆ°ç°åœ¨æˆ‘ä»¬çš„ä½¿ç”¨æ–¹å¼å·²ç»é€šè¿‡äº†ï¼Œæœ‰è‡ªåŠ¨æ‰«æç±»ï¼Œæœ‰æ³¨è§£æ³¨å…¥å±æ€§ã€‚è¿™ä¸ä½¿ç”¨ Spring æ¡†æ¶è¶Šæ¥è¶Šåƒäº†ã€‚

## å…­ã€æ€»ç»“

- ä»æ•´ä¸ªæ³¨è§£ä¿¡æ¯æ‰«ææ³¨å…¥çš„å®ç°å†…å®¹æ¥çœ‹ï¼Œæˆ‘ä»¬ä¸€ç›´æ˜¯å›´ç»•ç€åœ¨ Bean çš„ç”Ÿå‘½å‘¨æœŸä¸­è¿›è¡Œå¤„ç†ï¼Œå°±åƒ BeanPostProcessor ç”¨äºä¿®æ”¹æ–°å®ä¾‹åŒ– Bean å¯¹è±¡çš„æ‰©å±•ç‚¹ï¼Œæä¾›çš„æ¥å£æ–¹æ³•å¯ä»¥ç”¨äºå¤„ç† Bean å¯¹è±¡å®ä¾‹åŒ–å‰åè¿›è¡Œå¤„ç†æ“ä½œã€‚è€Œæœ‰æ—¶å€™éœ€è¦åšä¸€äº›å·®å¼‚åŒ–çš„æ§åˆ¶ï¼Œæ‰€ä»¥è¿˜éœ€è¦ç»§æ‰¿ BeanPostProcessor æ¥å£ï¼Œå®šä¹‰æ–°çš„æ¥å£ InstantiationAwareBeanPostProcessor è¿™æ ·å°±å¯ä»¥åŒºåˆ†å‡ºä¸åŒæ‰©å±•ç‚¹çš„æ“ä½œäº†ã€‚
- åƒæ˜¯æ¥å£ç”¨ instanceof åˆ¤æ–­ï¼Œæ³¨è§£ç”¨ Field.getAnnotation(Value.class); è·å–ï¼Œéƒ½æ˜¯ç›¸å½“äºåœ¨ç±»ä¸Šåšçš„ä¸€äº›æ ‡è¯†æ€§ä¿¡æ¯ï¼Œä¾¿äºå¯ä»¥ç”¨ä¸€äº›æ–¹æ³•æ‰¾åˆ°è¿™äº›åŠŸèƒ½ç‚¹ï¼Œä»¥ä¾¿è¿›è¡Œå¤„ç†ã€‚æ‰€ä»¥åœ¨æˆ‘ä»¬æ—¥å¸¸å¼€å‘è®¾è®¡çš„ç»„ä»¶ä¸­ï¼Œä¹Ÿå¯ä»¥è¿ç”¨ä¸Šè¿™äº›ç‰¹ç‚¹ã€‚
- å½“ä½ æ€è€ƒæŠŠä½ çš„å®ç°èå…¥åˆ°ä¸€ä¸ªå·²ç»ç»†åˆ†å¥½çš„ Bean ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œä½ ä¼šå‘ç°å®ƒçš„è®¾è®¡æ˜¯å¦‚æ­¤çš„å¥½ï¼Œå¯ä»¥è®©ä½ åœ¨ä»»ä½•åˆå§‹åŒ–çš„æ—¶é—´ç‚¹ä¸Šï¼Œä»»ä½•é¢ä¸Šï¼Œéƒ½èƒ½åšä½ éœ€è¦çš„æ‰©å±•æˆ–è€…æ”¹å˜ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬åšç¨‹åºè®¾è®¡æ—¶è¿½æ±‚çš„çµæ´»æ€§ã€‚ 

## ä¸ƒã€ä¼˜ç§€ä½œä¸š

- [åˆ©ç”¨ BeanPostProcessor å®ç°Beanå±æ€§çš„æ³¨è§£æ³¨å…¥](https://t.zsxq.com/06zV7mA2Z)
- [è§£å†³å±æ€§æ³¨å…¥ï¼Œ@Valueå’Œ@Autowiredæ³¨è§£ @Chin](https://t.zsxq.com/06emaAAyf)
- [ä½¿ç”¨æ³¨è§£æ¥è¿›è¡Œè‡ªåŠ¨æ³¨å…¥ @W](https://t.zsxq.com/06yFieYJu)
- [å°†åŸæ¥åœ¨spring.xmlä¸­é…ç½®beanï¼Œæ”¹ä¸ºåœ¨åœ¨ç±»ä¸Šæ·»åŠ @Componentæ³¨è§£æ‰«æ @liuc](https://t.zsxq.com/08jh9bRRu)
- [åœ¨å®ç°è‡ªåŠ¨æ‰«æå¸¦ @Component æ³¨è§£çš„å¯¹è±¡è‡ªåŠ¨è£…é…å’Œæ³¨å†Œçš„åŸºç¡€ä¸Šï¼Œé¢å¯ä»¥ä½¿ç”¨ @Autowiredã€@Value æ³¨è§£ï¼Œå®Œæˆå¯¹å±æ€§å’Œå¯¹è±¡çš„æ³¨å…¥æ“ä½œã€‚@æ°´ä¸­ææœˆ](https://t.zsxq.com/086EpbbNg)
