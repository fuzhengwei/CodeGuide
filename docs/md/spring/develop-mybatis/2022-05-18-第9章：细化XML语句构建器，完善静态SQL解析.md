---
title: ç¬¬9ç« ï¼šç»†åŒ–XMLè¯­å¥æ„å»ºå™¨ï¼Œå®Œå–„é™æ€SQLè§£æ
lock: need
---

# ã€ŠMybatis æ‰‹æ’¸ä¸“æ ã€‹ç¬¬9ç« ï¼šç»†åŒ–XMLè¯­å¥æ„å»ºå™¨ï¼Œå®Œå–„é™æ€SQLè§£æ

ä½œè€…ï¼šå°å‚…å“¥
<br/>åšå®¢ï¼š[https://bugstack.cn](https://bugstack.cn)
<br/>åŸæ–‡ï¼š[https://mp.weixin.qq.com/s/I88gvB0NqCRoIQgUJx8EMg](https://mp.weixin.qq.com/s/I88gvB0NqCRoIQgUJx8EMg)

> æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„

<iframe id="B-Video" src="//player.bilibili.com/player.html?aid=599429245&bvid=BV1qB4y167AY&cid=803322797&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="480"> </iframe>

## ä¸€ã€å‰è¨€

`ä½ åªæ˜¯åœ¨è§£é‡Šè¿‡ç¨‹ï¼Œè€Œä»–æ˜¯åœ¨é˜è¿°é«˜åº¦ï¼`

å¦‚æœä¸æ˜¯é•¿æ—¶é—´çš„æ²‰æ·€ã€ç§¯ç´¯å’Œå‚¨å¤‡ï¼Œæˆ‘ä¸€å®šä¹Ÿæ²¡æœ‰åŠæ³•ç”¨æ›´å¤šçš„ç»´åº¦å’Œæ›´å¤šçš„è§†è§’æ¥å¯¹ä¸€ä¸ªé—®é¢˜è¿›è¡Œå¤šæ–¹é¢é˜è¿°ã€‚å°±åƒä½ æˆ‘ï¼›è¶Šè¿‡å³­å£å±±å·ï¼Œæ‰çŸ¥æ•å¸­è¿˜å¸ˆçš„é€šè¾¾å¹³å¦ã€‚é¢†ç•¥è¿‡é›·å£°åƒå¶‚è½ï¼Œé›¨è‰²ä¸‡å³°æ¥ï¼Œæ‰é—»åˆ°å…«è¡¨æµäº‘æ¾„å¤œè‰²ï¼Œä¹éœ„åæœˆåŠ¨æ˜¥åŸçš„å®é™ã€‚

æ‰€ä»¥å¼•ç”³åˆ°ç¼–ç¨‹å¼€å‘ï¼Œå¾€ç®€å•äº†è¯´å°±æ˜¯å†™å†™ä»£ç ï¼Œæ”¹æ”¹bugã€‚ä½†å¦‚æœå°±å±€é™åœ¨åªæ˜¯å†™å†™ä»£ç ï¼Œå…¶å®å¾ˆéš¾é¢†ç•¥åˆ°é‚£äº›ä¼—å¤šè®¾è®¡æ€æƒ³å’Œå¤æ‚é—®é¢˜ä¸­ï¼Œåº–ä¸è§£ç‰›èˆ¬çš„é…£ç•…æ·‹æ¼“ã€‚è€Œè¿™äº›é…£ç•…çš„ä½“éªŒï¼Œéƒ½éœ€è¦ä½ å¯¹æŠ€æœ¯çš„æ‹“å±•å­¦ä¹ å’Œæ·±åº¦æ¢ç´¢ï¼Œä»ä¼—å¤šçš„ä¼˜ç§€æºç æ¡†æ¶ä¸­å¸æ”¶ç»éªŒã€‚åå¤æ£æ‘©ã€åå¤å°è¯•ï¼Œç»ˆæœ‰é‚£ä¹ˆä¸€ä¸ªæ—¶é—´ç‚¹ï¼Œä½ ä¼šæœ‰ç§æ‚Ÿäº†çš„æ„Ÿè§‰ã€‚è€Œè¿™äº›ä¸€ä¸ªä¸ªæ„Ÿè§‰çš„ç§¯ç´¯ï¼Œå°±èƒ½å¸®åŠ©ä½ ä»¥ååœ¨é¢è¯•ã€è¿°èŒã€ç­”è¾©ã€åˆ†äº«ã€æ±‡æŠ¥ç­‰åœºæ™¯ä¸­ï¼Œè¯´å‡ºæ›´æœ‰æ·±åº¦çš„æŠ€æœ¯æ€æƒ³å’Œç±»æ¯”è®¾è®¡å¯¹ç…§ï¼Œç«™åœ¨æ›´é«˜çš„è§’åº¦ä¿¯è§†ä¸šåŠ¡åœºæ™¯çš„èµ°å‘å’Œç»™å‡ºé•¿è¿œçš„æ¶æ„æ–¹æ¡ˆã€‚

## äºŒã€ç›®æ ‡

å®ç°åˆ°æœ¬ç« èŠ‚å‰ï¼Œå…³äº Mybatis ORM æ¡†æ¶çš„å¤§éƒ¨åˆ†æ ¸å¿ƒç»“æ„å·²ç»é€æ­¥ä½“ç°å‡ºæ¥äº†ï¼ŒåŒ…æ‹¬ï¼›è§£æã€ç»‘å®šã€æ˜ å°„ã€äº‹åŠ¡ã€æ‰§è¡Œã€æ•°æ®æºç­‰ã€‚ä½†éšç€æ›´å¤šåŠŸèƒ½çš„é€æ­¥å®Œå–„ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ¨¡å—å†…çš„å®ç°è¿›è¡Œç»†åŒ–å¤„ç†ï¼Œè€Œä¸å•å•åªæ˜¯å®ŒæˆåŠŸèƒ½é€»è¾‘ã€‚è¿™å°±æœ‰ç‚¹åƒæŠŠ CRUD ä½¿ç”¨è®¾è®¡åŸåˆ™è¿›è¡Œæ‹†åˆ†è§£è€¦ï¼Œæ»¡è¶³ä»£ç çš„æ˜“ç»´æŠ¤å’Œå¯æ‰©å±•æ€§ã€‚è€Œè¿™é‡Œæˆ‘ä»¬é¦–å…ˆç€æ‰‹è¦å¤„ç†çš„å°±æ˜¯å…³äº XML è§£æçš„é—®é¢˜ï¼ŒæŠŠä¹‹å‰ç²—ç³™çš„å®ç°è¿›è¡Œç»†åŒ–ï¼Œæ»¡è¶³æˆ‘ä»¬å¯¹è§£ææ—¶ä¸€äº›å‚æ•°çš„æ•´åˆå’Œå¤„ç†ã€‚

![å›¾ 9-1 ORMæ¡†æ¶XMLè§£ææ˜ å°„å…³ç³»](https://bugstack.cn/images/article/spring/mybatis-220519-01.png)

- è¿™ä¸€éƒ¨åˆ†çš„è§£æï¼Œå°±æ˜¯åœ¨æˆ‘ä»¬æœ¬ç« èŠ‚ä¹‹å‰çš„ XMLConfigBuilder#mapperElement æ–¹æ³•ä¸­çš„æ“ä½œã€‚çœ‹ä¸Šå»è™½ç„¶èƒ½å®ç°åŠŸèƒ½ï¼Œä½†æ€»ä¼šè®©äººæ„Ÿè§‰å®ƒä¸å¤Ÿè§„æ•´ã€‚å°±åƒæˆ‘ä»¬å¹³å¸¸å¼€å‘çš„ CRUD ç½—åˆ—åˆ°ä¸€å—çš„é€»è¾‘ä¸€æ ·ï¼Œä»€ä¹ˆæµç¨‹éƒ½èƒ½å¤„ç†ï¼Œä½†ä»€ä¹ˆæµç¨‹éƒ½ä¼šè¶Šæ¥è¶Šæ··ä¹±ã€‚
- å°±åƒæˆ‘ä»¬åœ¨ ORM æ¡†æ¶ DefaultSqlSession ä¸­è°ƒç”¨å…·ä½“æ‰§è¡Œæ•°æ®åº“æ“ä½œçš„æ–¹æ³•ï¼Œéœ€è¦è¿›è¡Œ PreparedStatementHandler#parameterize å‚æ•°æ—¶ï¼Œå…¶å®å¹¶æ²¡æœ‰å‡†ç¡®çš„å®šä½åˆ°å‚æ•°çš„ç±»å‹ï¼ŒjdbcTypeå’ŒjavaTypeçš„è½¬æ¢å…³ç³»ï¼Œæ‰€ä»¥åç»­çš„å±æ€§å¡«å……å°±ä¼šæ˜¾å¾—æ¯”è¾ƒæ··ä¹±ä¸”ä¸æ˜“äºæ‰©å±•ã€‚*å½“ç„¶ï¼Œå¦‚æœä½ ç¡¬å†™ä¹Ÿæ˜¯å†™çš„å‡ºæ¥çš„ï¼Œä¸è¿‡è¿™ç§å°±ä¸æ˜¯ä¸€ä¸ªå¥½çš„è®¾è®¡ï¼*
- æ‰€ä»¥æ¥ä¸‹æ¥å°å‚…å“¥ä¼šå¸¦ç€è¯»è€…ï¼ŒæŠŠè¿™éƒ¨åˆ†è§£æçš„å¤„ç†ï¼Œä½¿ç”¨è®¾è®¡åŸåˆ™å°†æµç¨‹å’ŒèŒè´£è¿›è¡Œè§£è€¦ï¼Œå¹¶ç»“åˆæˆ‘ä»¬çš„å½“å‰è¯‰æ±‚ï¼Œä¼˜å…ˆå¤„ç†é™æ€ SQL å†…å®¹ã€‚å¾…æ¡†æ¶ç»“æ„é€æ­¥å®Œå–„ï¼Œå†è¿›è¡Œä¸€äº›åŠ¨æ€SQLå’Œæ›´å¤šå‚æ•°ç±»å‹çš„å¤„ç†ï¼Œæ»¡è¶³è¯»è€…ä»¥ååœ¨é˜…è¯» Mybatis æºç ï¼Œä»¥åŠéœ€è¦å¼€å‘è‡ªå·±çš„ X-ORM æ¡†æ¶çš„æ—¶å€™ï¼Œæœ‰ä¸€äº›ç»éªŒç§¯ç´¯ã€‚

## ä¸‰ã€è®¾è®¡

å‚ç…§è®¾è®¡åŸåˆ™ï¼Œå¯¹äº XML ä¿¡æ¯çš„è¯»å–ï¼Œå„ä¸ªåŠŸèƒ½æ¨¡å—çš„æµç¨‹ä¸Šåº”è¯¥ç¬¦åˆå•ä¸€èŒè´£ï¼Œè€Œæ¯ä¸€ä¸ªå…·ä½“çš„å®ç°åˆå¾—å…·å¤‡è¿ªç±³ç‰¹æ³•åˆ™ï¼Œè¿™æ ·å®ç°å‡ºæ¥çš„åŠŸèƒ½æ‰èƒ½å…·æœ‰è‰¯å¥½çš„æ‰©å±•æ€§ã€‚*é€šå¸¸è¿™ç±»ä»£ç ä¹Ÿä¼šçœ‹ç€å¾ˆå¹²å‡€* é‚£ä¹ˆåŸºäºè¿™æ ·çš„è¯‰æ±‚ï¼Œæˆ‘ä»¬åˆ™éœ€è¦ç»™è§£æè¿‡ç¨‹ä¸­ï¼Œæ‰€å±è§£æçš„ä¸åŒå†…å®¹ï¼ŒæŒ‰ç…§å„è‡ªçš„èŒè´£ç±»è¿›è¡Œæ‹†è§£å’Œä¸²è”è°ƒç”¨ã€‚æ•´ä½“è®¾è®¡å¦‚å›¾ 9-2

![å›¾ 9-2 XML é…ç½®æ„å»ºå™¨è§£æè¿‡ç¨‹](https://bugstack.cn/images/article/spring/mybatis-220519-02.png)

- ä¸ä¹‹å‰çš„è§£æä»£ç ç›¸å¯¹ç…§ï¼Œä¸åœ¨æ˜¯æŠŠæ‰€æœ‰çš„è§£æéƒ½åœ¨ä¸€ä¸ªå¾ªç¯ä¸­å¤„ç†ï¼Œè€Œæ˜¯åœ¨æ•´ä¸ªè§£æè¿‡ç¨‹ä¸­ï¼Œå¼•å…¥ XMLMapperBuilderã€XMLStatementBuilder åˆ†åˆ«å¤„ç†`æ˜ å°„æ„å»ºå™¨`å’Œ`è¯­å¥æ„å»ºå™¨`ï¼ŒæŒ‰ç…§ä¸åŒçš„èŒè´£åˆ†åˆ«è¿›è¡Œè§£æã€‚
- ä¸æ­¤åŒæ—¶ä¹Ÿåœ¨è¯­å¥æ„å»ºå™¨ä¸­ï¼Œå¼•å…¥è„šæœ¬è¯­è¨€é©±åŠ¨å™¨ï¼Œé»˜è®¤å®ç°çš„æ˜¯ XMLè¯­è¨€é©±åŠ¨å™¨ XMLLanguageDriverï¼Œè¿™ä¸ªç±»æ¥å…·ä½“æ“ä½œé™æ€å’ŒåŠ¨æ€ SQL è¯­å¥èŠ‚ç‚¹çš„è§£æã€‚*è¿™éƒ¨åˆ†çš„è§£æå¤„ç†å®ç°æ–¹å¼å¾ˆå¤šï¼Œå³ä½¿è‡ªå·±ä½¿ç”¨æ­£åˆ™æˆ–è€… String æˆªå–ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚æ‰€ä»¥ä¸ºäº†ä¿æŒä¸ Mybatis çš„ç»Ÿä¸€ï¼Œæˆ‘ä»¬ç›´æ¥å‚ç…§æºç  Ognl çš„æ–¹å¼è¿›è¡Œå¤„ç†ã€‚å¯¹åº”çš„ç±»æ˜¯ DynamicContext*
- è¿™é‡Œæ‰€æœ‰çš„è§£æé“ºå«ï¼Œé€šè¿‡è§£è€¦çš„æ–¹å¼å®ç°ï¼Œéƒ½æ˜¯ä¸ºäº†åç»­åœ¨ executor æ‰§è¡Œå™¨ä¸­ï¼Œæ›´åŠ æ–¹ä¾¿çš„å¤„ç† setParameters å‚æ•°çš„è®¾ç½®ã€‚*åé¢å‚æ•°çš„è®¾ç½®ï¼Œä¹Ÿä¼šæ¶‰åŠåˆ°å‰é¢æˆ‘ä»¬å®ç°çš„å…ƒå¯¹è±¡åå°„å·¥å…·ç±»çš„ä½¿ç”¨ã€‚*

## å››ã€å®ç°

### 1. å·¥ç¨‹ç»“æ„

```java
mybatis-step-08
â””â”€â”€ src
    â”œâ”€â”€ main
    â”‚   â””â”€â”€ java
    â”‚       â””â”€â”€ cn.bugstack.mybatis
    â”‚           â”œâ”€â”€ binding
    â”‚           â”œâ”€â”€ builder
    â”‚           â”‚   â”œâ”€â”€ xml
    â”‚           â”‚   â”‚   â”œâ”€â”€ XMLConfigBuilder.java
    â”‚           â”‚   â”‚   â”œâ”€â”€ XMLMapperBuilder.java
    â”‚           â”‚   â”‚   â””â”€â”€ XMLStatementBuilder.java
    â”‚           â”‚   â”œâ”€â”€ BaseBuilder.java
    â”‚           â”‚   â”œâ”€â”€ ParameterExpression.java
    â”‚           â”‚   â”œâ”€â”€ SqlSourceBuilder.java
    â”‚           â”‚   â””â”€â”€ StaticSqlSource.java
    â”‚           â”œâ”€â”€ datasource
    â”‚           â”œâ”€â”€ executor
    â”‚           â”‚   â”œâ”€â”€ resultset
    â”‚           â”‚   â”‚   â”œâ”€â”€ DefaultResultSetHandler.java
    â”‚           â”‚   â”‚   â””â”€â”€ ResultSetHandler.java
    â”‚           â”‚   â”œâ”€â”€ statement
    â”‚           â”‚   â”‚   â”œâ”€â”€ BaseStatementHandler.java
    â”‚           â”‚   â”‚   â”œâ”€â”€ PreparedStatementHandler.java
    â”‚           â”‚   â”‚   â”œâ”€â”€ SimpleStatementHandler.java
    â”‚           â”‚   â”‚   â””â”€â”€ StatementHandler.java
    â”‚           â”‚   â”œâ”€â”€ BaseExecutor.java
    â”‚           â”‚   â”œâ”€â”€ Executor.java
    â”‚           â”‚   â””â”€â”€ SimpleExecutor.java
    â”‚           â”œâ”€â”€ io
    â”‚           â”œâ”€â”€ mapping
    â”‚           â”‚   â”œâ”€â”€ BoundSql.java
    â”‚           â”‚   â”œâ”€â”€ Environment.java
    â”‚           â”‚   â”œâ”€â”€ MappedStatement.java
    â”‚           â”‚   â”œâ”€â”€ ParameterMapping.java
    â”‚           â”‚   â”œâ”€â”€ SqlCommandType.java
    â”‚           â”‚   â””â”€â”€ SqlSource.java
    â”‚           â”œâ”€â”€ parsing
    â”‚           â”‚   â”œâ”€â”€ GenericTokenParser.java
    â”‚           â”‚   â””â”€â”€ TokenHandler.java
    â”‚           â”œâ”€â”€ reflection
    â”‚           â”œâ”€â”€ scripting
    â”‚           â”‚   â”œâ”€â”€ defaults
    â”‚           â”‚   â”‚   â”œâ”€â”€ DefaultParameterHandler.java
    â”‚           â”‚   â”‚   â””â”€â”€ RawSqlSource.java
    â”‚           â”‚   â”œâ”€â”€ xmltags
    â”‚           â”‚   â”‚   â”œâ”€â”€ DynamicContext.java
    â”‚           â”‚   â”‚   â”œâ”€â”€ MixedSqlNode.java
    â”‚           â”‚   â”‚   â”œâ”€â”€ SqlNode.java
    â”‚           â”‚   â”‚   â”œâ”€â”€ StaticTextSqlNode.java
    â”‚           â”‚   â”‚   â”œâ”€â”€ XMLLanguageDriver.java
    â”‚           â”‚   â”‚   â””â”€â”€ XMLScriptBuilder.java
    â”‚           â”‚   â”œâ”€â”€ LanguageDriver.java
    â”‚           â”‚   â””â”€â”€ LanguageDriverRegistry.java
    â”‚           â”œâ”€â”€ session
    â”‚           â”‚   â”œâ”€â”€ defaults
    â”‚           â”‚   â”‚   â”œâ”€â”€ DefaultSqlSession.java
    â”‚           â”‚   â”‚   â””â”€â”€ DefaultSqlSessionFactory.java
    â”‚           â”‚   â”œâ”€â”€ Configuration.java
    â”‚           â”‚   â”œâ”€â”€ ResultHandler.java
    â”‚           â”‚   â”œâ”€â”€ SqlSession.java
    â”‚           â”‚   â”œâ”€â”€ SqlSessionFactory.java
    â”‚           â”‚   â”œâ”€â”€ SqlSessionFactoryBuilder.java
    â”‚           â”‚   â””â”€â”€ TransactionIsolationLevel.java
    â”‚           â”œâ”€â”€ transaction
    â”‚           â””â”€â”€ type
    â”‚               â”œâ”€â”€ JdbcType.java
    â”‚               â”œâ”€â”€ TypeAliasRegistry.java
    â”‚               â”œâ”€â”€ TypeHandler.java
    â”‚               â””â”€â”€ TypeHandlerRegistry.java
    â””â”€â”€ test
        â”œâ”€â”€ java
        â”‚   â””â”€â”€ cn.bugstack.mybatis.test.dao
        â”‚       â”œâ”€â”€ dao
        â”‚       â”‚   â””â”€â”€ IUserDao.java
        â”‚       â”œâ”€â”€ po
        â”‚       â”‚   â””â”€â”€ User.java
        â”‚       â””â”€â”€ ApiTest.java
        â””â”€â”€ resources
            â”œâ”€â”€ mapper
            â”‚   â””â”€â”€User_Mapper.xml
            â””â”€â”€ mybatis-config-datasource.xml
```

**å·¥ç¨‹æºç **ï¼š`å…¬ä¼—å·ã€Œbugstackè™«æ´æ ˆã€ï¼Œå›å¤ï¼šæ‰‹å†™Mybatisï¼Œè·å–å®Œæ•´æºç `

XML è¯­å¥è§£ææ„å»ºå™¨ï¼Œæ ¸å¿ƒé€»è¾‘ç±»å…³ç³»ï¼Œå¦‚å›¾ 9-3 æ‰€ç¤º

![å›¾ 9-3 XML è¯­å¥è§£ææ„å»ºå™¨ï¼Œæ ¸å¿ƒé€»è¾‘ç±»å…³ç³»](https://bugstack.cn/images/article/spring/mybatis-220519-03.png)

- è§£è€¦åŸ XMLConfigBuilder ä¸­å¯¹ XML çš„è§£æï¼Œæ‰©å±•æ˜ å°„æ„å»ºå™¨ã€è¯­å¥æ„å»ºå™¨ï¼Œå¤„ç† SQL çš„æå–å’Œå‚æ•°çš„åŒ…è£…ï¼Œæ•´ä¸ªæ ¸å¿ƒæµå›¾ä»¥ XMLConfigBuilder#mapperElement ä¸ºå…¥å£è¿›è¡Œä¸²è”è°ƒç”¨ã€‚
- åœ¨ XMLStatementBuilder#parseStatementNode æ–¹æ³•ä¸­è§£æ `<select id="queryUserInfoById" parameterType="java.lang.Long" resultType="cn.bugstack.mybatis.test.po.User">...</select>` é…ç½®è¯­å¥ï¼Œæå–å‚æ•°ç±»å‹ã€ç»“æœç±»å‹ï¼Œè€Œè¿™é‡Œçš„è¯­å¥å¤„ç†æµç¨‹ç¨å¾®è¾ƒé•¿ï¼Œå› ä¸ºéœ€è¦ç”¨åˆ°è„šæœ¬è¯­è¨€é©±åŠ¨å™¨ï¼Œè¿›è¡Œè§£æå¤„ç†ï¼Œåˆ›å»ºå‡º SqlSource è¯­å¥ä¿¡æ¯ã€‚*SqlSource åŒ…å«äº† BoundSqlï¼ŒåŒæ—¶è¿™é‡Œæ‰©å±•äº† ParameterMapping ä½œä¸ºå‚æ•°åŒ…è£…ä¼ é€’ç±»ï¼Œè€Œä¸æ˜¯ä»…ä»…ä½œä¸º Map ç»“æ„åŒ…è£…ã€‚å› ä¸ºé€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼Œå¯ä»¥å°è£…è§£æåçš„ javaType/jdbcType ä¿¡æ¯*

### 2. è§£è€¦æ˜ å°„è§£æ

æä¾›å•ç‹¬çš„ XML æ˜ å°„æ„å»ºå™¨ XMLMapperBuilder ç±»ï¼ŒæŠŠå…³äº Mapper å†…çš„ SQL è¿›è¡Œè§£æå¤„ç†ã€‚æä¾›äº†è¿™ä¸ªç±»ä»¥åï¼Œå°±å¯ä»¥æŠŠè¿™ä¸ªç±»çš„æ“ä½œæ”¾åˆ° XML é…ç½®æ„å»ºå™¨ï¼ŒXMLConfigBuilder#mapperElement ä¸­è¿›è¡Œä½¿ç”¨äº†ã€‚å…·ä½“æˆ‘ä»¬çœ‹ä¸‹å¦‚ä¸‹ä»£ç ã€‚

**æºç è¯¦è§**ï¼š`cn.bugstack.mybatis.builder.xml.XMLMapperBuilder`

```java
public class XMLMapperBuilder extends BaseBuilder {

    /**
     * è§£æ
     */
    public void parse() throws Exception {
        // å¦‚æœå½“å‰èµ„æºæ²¡æœ‰åŠ è½½è¿‡å†åŠ è½½ï¼Œé˜²æ­¢é‡å¤åŠ è½½
        if (!configuration.isResourceLoaded(resource)) {
            configurationElement(element);
            // æ ‡è®°ä¸€ä¸‹ï¼Œå·²ç»åŠ è½½è¿‡äº†
            configuration.addLoadedResource(resource);
            // ç»‘å®šæ˜ å°„å™¨åˆ°namespace
            configuration.addMapper(Resources.classForName(currentNamespace));
        }
    }

    // é…ç½®mapperå…ƒç´ 
    // <mapper namespace="org.mybatis.example.BlogMapper">
    //   <select id="selectBlog" parameterType="int" resultType="Blog">
    //    select * from Blog where id = #{id}
    //   </select>
    // </mapper>
    private void configurationElement(Element element) {
        // 1.é…ç½®namespace
        currentNamespace = element.attributeValue("namespace");
        if (currentNamespace.equals("")) {
            throw new RuntimeException("Mapper's namespace cannot be empty");
        }

        // 2.é…ç½®select|insert|update|delete
        buildStatementFromContext(element.elements("select"));
    }

    // é…ç½®select|insert|update|delete
    private void buildStatementFromContext(List<Element> list) {
        for (Element element : list) {
            final XMLStatementBuilder statementParser = new XMLStatementBuilder(configuration, element, currentNamespace);
            statementParser.parseStatementNode();
        }
    }

}
```

åœ¨ XMLMapperBuilder#parse çš„è§£æä¸­ï¼Œä¸»è¦ä½“ç°åœ¨èµ„æºè§£æåˆ¤æ–­ã€Mapperè§£æå’Œç»‘å®šæ˜ å°„å™¨åˆ°ï¼›
- configuration.isResourceLoaded èµ„æºåˆ¤æ–­é¿å…é‡å¤è§£æï¼Œåšäº†ä¸ªè®°å½•ã€‚
- configuration.addMapper ç»‘å®šæ˜ å°„å™¨ä¸»è¦æ˜¯æŠŠ namespace `cn.bugstack.mybatis.test.dao.IUserDao` ç»‘å®šåˆ° Mapper ä¸Šã€‚ä¹Ÿå°±æ˜¯æ³¨å†Œåˆ°æ˜ å°„å™¨æ³¨å†Œæœºé‡Œã€‚
- configurationElement æ–¹æ³•è°ƒç”¨çš„ buildStatementFromContextï¼Œé‡åœ¨å¤„ç† XML è¯­å¥æ„å»ºå™¨ï¼Œä¸‹æ–‡ä¸­å•ç‹¬è®²è§£ã€‚

**é…ç½®æ„å»ºå™¨ï¼Œè°ƒç”¨æ˜ å°„æ„å»ºå™¨ï¼Œæºç è¯¦è§**ï¼š`cn.bugstack.mybatis.builder.xml.XMLMapperBuilder`

```java
public class XMLConfigBuilder extends BaseBuilder {

    /*
     * <mappers>
     *	 <mapper resource="org/mybatis/builder/AuthorMapper.xml"/>
     *	 <mapper resource="org/mybatis/builder/BlogMapper.xml"/>
     *	 <mapper resource="org/mybatis/builder/PostMapper.xml"/>
     * </mappers>
     */
    private void mapperElement(Element mappers) throws Exception {
        List<Element> mapperList = mappers.elements("mapper");
        for (Element e : mapperList) {
            String resource = e.attributeValue("resource");
            InputStream inputStream = Resources.getResourceAsStream(resource);

            // åœ¨forå¾ªç¯é‡Œæ¯ä¸ªmapperéƒ½é‡æ–°newä¸€ä¸ªXMLMapperBuilderï¼Œæ¥è§£æ
            XMLMapperBuilder mapperParser = new XMLMapperBuilder(inputStream, configuration, resource);
            mapperParser.parse();
        }
    }

}
```

- åœ¨ XMLConfigBuilder#mapperElement ä¸­ï¼ŒæŠŠåŸæ¥æµç¨‹åŒ–çš„å¤„ç†è¿›è¡Œè§£è€¦ï¼Œè°ƒç”¨ XMLMapperBuilder#parse æ–¹æ³•è¿›è¡Œè§£æå¤„ç†ã€‚

### 3. è¯­å¥æ„å»ºå™¨

XMLStatementBuilder è¯­å¥æ„å»ºå™¨ä¸»è¦è§£æ XML ä¸­ `select|insert|update|delete` ä¸­çš„è¯­å¥ï¼Œå½“å‰æˆ‘ä»¬å…ˆä»¥ select è§£æä¸ºæ¡ˆä¾‹ï¼Œåç»­å†æ‰©å±•å…¶ä»–çš„è§£ææµç¨‹ã€‚

**æºç è¯¦è§**ï¼š`cn.bugstack.mybatis.builder.xml.XMLStatementBuilder`

```java
public class XMLStatementBuilder extends BaseBuilder {

    //è§£æè¯­å¥(select|insert|update|delete)
    //<select
    //  id="selectPerson"
    //  parameterType="int"
    //  parameterMap="deprecated"
    //  resultType="hashmap"
    //  resultMap="personResultMap"
    //  flushCache="false"
    //  useCache="true"
    //  timeout="10000"
    //  fetchSize="256"
    //  statementType="PREPARED"
    //  resultSetType="FORWARD_ONLY">
    //  SELECT * FROM PERSON WHERE ID = #{id}
    //</select>
    public void parseStatementNode() {
        String id = element.attributeValue("id");
        // å‚æ•°ç±»å‹
        String parameterType = element.attributeValue("parameterType");
        Class<?> parameterTypeClass = resolveAlias(parameterType);
        // ç»“æœç±»å‹
        String resultType = element.attributeValue("resultType");
        Class<?> resultTypeClass = resolveAlias(resultType);
        // è·å–å‘½ä»¤ç±»å‹(select|insert|update|delete)
        String nodeName = element.getName();
        SqlCommandType sqlCommandType = SqlCommandType.valueOf(nodeName.toUpperCase(Locale.ENGLISH));

        // è·å–é»˜è®¤è¯­è¨€é©±åŠ¨å™¨
        Class<?> langClass = configuration.getLanguageRegistry().getDefaultDriverClass();
        LanguageDriver langDriver = configuration.getLanguageRegistry().getDriver(langClass);

        SqlSource sqlSource = langDriver.createSqlSource(configuration, element, parameterTypeClass);

        MappedStatement mappedStatement = new MappedStatement.Builder(configuration, currentNamespace + "." + id, sqlCommandType, sqlSource, resultTypeClass).build();

        // æ·»åŠ è§£æ SQL
        configuration.addMappedStatement(mappedStatement);
    }

}
```

- æ•´ä¸ªè¿™éƒ¨åˆ†å†…å®¹çš„è§£æï¼Œå°±æ˜¯ä» XMLConfigBuilder æ‹†è§£å‡ºæ¥å…³äº Mapper è¯­å¥è§£æçš„éƒ¨åˆ†ï¼Œé€šè¿‡è¿™æ ·è¿™æ ·çš„è§£è€¦è®¾è®¡ï¼Œä¼šè®©æ•´ä¸ªæµç¨‹æ›´åŠ æ¸…æ™°ã€‚
- XMLStatementBuilder#parseStatementNode æ–¹æ³•æ˜¯è§£æ SQL è¯­å¥èŠ‚ç‚¹çš„è¿‡ç¨‹ï¼ŒåŒ…æ‹¬äº†è¯­å¥çš„IDã€å‚æ•°ç±»å‹ã€ç»“æœç±»å‹ã€å‘½ä»¤(`select|insert|update|delete`)ï¼Œä»¥åŠä½¿ç”¨è¯­è¨€é©±åŠ¨å™¨å¤„ç†å’Œå°è£…SQLä¿¡æ¯ï¼Œå½“è§£æå®Œæˆåå†™å…¥åˆ° Configuration é…ç½®æ–‡ä»¶ä¸­çš„ `Map<String, MappedStatement>` æ˜ å°„è¯­å¥å­˜æ”¾ä¸­ã€‚

### 4. è„šæœ¬è¯­è¨€é©±åŠ¨

åœ¨ XMLStatementBuilder#parseStatementNode è¯­å¥æ„å»ºå™¨çš„è§£æä¸­ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¹ˆä¸€å—ï¼Œè·å–é»˜è®¤è¯­è¨€é©±åŠ¨å™¨å¹¶è§£æSQLçš„æ“ä½œã€‚å…¶å®è¿™éƒ¨åˆ†å°±æ˜¯ XML è„šæ­¥è¯­è¨€é©±åŠ¨å™¨æ‰€å®ç°çš„åŠŸèƒ½ï¼Œåœ¨ XMLScriptBuilder ä¸­å¤„ç†é™æ€SQLå’ŒåŠ¨æ€SQLï¼Œä¸è¿‡ç›®å‰æˆ‘ä»¬åªæ˜¯å®ç°äº†å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œå¾…åç»­è¿™éƒ¨åˆ†æ¡†æ¶éƒ½å®Œå–„ååœ¨è¿›è¡Œæ‰©å±•ï¼Œé¿å…ä¸€æ¬¡å¼•å…¥è¿‡å¤šçš„ä»£ç ã€‚

#### 4.1 å®šä¹‰æ¥å£

**æºç è¯¦è§**ï¼š`cn.bugstack.mybatis.scripting.LanguageDriver`

```java
public interface LanguageDriver {

    SqlSource createSqlSource(Configuration configuration, Element script, Class<?> parameterType);

}
```

- å®šä¹‰è„šæœ¬è¯­è¨€é©±åŠ¨æ¥å£ï¼Œæä¾›åˆ›å»º SQL ä¿¡æ¯çš„æ–¹æ³•ï¼Œå…¥å‚åŒ…æ‹¬äº†é…ç½®ã€å…ƒç´ ã€å‚æ•°ã€‚å…¶å®å®ƒçš„å®ç°ç±»ä¸€å…±æœ‰3ä¸ªï¼›`XMLLanguageDriver`ã€`RawLanguageDriver`ã€`VelocityLanguageDriver`ï¼Œè¿™é‡Œæˆ‘ä»¬åªæ˜¯å®ç°äº†é»˜è®¤çš„ç¬¬ä¸€ä¸ªå³å¯ã€‚

#### 4.2 XMLè¯­è¨€é©±åŠ¨å™¨å®ç°

**æºç è¯¦è§**ï¼š`cn.bugstack.mybatis.scripting.xmltags.XMLLanguageDriver`

```java
public class XMLLanguageDriver implements LanguageDriver {

    @Override
    public SqlSource createSqlSource(Configuration configuration, Element script, Class<?> parameterType) {
        XMLScriptBuilder builder = new XMLScriptBuilder(configuration, script, parameterType);
        return builder.parseScriptNode();
    }

}
```

- å…³äº XML è¯­è¨€é©±åŠ¨å™¨çš„å®ç°æ¯”è¾ƒç®€å•ï¼Œåªæ˜¯å°è£…äº†å¯¹ XMLScriptBuilder çš„è°ƒç”¨å¤„ç†ã€‚

#### 4.3 XMLè„šæœ¬æ„å»ºå™¨è§£æ

**æºç è¯¦è§**ï¼š`cn.bugstack.mybatis.scripting.xmltags.XMLScriptBuilder`

```java
public class XMLScriptBuilder extends BaseBuilder {

    public SqlSource parseScriptNode() {
        List<SqlNode> contents = parseDynamicTags(element);
        MixedSqlNode rootSqlNode = new MixedSqlNode(contents);
        return new RawSqlSource(configuration, rootSqlNode, parameterType);
    }

    List<SqlNode> parseDynamicTags(Element element) {
        List<SqlNode> contents = new ArrayList<>();
        // element.getText æ‹¿åˆ° SQL
        String data = element.getText();
        contents.add(new StaticTextSqlNode(data));
        return contents;
    }

}
```

- XMLScriptBuilder#parseScriptNode è§£æSQLèŠ‚ç‚¹çš„å¤„ç†å…¶å®æ²¡æœ‰å¤ªå¤šå¤æ‚çš„å†…å®¹ï¼Œä¸»è¦æ˜¯å¯¹ RawSqlSource çš„åŒ…è£…å¤„ç†ã€‚*å…¶ä»–å°ç»†èŠ‚å¯ä»¥é˜…è¯»æºç è¿›è¡Œå­¦ä¹ *

#### 4.4 SQLæºç æ„å»ºå™¨

**æºç è¯¦è§**ï¼š`cn.bugstack.mybatis.builder.SqlSourceBuilder`

```java
public class SqlSourceBuilder extends BaseBuilder {

    private static final String parameterProperties = "javaType,jdbcType,mode,numericScale,resultMap,typeHandler,jdbcTypeName";

    public SqlSourceBuilder(Configuration configuration) {
        super(configuration);
    }

    public SqlSource parse(String originalSql, Class<?> parameterType, Map<String, Object> additionalParameters) {
        ParameterMappingTokenHandler handler = new ParameterMappingTokenHandler(configuration, parameterType, additionalParameters);
        GenericTokenParser parser = new GenericTokenParser("#{", "}", handler);
        String sql = parser.parse(originalSql);
        // è¿”å›é™æ€ SQL
        return new StaticSqlSource(configuration, sql, handler.getParameterMappings());
    }

    private static class ParameterMappingTokenHandler extends BaseBuilder implements TokenHandler {
       
        @Override
        public String handleToken(String content) {
            parameterMappings.add(buildParameterMapping(content));
            return "?";
        }

        // æ„å»ºå‚æ•°æ˜ å°„
        private ParameterMapping buildParameterMapping(String content) {
            // å…ˆè§£æå‚æ•°æ˜ å°„,å°±æ˜¯è½¬åŒ–æˆä¸€ä¸ª HashMap | #{favouriteSection,jdbcType=VARCHAR}
            Map<String, String> propertiesMap = new ParameterExpression(content);
            String property = propertiesMap.get("property");
            Class<?> propertyType = parameterType;
            ParameterMapping.Builder builder = new ParameterMapping.Builder(configuration, property, propertyType);
            return builder.build();
        }

    }
    
}
```

- å…³äºä»¥ä¸Šæ–‡ä¸­æåˆ°çš„ï¼Œå…³äº BoundSql.parameterMappings çš„å‚æ•°å°±æ˜¯æ¥è‡ªäº ParameterMappingTokenHandler#buildParameterMapping æ–¹æ³•è¿›è¡Œæ„å»ºå¤„ç†çš„ã€‚
- å…·ä½“çš„ javaTypeã€jdbcType ä¼šä½“ç°åˆ° ParameterExpression å‚æ•°è¡¨è¾¾å¼ä¸­å®Œæˆè§£ææ“ä½œã€‚*è¿™ä¸ªè§£æè¿‡ç¨‹ç›´æ¥æ˜¯ Mybatis è‡ªå·±çš„æºç ï¼Œæ•´ä¸ªè¿‡ç¨‹åŠŸèƒ½è¾ƒå•ä¸€ï¼Œç›´æ¥å¯¹ç…§å­¦ä¹ å³å¯*

### 5. DefaultSqlSession è°ƒç”¨è°ƒæ•´

å› ä¸ºä»¥ä¸Šæ•´ä¸ªè®¾è®¡å’Œå®ç°ï¼Œè°ƒæ•´äº†è§£æè¿‡ç¨‹ï¼Œä»¥åŠç»†åŒ–äº† SQL çš„åˆ›å»ºã€‚é‚£ä¹ˆåœ¨ MappedStatement æ˜ å°„è¯­å¥ä¸­ï¼Œåˆ™ä½¿ç”¨ SqlSource æ›¿æ¢äº† BoundSqlï¼Œæ‰€ä»¥åœ¨ DefaultSqlSession ä¸­ä¹Ÿä¼šæœ‰ç›¸åº”çš„è°ƒæ•´ã€‚

**æºç è¯¦è§**ï¼š`cn.bugstack.mybatis.session.defaults.DefaultSqlSession`

```java
public class DefaultSqlSession implements SqlSession {

    private Configuration configuration;
    private Executor executor;

    @Override
    public <T> T selectOne(String statement, Object parameter) {
        MappedStatement ms = configuration.getMappedStatement(statement);
        List<T> list = executor.query(ms, parameter, Executor.NO_RESULT_HANDLER, ms.getSqlSource().getBoundSql(parameter));
        return list.get(0);
    }

}
```

- è¿™é‡Œçš„ä½¿ç”¨è°ƒæ•´ä¹Ÿä¸å¤§ï¼Œä¸»è¦ä½“ç°åœ¨è·å–SQLçš„æ“ä½œï¼›`ms.getSqlSource().getBoundSql(parameter)` è¿™æ ·è·å–åï¼Œåé¢çš„æµç¨‹å°±æ²¡æœ‰å¤šå°‘å˜åŒ–äº†ã€‚*åœ¨æˆ‘ä»¬æ•´ä¸ªè§£ææ¡†æ¶é€æ­¥å®Œå–„åï¼Œå°±ä¼šå¼€å§‹å¯¹å„ä¸ªå­—æ®µçš„å±æ€§ä¿¡æ¯æ·»åŠ è¿›è¡Œè®¾ç½®æ“ä½œã€‚*

## äº”ã€æµ‹è¯•

### 1. äº‹å…ˆå‡†å¤‡

#### 1.1 åˆ›å»ºåº“è¡¨

åˆ›å»ºä¸€ä¸ªæ•°æ®åº“åç§°ä¸º mybatis å¹¶åœ¨åº“ä¸­åˆ›å»ºè¡¨ user ä»¥åŠæ·»åŠ æµ‹è¯•æ•°æ®ï¼Œå¦‚ä¸‹ï¼š

```sql
CREATE TABLE
    USER
    (
        id bigint NOT NULL AUTO_INCREMENT COMMENT 'è‡ªå¢ID',
        userId VARCHAR(9) COMMENT 'ç”¨æˆ·ID',
        userHead VARCHAR(16) COMMENT 'ç”¨æˆ·å¤´åƒ',
        createTime TIMESTAMP NULL COMMENT 'åˆ›å»ºæ—¶é—´',
        updateTime TIMESTAMP NULL COMMENT 'æ›´æ–°æ—¶é—´',
        userName VARCHAR(64),
        PRIMARY KEY (id)
    )
    ENGINE=InnoDB DEFAULT CHARSET=utf8;
    
insert into user (id, userId, userHead, createTime, updateTime, userName) values (1, '10001', '1_04', '2022-04-13 00:00:00', '2022-04-13 00:00:00', 'å°å‚…å“¥');    
```

#### 1.2 é…ç½®æ•°æ®æº

```xml
<environments default="development">
    <environment id="development">
        <transactionManager type="JDBC"/>
        <dataSource type="POOLED">
            <property name="driver" value="com.mysql.jdbc.Driver"/>
            <property name="url" value="jdbc:mysql://127.0.0.1:3306/mybatis?useUnicode=true"/>
            <property name="username" value="root"/>
            <property name="password" value="123456"/>
        </dataSource>
    </environment>
</environments>
```

- é€šè¿‡ `mybatis-config-datasource.xml` é…ç½®æ•°æ®æºä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼šdriverã€urlã€usernameã€password
- åœ¨è¿™é‡Œ dataSource å¯ä»¥æŒ‰éœ€é…ç½®æˆ DRUIDã€UNPOOLED å’Œ POOLED è¿›è¡Œæµ‹è¯•éªŒè¯ã€‚

#### 1.3 é…ç½®Mapper

```xml
<select id="queryUserInfoById" parameterType="java.lang.Long" resultType="cn.bugstack.mybatis.test.po.User">
    SELECT id, userId, userName, userHead
    FROM user
    where id = #{id}
</select>
```

- è¿™éƒ¨åˆ†æš‚æ—¶ä¸éœ€è¦è°ƒæ•´ï¼Œç›®å‰è¿˜åªæ˜¯ä¸€ä¸ªå…¥å‚çš„ç±»å‹çš„å‚æ•°ï¼Œåç»­æˆ‘ä»¬å…¨éƒ¨å®Œå–„è¿™éƒ¨åˆ†å†…å®¹ä»¥åï¼Œåˆ™å†æä¾›æ›´å¤šçš„å…¶ä»–å‚æ•°è¿›è¡ŒéªŒè¯ã€‚

### 2. å•å…ƒæµ‹è¯•

```java
@Test
public void test_SqlSessionFactory() throws IOException {
    // 1. ä»SqlSessionFactoryä¸­è·å–SqlSession
    SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(Resources.getResourceAsReader("mybatis-config-datasource.xml"));
    SqlSession sqlSession = sqlSessionFactory.openSession();
   
    // 2. è·å–æ˜ å°„å™¨å¯¹è±¡
    IUserDao userDao = sqlSession.getMapper(IUserDao.class);
    
    // 3. æµ‹è¯•éªŒè¯
    User user = userDao.queryUserInfoById(1L);
    logger.info("æµ‹è¯•ç»“æœï¼š{}", JSON.toJSONString(user));
}
```

- è¿™é‡Œçš„æµ‹è¯•ä¸éœ€è¦è°ƒæ•´ï¼Œå› ä¸ºæˆ‘ä»¬æœ¬ç« èŠ‚çš„å¼€å‘å†…å®¹ï¼Œä¸»è¦ä»¥è§£è€¦ XML çš„è§£æï¼Œåªè¦èƒ½ä¿æŒå’Œä¹‹å‰ç« èŠ‚ä¸€æ ·ï¼Œæ­£å¸¸è¾“å‡ºç»“æœå°±å¯ä»¥ã€‚

**æµ‹è¯•ç»“æœ**

![](https://bugstack.cn/images/article/spring/mybatis-220519-04.png)

```java
07:26:15.049 [main] INFO  c.b.m.d.pooled.PooledDataSource - Created connection 1138410383.
07:26:15.192 [main] INFO  cn.bugstack.mybatis.test.ApiTest - æµ‹è¯•ç»“æœï¼š{"id":1,"userHead":"1_04","userId":"10001","userName":"å°å‚…å“¥"}
Disconnected from the target VM, address: '127.0.0.1:54797', transport: 'socket'

Process finished with exit code 0
```

- ä»æµ‹è¯•ç»“æœå’Œè°ƒè¯•çš„æˆªå›¾å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„ XML è§£æå¤„ç†æ‹†è§£åï¼Œå·²ç»å¯ä»¥é¡ºåˆ©çš„æ”¯æ’‘æˆ‘ä»¬çš„ä½¿ç”¨ã€‚

## å…­ã€æ€»ç»“

- æœ¬ç« èŠ‚æˆ‘ä»¬å°±åƒæ˜¯å»æŠŠåŸæœ¬ CRUD çš„ä»£ç ï¼Œé€šè¿‡è®¾è®¡åŸåˆ™è¿›è¡Œæ‹†åˆ†å’Œè§£è€¦ï¼Œè¿ç”¨ä¸ç”¨çš„ç±»æ¥æ‰¿æ‹…ä¸åŒçš„èŒè´£ï¼Œå®Œæ•´æ•´ä¸ªåŠŸèƒ½çš„å®ç°ã€‚è¿™åŒ…æ‹¬ï¼›æ˜ å°„æ„å»ºå™¨ã€è¯­å¥æ„å»ºå™¨ã€æºç æ„å»ºå™¨çš„ç»¼åˆä½¿ç”¨ï¼Œä»¥åŠå¯¹åº”çš„å¼•ç”¨ï¼›è„šæœ¬è¯­è¨€é©±åŠ¨å’Œè„šæœ¬æ„å»ºå™¨è§£æï¼Œå¤„ç†æˆ‘ä»¬çš„ XML ä¸­çš„ SQL è¯­å¥ã€‚
- é€šè¿‡è¿™æ ·çš„é‡æ„ä»£ç ï¼Œä¹Ÿèƒ½è®©æˆ‘ä»¬å¯¹å¹³å¸¸çš„ä¸šåŠ¡å¼€å‘ä¸­çš„å¤§ç‰‡é¢å‘è¿‡ç¨‹çš„æµç¨‹ä»£ç æœ‰æ‰€æ„Ÿæ‚Ÿï¼Œå½“ä½ å¯ä»¥ç»†åˆ†æ‹†è§£èŒè´£åŠŸèƒ½åˆ°ä¸åŒçš„ç±»ä¸­å»ä»¥åï¼Œä½ çš„ä»£ç ä¼šæ›´åŠ çš„æ¸…æ™°å¹¶æ˜“äºç»´æŠ¤ã€‚
- åç»­æˆ‘ä»¬å°†ç»§ç»­æŒ‰ç…§ç°åœ¨çš„æ‰©å±•ç»“æ„åº•åº§ï¼Œå®Œæˆå…¶ä»–æ¨¡å—çš„åŠŸèƒ½é€»è¾‘å¼€å‘ï¼Œå› ä¸ºäº†è¿™äº›åŸºç¡€å†…å®¹çš„å»ºé€ ï¼Œå†ç»§ç»­è¡¥å……åŠŸèƒ½ä¹Ÿä¼šæ›´åŠ å®¹æ˜“ã€‚*å½“ç„¶è¿™äº›ä»£ç è¿˜æ˜¯éœ€è¦ä½ ç†Ÿæ‚‰ä»¥åæ‰èƒ½é©¾é©­ï¼Œåœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­å¯ä»¥å°è¯•æ–­ç‚¹è°ƒè¯•ï¼Œçœ‹çœ‹æ¯ä¸€ä¸ªæ­¥éª¤éƒ½åœ¨å®Œæˆå“ªäº›å·¥ä½œã€‚*

## ä¸ƒã€ä¼˜ç§€ä½œä¸š

- [å¼•å…¥æ˜ å°„æ„å»ºå™¨XMLMapperBuilderå’Œè¯­å¥æ˜ å°„å™¨XMLStatementBuilderç»†åŒ–XMLè¯­å¥æ„å»ºå™¨ã€‚@æ¨æ¨å¾—äº¿ğŸ™‰](https://t.zsxq.com/06ZFQF2zb)