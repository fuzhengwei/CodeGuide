---
layout: post
category: interview
title: é¢ç»æ‰‹å†Œ Â· ç¬¬24ç¯‡ã€Šä¸ºäº†ææ¸…æ¥šç±»åŠ è½½ï¼Œç«Ÿç„¶æ‰‹æ’¸JVMï¼ã€‹
tagline: by å°å‚…å“¥
tag: [java,interview]
excerpt: å½“å­¦ä¹ ä¸€ä¸ªæ–°çŸ¥è¯†ä¸çŸ¥é“ä»å“ªä¸‹æ‰‹çš„æ—¶å€™ï¼Œæœ€æœ‰æ•ˆçš„åŠæ³•æ˜¯æ¢³ç†è¿™ä¸ªçŸ¥è¯†ç»“æ„çš„è„‰ç»œä¿¡æ¯ã€‚å°±åƒJVMçš„å­¦ä¹ ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªåºå¤§çš„çŸ¥è¯†ä½“ç³»ã€‚ä¾‹å¦‚ï¼šç±»åŠ è½½ã€åŠ è½½å™¨ã€ç”Ÿå‘½å‘¨æœŸã€æ€§èƒ½ä¼˜åŒ–ã€è°ƒä¼˜å‚æ•°ã€è°ƒä¼˜å·¥å…·ã€ä¼˜åŒ–æ–¹æ¡ˆã€å†…å­˜åŒºåŸŸã€è™šæ‹Ÿæœºæ ˆã€ç›´æ¥å†…å­˜ã€å†…å­˜æº¢å‡ºã€å…ƒç©ºé—´ã€åƒåœ¾å›æ”¶ã€å¯è¾¾æ€§åˆ†æã€æ ‡è®°æ¸…é™¤ã€å›æ”¶è¿‡ç¨‹ç­‰ç­‰ã€‚
lock: need
---

# é¢ç»æ‰‹å†Œ Â· ç¬¬24ç¯‡ã€Šä¸ºäº†ææ¸…æ¥šç±»åŠ è½½ï¼Œç«Ÿç„¶æ‰‹æ’¸JVMï¼ã€‹

ä½œè€…ï¼šå°å‚…å“¥
<br/>åšå®¢ï¼š[https://bugstack.cn](https://bugstack.cn)

>æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„

## ä¸€ã€å‰è¨€

`å­¦ä¹ ï¼Œä¸çŸ¥é“ä»å“ªä¸‹æ‰‹ï¼Ÿ`

å½“å­¦ä¹ ä¸€ä¸ªæ–°çŸ¥è¯†ä¸çŸ¥é“ä»å“ªä¸‹æ‰‹çš„æ—¶å€™ï¼Œæœ€æœ‰æ•ˆçš„åŠæ³•æ˜¯æ¢³ç†è¿™ä¸ªçŸ¥è¯†ç»“æ„çš„è„‰ç»œä¿¡æ¯ï¼Œæ±‡æ€»å‡ºä¸€æ•´å¼ çš„æ€ç»´å¯¼å‡ºã€‚æ¥ä¸‹æ¥å°±æ˜¯æŒ‰ç…§æ€ç»´å¯¼å›¾çš„çŸ¥è¯†ç»“æ„ï¼Œä¸€ä¸ªä¸ªå­¦ä¹ ç›¸åº”çš„çŸ¥è¯†ç‚¹ï¼Œå¹¶æ±‡æ€»è®°å½•ã€‚

å°±åƒJVMçš„å­¦ä¹ ï¼Œå¯ä»¥è¯´å®ƒåŒ…æ‹¬äº†éå¸¸å¤šçš„å†…å®¹ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªåºå¤§çš„çŸ¥è¯†ä½“ç³»ã€‚ä¾‹å¦‚ï¼š`ç±»åŠ è½½`ã€`åŠ è½½å™¨`ã€`ç”Ÿå‘½å‘¨æœŸ`ã€`æ€§èƒ½ä¼˜åŒ–`ã€`è°ƒä¼˜å‚æ•°`ã€`è°ƒä¼˜å·¥å…·`ã€`ä¼˜åŒ–æ–¹æ¡ˆ`ã€`å†…å­˜åŒºåŸŸ`ã€`è™šæ‹Ÿæœºæ ˆ`ã€`ç›´æ¥å†…å­˜`ã€`å†…å­˜æº¢å‡º`ã€`å…ƒç©ºé—´`ã€`åƒåœ¾å›æ”¶`ã€`å¯è¾¾æ€§åˆ†æ`ã€`æ ‡è®°æ¸…é™¤`ã€`å›æ”¶è¿‡ç¨‹`ç­‰ç­‰ã€‚å¦‚æœæ²¡æœ‰æ¢³ç†çš„ä¸€å¤´æ‰è¿›å»ï¼Œä¸œä¸€æ¦”å¤´è¥¿ä¸€æ£’å­ï¼Œå¾ˆå®¹æ˜“é€ æˆå­¦ä¹ ææƒ§æ„Ÿã€‚

å¦‚å›¾ 24-1 æ˜¯ JVM çŸ¥è¯†æ¡†æ¶æ¢³ç†ï¼Œåç»­æˆ‘ä»¬ä¼šæŒ‰ç…§è¿™ä¸ªç»“æ„é™†ç»­è®²è§£æ¯ä¸€å—å†…å®¹ã€‚

![å›¾ 24-1 JVM çŸ¥è¯†æ¡†æ¶](https://bugstack.cn/assets/images/2020/interview/interview-24-1.png)

## äºŒã€é¢è¯•é¢˜

`è°¢é£æœºï¼Œå°è®°ï¼`ï¼Œå¾ˆå¤šçŸ¥è¯†æ ¹æœ¬å°±æ˜¯èƒŒèƒŒèƒŒï¼Œä¹Ÿæ²¡æ³•æ“ä½œï¼Œéš¾å­¦ï¼

**è°¢é£æœº**ï¼šå¤§å“¥ï¼Œä½ é—®æˆ‘ä¸¤ä¸ªJVMé—®é¢˜ï¼Œæˆ‘çœ‹çœ‹æˆ‘è‡ªå·±è¿˜è¡Œä¸ï¼

**é¢è¯•å®˜**ï¼šå•Šï¼Ÿå—¯ï¼å¾€æ­»äº†é—®è¿˜æ˜¯ï¼Ÿ

**è°¢é£æœº**ï¼šå°±å°±å°±ï¼Œéƒ½è¡Œï¼ä½ çœ‹ç€æ¥ï¼

**é¢è¯•å®˜**ï¼šå•Šï¼Œé‚£ JVM åŠ è½½è¿‡ç¨‹éƒ½æ˜¯ä»€ä¹ˆæ­¥éª¤ï¼Ÿ

**è°¢é£æœº**ï¼šå·´æ‹‰å·´æ‹‰ï¼ŒåŠ è½½ã€éªŒè¯ã€å‡†å¤‡ã€è§£æã€åˆå§‹åŒ–ã€ä½¿ç”¨ã€å¸è½½ï¼

**é¢è¯•å®˜**ï¼šå—¯ï¼ŒèƒŒçš„æŒºå¥½ï¼*æˆ‘æ€€ç–‘ä½ æ²¡æ“ä½œè¿‡ï¼* é‚£åŠ è½½çš„æ—¶å€™ï¼ŒJVM è§„èŒƒè§„å®šä»ç¬¬å‡ ä½å¼€å§‹æ˜¯è§£æå¸¸é‡æ± ï¼Œä»¥åŠæ•°æ®ç±»å‹æ˜¯å¦‚ä½•å®šä¹‰çš„ï¼Œu1ã€u2ã€u4ï¼Œæ˜¯æ€ä¹ˆä¸ªç©æ„ï¼Ÿ

**è°¢é£æœº**ï¼šæ¡è‰ï¼ç®—äº†ï¼Œå‘Šè¯‰æˆ‘çœ‹å•¥å§ï¼

## ä¸‰ã€ç±»åŠ è½½è¿‡ç¨‹æè¿°

![å›¾ 24-2 JVM ç±»åŠ è½½è¿‡ç¨‹](https://bugstack.cn/assets/images/2020/interview/interview-24-2.png)

**JVM ç±»åŠ è½½è¿‡ç¨‹åˆ†ä¸º**ï¼Œ`åŠ è½½`ã€`é“¾æ¥`ã€`åˆå§‹åŒ–`ã€`ä½¿ç”¨`å’Œ`å¸è½½`è¿™å››ä¸ªé˜¶æ®µï¼Œåœ¨é“¾æ¥ä¸­åˆåŒ…æ‹¬ï¼š`éªŒè¯`ã€`å‡†å¤‡`ã€`è§£æ`ã€‚

- **åŠ è½½**ï¼šJava è™šæ‹Ÿæœºè§„èŒƒå¯¹ class æ–‡ä»¶æ ¼å¼è¿›è¡Œäº†ä¸¥æ ¼çš„è§„åˆ™ï¼Œä½†å¯¹äºä»å“ªé‡ŒåŠ è½½ class æ–‡ä»¶ï¼Œå´éå¸¸è‡ªç”±ã€‚Java è™šæ‹Ÿæœºå®ç°å¯ä»¥ä»æ–‡ä»¶ç³»ç»Ÿè¯»å–ã€ä»JAR(æˆ–ZIP)å‹ç¼©åŒ…ä¸­æå– class æ–‡ä»¶ã€‚é™¤æ­¤ä¹‹å¤–ä¹Ÿå¯ä»¥é€šè¿‡ç½‘ç»œä¸‹è½½ã€æ•°æ®åº“åŠ è½½ï¼Œç”šè‡³æ˜¯è¿è¡Œæ—¶ç›´æ¥ç”Ÿæˆçš„ class æ–‡ä»¶ã€‚
- **é“¾æ¥**ï¼šåŒ…æ‹¬äº†ä¸‰ä¸ªé˜¶æ®µï¼›
  - éªŒè¯ï¼Œç¡®ä¿è¢«åŠ è½½ç±»çš„æ­£ç¡®æ€§ï¼ŒéªŒè¯å­—èŠ‚æµæ˜¯å¦ç¬¦åˆ class æ–‡ä»¶è§„èŒƒï¼Œä¾‹é­”æ•° 0xCAFEBABEï¼Œä»¥åŠç‰ˆæœ¬å·ç­‰ã€‚
  - å‡†å¤‡ï¼Œä¸ºç±»çš„é™æ€å˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®å˜é‡åˆå§‹å€¼ç­‰
  - è§£æï¼Œè§£æåŒ…æ‹¬è§£æå‡ºå¸¸é‡æ± æ•°æ®å’Œå±æ€§è¡¨ä¿¡æ¯ï¼Œè¿™é‡Œä¼šåŒ…æ‹¬ ConstantPool ç»“æ„ä½“ä»¥åŠ AttributeInfo æ¥å£ç­‰ã€‚
- **åˆå§‹åŒ–**ï¼šç±»åŠ è½½å®Œæˆçš„æœ€åä¸€æ­¥å°±æ˜¯åˆå§‹åŒ–ï¼Œç›®çš„å°±æ˜¯ä¸ºæ ‡è®°å¸¸é‡å€¼çš„å­—æ®µèµ‹å€¼ï¼Œä»¥åŠæ‰§è¡Œ `<clinit>` æ–¹æ³•çš„è¿‡ç¨‹ã€‚*JVMè™šæ‹Ÿæœºé€šè¿‡é”çš„æ–¹å¼ç¡®ä¿ clinit ä»…è¢«æ‰§è¡Œä¸€æ¬¡*
- **ä½¿ç”¨**ï¼šç¨‹åºä»£ç æ‰§è¡Œä½¿ç”¨é˜¶æ®µã€‚
- **å¸è½½**ï¼šç¨‹åºä»£ç é€€å‡ºã€å¼‚å¸¸ã€ç»“æŸç­‰ã€‚

## å››ã€å†™ä¸ªä»£ç åŠ è½½ä¸‹

JVM ä¹‹æ‰€ä»¥ä¸å¥½æŒæ¡ï¼Œä¸»è¦æ˜¯å› ä¸ºä¸å¥½å®æ“ã€‚è™šæ‹Ÿæœºæ˜¯ C++ å†™çš„ï¼Œå¾ˆå¤š Java ç¨‹åºå‘˜æ ¹æœ¬å°±ä¸ä¼šå»è¯»ï¼Œæˆ–è€…è¯»ä¸æ‡‚ã€‚é‚£ä¹ˆï¼Œä¹Ÿå°±æ²¡åŠæ³•å®å®åœ¨åœ¨çš„ä½“ä¼šåˆ°ï¼Œåˆ°åº•æ˜¯æ€ä¹ˆåŠ è½½çš„ï¼ŒåŠ è½½çš„æ—¶å€™éƒ½å¹²äº†å•¥ã€‚*åªæœ‰çœ‹åˆ°ä»£ç ï¼Œæˆ‘æ‰è§‰å¾—è‡ªå·±å­¦ä¼šäº†ï¼*

æ‰€ä»¥ï¼Œæˆ‘ä»¬è¿™é‡Œè¦æ‰‹åŠ¨å†™ä¸€ä¸‹ï¼ŒJVM è™šæ‹Ÿæœºçš„éƒ¨åˆ†ä»£ç ï¼Œä¹Ÿå°±æ˜¯ç±»åŠ è½½çš„è¿‡ç¨‹ã€‚é€šè¿‡ Java ä»£ç æ¥å®ç° Java è™šæ‹Ÿæœºçš„éƒ¨åˆ†åŠŸèƒ½ï¼Œè®©å¼€å‘ Java ä»£ç çš„ç¨‹åºå‘˜æ›´å®¹æ˜“ç†è§£è™šæ‹Ÿæœºçš„æ‰§è¡Œè¿‡ç¨‹ã€‚

### 1. æ¡ˆä¾‹å·¥ç¨‹

```java
interview-24
â”œâ”€â”€ pom.xml
â””â”€â”€ src
    â””â”€â”€ main
    â”‚    â””â”€â”€ java
    â”‚        â””â”€â”€ org.itstack.interview.jvm
    â”‚             â”œâ”€â”€ classpath
    â”‚             â”‚   â”œâ”€â”€ impl
    â”‚             â”‚   â”‚   â”œâ”€â”€ CompositeEntry.java
    â”‚             â”‚   â”‚   â”œâ”€â”€ DirEntry.java 
    â”‚             â”‚   â”‚   â”œâ”€â”€ WildcardEntry.java 
    â”‚             â”‚   â”‚   â””â”€â”€ ZipEntry.java    
    â”‚             â”‚   â”œâ”€â”€ Classpath.java
    â”‚             â”‚   â””â”€â”€ Entry.java    
    â”‚             â”œâ”€â”€ Cmd.java
    â”‚             â””â”€â”€ Main.java
    â””â”€â”€ test
         â””â”€â”€ java
             â””â”€â”€ org.itstack.interview.jvm.test
                 â””â”€â”€ HelloWorld.java
```

**ä»¥ä¸Š**ï¼Œå·¥ç¨‹ç»“æ„å°±æ˜¯æŒ‰ç…§ JVM è™šæ‹Ÿæœºè§„èŒƒï¼Œä½¿ç”¨ Java ä»£ç å®ç° JVM ä¸­åŠ è½½ class æ–‡ä»¶éƒ¨åˆ†å†…å®¹ã€‚å½“ç„¶è¿™éƒ¨åˆ†è¿˜ä¸åŒ…æ‹¬è§£æï¼Œå› ä¸ºè§£æéƒ¨åˆ†çš„ä»£ç éå¸¸åºå¤§ï¼Œæˆ‘ä»¬å…ˆä»æŠŠ .class æ–‡ä»¶åŠ è½½è¯»å–å¼€å§‹äº†è§£ã€‚

### 2. ä»£ç è®²è§£

#### 2.1 å®šä¹‰ç±»è·¯å¾„æ¥å£(Entry)

```java
public interface Entry {

    byte[] readClass(String className) throws IOException;
    
    static Entry create(String path) {
        //File.pathSeparatorï¼›è·¯å¾„åˆ†éš”ç¬¦(win\linux)
        if (path.contains(File.pathSeparator)) {
            return new CompositeEntry(path);
        }
        if (path.endsWith("*")) {
            return new WildcardEntry(path);
        }
        if (path.endsWith(".jar") || path.endsWith(".JAR") ||
                path.endsWith(".zip") || path.endsWith(".ZIP")) {
            return new ZipEntry(path);
        }
        return new DirEntry(path);
    }
}
```

- æ¥å£ä¸­æä¾›äº†æ¥å£æ–¹æ³• `readClass` å’Œé™æ€æ–¹æ³• `create(String path)`ã€‚
- jdk1.8 æ˜¯å¯ä»¥åœ¨æ¥å£ä¸­ç¼–å†™é™æ€æ–¹æ³•çš„ï¼Œåœ¨è®¾è®¡ä¸Šå±äºè¡¥å…¨äº†æŠ½è±¡ç±»çš„ç±»ä¼¼åŠŸèƒ½ã€‚è¿™ä¸ªé™æ€æ–¹æ³•ä¸»è¦æ˜¯æŒ‰ç…§ä¸åŒçš„è·¯å¾„åœ°å€ç±»å‹ï¼Œæä¾›ä¸åŒçš„è§£ææ–¹æ³•ã€‚åŒ…æ‹¬ï¼šCompositeEntryã€WildcardEntryã€ZipEntryã€DirEntryï¼Œè¿™å››ç§ã€‚*æ¥ä¸‹æ¥åˆ†åˆ«çœ‹æ¯ä¸€ç§çš„å…·ä½“å®ç°*

#### 2.2 ç›®å½•å½¢å¼è·¯å¾„(DirEntry)

```java
public class DirEntry implements Entry {

    private Path absolutePath;

    public DirEntry(String path){
        //è·å–ç»å¯¹è·¯å¾„
        this.absolutePath = Paths.get(path).toAbsolutePath();
    }

    @Override
    public byte[] readClass(String className) throws IOException {
        return Files.readAllBytes(absolutePath.resolve(className));
    }

    @Override
    public String toString() {
        return this.absolutePath.toString();
    }
}
```

- ç›®å½•å½¢å¼çš„é€šè¿‡è¯»å–ç»å¯¹è·¯å¾„ä¸‹çš„æ–‡ä»¶ï¼Œé€šè¿‡ `Files.readAllBytes` æ–¹å¼è·å–å­—èŠ‚ç ã€‚

#### 2.3 å‹ç¼©åŒ…å½¢å¼è·¯å¾„(ZipEntry)

```java
public class ZipEntry implements Entry {

    private Path absolutePath;

    public ZipEntry(String path) {
        //è·å–ç»å¯¹è·¯å¾„
        this.absolutePath = Paths.get(path).toAbsolutePath();
    }

    @Override
    public byte[] readClass(String className) throws IOException {
        try (FileSystem zipFs = FileSystems.newFileSystem(absolutePath, null)) {
            return Files.readAllBytes(zipFs.getPath(className));
        }
    }

    @Override
    public String toString() {
        return this.absolutePath.toString();
    }

}
```

- å…¶å®å‹ç¼©åŒ…å½¢å¼ä¸ç›®å½•å½¢å¼ï¼Œåªæœ‰åœ¨æ–‡ä»¶è¯»å–ä¸Šæœ‰åŒ…è£…å·®åˆ«è€Œå·²ã€‚`FileSystems.newFileSystem`

#### 2.4 æ··åˆå½¢å¼è·¯å¾„(CompositeEntry)

```java
public class CompositeEntry implements Entry {

    private final List<Entry> entryList = new ArrayList<>();

    public CompositeEntry(String pathList) {
        String[] paths = pathList.split(File.pathSeparator);
        for (String path : paths) {
            entryList.add(Entry.create(path));
        }
    }

    @Override
    public byte[] readClass(String className) throws IOException {
        for (Entry entry : entryList) {
            try {
                return entry.readClass(className);
            } catch (Exception ignored) {
                //ignored
            }
        }
        throw new IOException("class not found " + className);
    }


    @Override
    public String toString() {
        String[] strs = new String[entryList.size()];
        for (int i = 0; i < entryList.size(); i++) {
            strs[i] = entryList.get(i).toString();
        }
        return String.join(File.pathSeparator, strs);
    }
    
}
```

- `File.pathSeparator`ï¼Œæ˜¯ä¸€ä¸ªåˆ†éš”ç¬¦å±æ€§ï¼Œwin/linux æœ‰ä¸åŒçš„ç±»å‹ï¼Œæ‰€ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•è¿›è¡Œåˆ†å‰²è·¯å¾„ã€‚
- åˆ†å‰²åçš„è·¯å¾„è£…åˆ° List é›†åˆä¸­ï¼Œè¿™ä¸ªè¿‡ç¨‹å±äºæ‹†åˆ†è·¯å¾„ã€‚

#### 2.5 é€šé…ç¬¦ç±»å‹è·¯å¾„(WildcardEntry)

```java
public class WildcardEntry extends CompositeEntry {

    public WildcardEntry(String path) {
        super(toPathList(path));
    }

    private static String toPathList(String wildcardPath) {
        String baseDir = wildcardPath.replace("*", ""); // remove *
        try {
            return Files.walk(Paths.get(baseDir))
                    .filter(Files::isRegularFile)
                    .map(Path::toString)
                    .filter(p -> p.endsWith(".jar") || p.endsWith(".JAR"))
                    .collect(Collectors.joining(File.pathSeparator));
        } catch (IOException e) {
            return "";
        }
    }

}
```

- è¿™ä¸ªç±»å±äºæ··åˆå½¢å¼è·¯å¾„å¤„ç†ç±»çš„å­ç±»ï¼Œå”¯ä¸€æä¾›çš„æ–¹æ³•å°±æ˜¯æŠŠç±»è·¯å¾„è§£æå‡ºæ¥ã€‚

#### 2.6 ç±»è·¯å¾„è§£æ(Classpath)

`å¯åŠ¨ç±»è·¯å¾„`ã€`æ‰©å±•ç±»è·¯å¾„`ã€`ç”¨æˆ·ç±»è·¯å¾„`ï¼Œç†Ÿæ‚‰å—ï¼Ÿæ˜¯ä¸ç»å¸¸çœ‹åˆ°è¿™å‡ å¥è¯ï¼Œé‚£ä¹ˆæ—¶å€™æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ

æœ‰äº†ä¸Šé¢æˆ‘ä»¬åšçš„ä¸€äº›åŸºç¡€ç±»çš„å·¥ä½œï¼Œæ¥ä¸‹æ¥å°±æ˜¯ç±»è§£æçš„å®é™…è°ƒç”¨è¿‡ç¨‹ã€‚ä»£ç å¦‚ä¸‹ï¼š

```java
public class Classpath {

    private Entry bootstrapClasspath;  //å¯åŠ¨ç±»è·¯å¾„
    private Entry extensionClasspath;  //æ‰©å±•ç±»è·¯å¾„
    private Entry userClasspath;       //ç”¨æˆ·ç±»è·¯å¾„

    public Classpath(String jreOption, String cpOption) {
        //å¯åŠ¨ç±»&æ‰©å±•ç±» "C:\Program Files\Java\jdk1.8.0_161\jre"
        bootstrapAndExtensionClasspath(jreOption);
        //ç”¨æˆ·ç±» F:\..\org\itstack\demo\test\HelloWorld
        parseUserClasspath(cpOption);
    }

    private void bootstrapAndExtensionClasspath(String jreOption) {
        
        String jreDir = getJreDir(jreOption);

        //..jre/lib/*
        String jreLibPath = Paths.get(jreDir, "lib") + File.separator + "*";
        bootstrapClasspath = new WildcardEntry(jreLibPath);

        //..jre/lib/ext/*
        String jreExtPath = Paths.get(jreDir, "lib", "ext") + File.separator + "*";
        extensionClasspath = new WildcardEntry(jreExtPath);

    }

    private static String getJreDir(String jreOption) {
        if (jreOption != null && Files.exists(Paths.get(jreOption))) {
            return jreOption;
        }
        if (Files.exists(Paths.get("./jre"))) {
            return "./jre";
        }
        String jh = System.getenv("JAVA_HOME");
        if (jh != null) {
            return Paths.get(jh, "jre").toString();
        }
        throw new RuntimeException("Can not find JRE folder!");
    }

    private void parseUserClasspath(String cpOption) {
        if (cpOption == null) {
            cpOption = ".";
        }
        userClasspath = Entry.create(cpOption);
    }

    public byte[] readClass(String className) throws Exception {
        className = className + ".class";

        //[readClass]å¯åŠ¨ç±»è·¯å¾„
        try {
            return bootstrapClasspath.readClass(className);
        } catch (Exception ignored) {
            //ignored
        }

        //[readClass]æ‰©å±•ç±»è·¯å¾„
        try {
            return extensionClasspath.readClass(className);
        } catch (Exception ignored) {
            //ignored
        }

        //[readClass]ç”¨æˆ·ç±»è·¯å¾„
        return userClasspath.readClass(className);
    }

}
```

- å¯åŠ¨ç±»è·¯å¾„ï¼ŒbootstrapClasspath.readClass(className);
- æ‰©å±•ç±»è·¯å¾„ï¼ŒextensionClasspath.readClass(className);
- ç”¨æˆ·ç±»è·¯å¾„ï¼ŒuserClasspath.readClass(className);
- è¿™å›å°±çœ‹åˆ°å®ƒä»¬å…·ä½“åœ¨å“ªä½¿ç”¨äº†å§ï¼æœ‰äº†å…·ä½“çš„ä»£ç ä¹Ÿå°±æ–¹ä¾¿ç†è§£äº†


#### 2.7 åŠ è½½ç±»æµ‹è¯•éªŒè¯

```java
private static void startJVM(Cmd cmd) {
    Classpath cp = new Classpath(cmd.jre, cmd.classpath);
    System.out.printf("classpathï¼š%s classï¼š%s argsï¼š%s\n", cp, cmd.getMainClass(), cmd.getAppArgs());
    //è·å–className
    String className = cmd.getMainClass().replace(".", "/");
    try {
        byte[] classData = cp.readClass(className);
        System.out.println(Arrays.toString(classData));
    } catch (Exception e) {
        System.out.println("Could not find or load main class " + cmd.getMainClass());
        e.printStackTrace();
    }
}
```

è¿™æ®µå°±æ˜¯ä½¿ç”¨ Classpath ç±»è¿›è¡Œç±»è·¯å¾„åŠ è½½ï¼Œè¿™é‡Œæˆ‘ä»¬æµ‹è¯•åŠ è½½ java.lang.String ç±»ã€‚*ä½ å¯ä»¥åŠ è½½å…¶ä»–çš„ç±»ï¼Œæˆ–è€…è‡ªå·±å†™çš„ç±»*
- é…ç½®IDEAï¼Œprogram arguments å‚æ•°ï¼š`-Xjre "C:\Program Files\Java\jdk1.8.0_161\jre" java.lang.String`
- å¦å¤–è¿™é‡Œè¯»å–å‡ºçš„ class æ–‡ä»¶ä¿¡æ¯ï¼Œæ‰“å°çš„æ˜¯ byte ç±»å‹ä¿¡æ¯ã€‚

**æµ‹è¯•ç»“æœ**

```java
[-54, -2, -70, -66, 0, 0, 0, 52, 2, 28, 3, 0, 0, -40, 0, 3, 0, 0, -37, -1, 3, 0, 0, -33, -1, 3, 0, 1, 0, 0, 8, 0, 15, 8, 0, 61, 8, 0, 85, 8, 0, 88, 8, 0, 89, 8, 0, 112, 8, 0, -81, 8, 0, -75, 8, 0, -47, 8, 0, -45, 1, 0, 0, 1, 0, 3, 40, 41, 73, 1, 0, 20, 40, 41, 76, 106, 97, 118, 97, 47, 108, 97, 110, 103, 47, 79, 98, 106, 101, 99, 116, 59, 1, 0, 20, 40, 41, 76, 106, 97, 118, 97, 47, 108, 97, 110, 103, 47, 83, 116, 114, 105, 110, 103, 59, 1, 0, 3, 40, 41, 86, 1, 0, 3, 40, 41, 90, 1, 0, 4, 40, 41, 91, ...]
```

è¿™å—éƒ¨åˆ†æˆªå–çš„ç¨‹åºè¿è¡Œæ‰“å°ç»“æœï¼Œå°±æ˜¯è¯»å–çš„ class æ–‡ä»¶ä¿¡æ¯ï¼Œåªä¸è¿‡æš‚æ—¶è¿˜ä¸èƒ½çœ‹å‡ºä»€ä¹ˆã€‚*æ¥ä¸‹æ¥æˆ‘ä»¬å†æŠŠå®ƒç¿»è¯‘è¿‡æ¥ï¼*

## äº”ã€è§£æå­—èŠ‚ç æ–‡ä»¶

JVM åœ¨æŠŠ class æ–‡ä»¶åŠ è½½å®Œæˆåï¼Œæ¥ä¸‹æ¥å°±è¿›å…¥`é“¾æ¥`çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬äº†å†…å®¹çš„æ ¡éªŒã€å‡†å¤‡å’Œè§£æï¼Œå…¶å®å°±æ˜¯æŠŠ byte ç±»å‹ class ç¿»è¯‘è¿‡æ¥ï¼Œåšç›¸åº”çš„æ“ä½œã€‚

æ•´ä¸ªè¿™ä¸ªè¿‡ç¨‹å†…å®¹ç›¸å¯¹è¾ƒå¤šï¼Œè¿™é‡Œåªåšéƒ¨åˆ†é€»è¾‘çš„å®ç°å’Œè®²è§£ã€‚å¦‚æœè¯»è€…æ„Ÿå…´è¶£å¯ä»¥é˜…è¯»å°å‚…å“¥çš„[ã€Šç”¨Javaå®ç°JVMã€‹](https://bugstack.cn/itstack-demo-jvm/itstack-demo-jvm.html)ä¸“æ ã€‚

### 1. æå–éƒ¨åˆ†å­—èŠ‚ç 

```java
//å–éƒ¨åˆ†å­—èŠ‚ç ï¼šjava.lang.String
private static byte[] classData = {
        -54, -2, -70, -66, 0, 0, 0, 52, 2, 26, 3, 0, 0, -40, 0, 3, 0, 0, -37, -1, 3, 0, 0, -33, -1, 3, 0, 1, 0, 0, 8, 0,
        59, 8, 0, 83, 8, 0, 86, 8, 0, 87, 8, 0, 110, 8, 0, -83, 8, 0, -77, 8, 0, -49, 8, 0, -47, 1, 0, 3, 40, 41, 73, 1,
        0, 20, 40, 41, 76, 106, 97, 118, 97, 47, 108, 97, 110, 103, 47, 79, 98, 106, 101, 99, 116, 59, 1, 0, 20, 40, 41,
        76, 106, 97, 118, 97, 47, 108, 97, 110, 103, 47, 83, 116, 114, 105, 110, 103, 59, 1, 0, 3, 40, 41, 86, 1, 0, 3,
        40, 41, 90, 1, 0, 4, 40, 41, 91, 66, 1, 0, 4, 40, 41, 91, 67, 1, 0, 4, 40, 67, 41, 67, 1, 0, 21, 40, 68, 41, 76,
        106, 97, 118, 97, 47, 108, 97, 110, 103, 47, 83, 116, 114, 105, 110, 103, 59, 1, 0, 4, 40, 73, 41, 67, 1, 0, 4};
```

- java.lang.String è§£æå‡ºæ¥çš„å­—èŠ‚ç å†…å®¹è¾ƒå¤šï¼Œå½“ç„¶åŒ…æ‹¬çš„å†…å®¹ä¹Ÿå¤šï¼Œæ¯”å¦‚é­”æ•°ã€ç‰ˆæœ¬ã€ç±»ã€å¸¸é‡ã€æ–¹æ³•ç­‰ç­‰ã€‚æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œåªæˆªå–éƒ¨åˆ†è¿›è¡Œè¿›è¡Œè§£æã€‚

### 2. è§£æé­”æ•°å¹¶æ ¡éªŒ

å¾ˆå¤šæ–‡ä»¶æ ¼å¼éƒ½ä¼šè§„å®šæ»¡è¶³è¯¥æ ¼å¼çš„æ–‡ä»¶å¿…é¡»ä»¥æŸå‡ ä¸ªå›ºå®šå­—èŠ‚å¼€å¤´ï¼Œè¿™å‡ ä¸ªå­—èŠ‚ä¸»è¦èµ·åˆ°æ ‡è¯†ä½œç”¨ï¼Œå«ä½œé­”æ•°(magic number)ã€‚

ä¾‹å¦‚ï¼›
- PDFæ–‡ä»¶ä»¥4å­—èŠ‚â€œ%PDFâ€(0x25ã€0x50ã€0x44ã€0x46)å¼€å¤´ï¼Œ
- ZIPæ–‡ä»¶ä»¥2å­—èŠ‚â€œPKâ€(0x50ã€0x4B)å¼€å¤´
- classæ–‡ä»¶ä»¥4å­—èŠ‚â€œ0xCAFEBABEâ€å¼€å¤´

```java
private static void readAndCheckMagic() {
    System.out.println("\r\n------------ æ ¡éªŒé­”æ•° ------------");
    //ä»classå­—èŠ‚ç ä¸­è¯»å–å‰å››ä½
    byte[] magic_byte = new byte[4];
    System.arraycopy(classData, 0, magic_byte, 0, 4);
    
    //å°†4ä½byteå­—èŠ‚è½¬æˆ16è¿›åˆ¶å­—ç¬¦ä¸²
    String magic_hex_str = new BigInteger(1, magic_byte).toString(16);
    System.out.println("magic_hex_strï¼š" + magic_hex_str);
    
    //byte_magic_str æ˜¯16è¿›åˆ¶çš„å­—ç¬¦ä¸²ï¼Œcafebabeï¼Œå› ä¸ºjavaä¸­æ²¡æœ‰æ— ç¬¦å·æ•´å‹ï¼Œæ‰€ä»¥å¦‚æœæƒ³è¦æ— ç¬¦å·åªèƒ½æ”¾åˆ°æ›´é«˜ä½ä¸­
    long magic_unsigned_int32 = Long.parseLong(magic_hex_str, 16);
    System.out.println("magic_unsigned_int32ï¼š" + magic_unsigned_int32);
    
    //é­”æ•°æ¯”å¯¹ï¼Œä¸€ç§é€šè¿‡å­—ç¬¦ä¸²æ¯”å¯¹ï¼Œå¦å¤–ä¸€ç§ä½¿ç”¨å‡è®¾çš„æ— ç¬¦å·16è¿›åˆ¶æ¯”è¾ƒã€‚å¦‚æœä½¿ç”¨æ— ç¬¦å·æ¯”è¾ƒéœ€è¦å°†0xCAFEBABE & 0x0FFFFFFFFLä¸è¿ç®—
    System.out.println("0xCAFEBABE & 0x0FFFFFFFFLï¼š" + (0xCAFEBABE & 0x0FFFFFFFFL));
    
    if (magic_unsigned_int32 == (0xCAFEBABE & 0x0FFFFFFFFL)) {
        System.out.println("classå­—èŠ‚ç é­”æ•°æ— ç¬¦å·16è¿›åˆ¶æ•°å€¼ä¸€è‡´æ ¡éªŒé€šè¿‡");
    } else {
        System.out.println("classå­—èŠ‚ç é­”æ•°æ— ç¬¦å·16è¿›åˆ¶æ•°å€¼ä¸€è‡´æ ¡éªŒæ‹’ç»");
    }
}
```

- è¯»å–å­—èŠ‚ç ä¸­çš„å‰å››ä½ï¼Œ`-54, -2, -70, -66`ï¼Œå°†è¿™å››ä½è½¬æ¢ä¸º16è¿›åˆ¶ã€‚
- å› ä¸º java ä¸­æ˜¯æ²¡æœ‰æ— ç¬¦å·æ•´å‹çš„ï¼Œæ‰€ä»¥åªèƒ½ç”¨æ›´é«˜ä½å­˜æ”¾ã€‚
- è§£æåå°±æ˜¯é­”æ•°çš„å¯¹æ¯”ï¼Œçœ‹æ˜¯å¦ä¸ CAFEBABE ä¸€è‡´ã€‚

**æµ‹è¯•ç»“æœ**

```java
------------ æ ¡éªŒé­”æ•° ------------
magic_hex_strï¼šcafebabe
magic_unsigned_int32ï¼š3405691582
0xCAFEBABE & 0x0FFFFFFFFLï¼š3405691582
classå­—èŠ‚ç é­”æ•°æ— ç¬¦å·16è¿›åˆ¶æ•°å€¼ä¸€è‡´æ ¡éªŒé€šè¿‡
```

### 3. è§£æç‰ˆæœ¬å·ä¿¡æ¯

åˆšæ‰æˆ‘ä»¬å·²ç»è¯»å–äº†4ä½é­”æ•°ä¿¡æ¯ï¼Œæ¥ä¸‹æ¥å†è¯»å–2ä½ï¼Œæ˜¯ç‰ˆæœ¬ä¿¡æ¯ã€‚

é­”æ•°ä¹‹åæ˜¯classæ–‡ä»¶çš„æ¬¡ç‰ˆæœ¬å·å’Œä¸»ç‰ˆæœ¬å·ï¼Œéƒ½æ˜¯u2ç±»å‹ã€‚å‡è®¾æŸclassæ–‡ä»¶çš„ä¸»ç‰ˆæœ¬å·æ˜¯Mï¼Œæ¬¡ç‰ˆæœ¬å·æ˜¯mï¼Œé‚£ä¹ˆå®Œæ•´çš„ç‰ˆæœ¬å·å¯ä»¥è¡¨ç¤ºæˆâ€œM.mâ€çš„å½¢å¼ã€‚æ¬¡ç‰ˆæœ¬å·åªåœ¨J2SE 1.2ä¹‹å‰ç”¨è¿‡ï¼Œä»1.2å¼€å§‹åŸºæœ¬ä¸Šå°±æ²¡æœ‰ä»€ä¹ˆç”¨äº†(éƒ½æ˜¯0)ã€‚ä¸»ç‰ˆæœ¬å·åœ¨J2SE 1.2ä¹‹å‰æ˜¯45ï¼Œä»1.2å¼€å§‹ï¼Œæ¯æ¬¡æœ‰å¤§ç‰ˆæœ¬çš„Javaç‰ˆæœ¬å‘å¸ƒï¼Œéƒ½ä¼šåŠ 1ï½›45ã€46ã€47ã€48ã€49ã€50ã€51ã€52ï½

```java
private static void readAndCheckVersion() {
    System.out.println("\r\n------------ æ ¡éªŒç‰ˆæœ¬å· ------------");
    //ä»classå­—èŠ‚ç ç¬¬4ä½å¼€å§‹è¯»å–ï¼Œè¯»å–2ä½
    byte[] minor_byte = new byte[2];
    System.arraycopy(classData, 4, minor_byte, 0, 2);
    
    //å°†2ä½byteå­—èŠ‚è½¬æˆ16è¿›åˆ¶å­—ç¬¦ä¸²
    String minor_hex_str = new BigInteger(1, minor_byte).toString(16);
    System.out.println("minor_hex_strï¼š" + minor_hex_str);
    
    //minor_unsigned_int32 è½¬æˆæ— ç¬¦å·16è¿›åˆ¶
    int minor_unsigned_int32 = Integer.parseInt(minor_hex_str, 16);
    System.out.println("minor_unsigned_int32ï¼š" + minor_unsigned_int32);
    
    //ä»classå­—èŠ‚ç ç¬¬6ä½å¼€å§‹è¯»å–ï¼Œè¯»å–2ä½
    byte[] major_byte = new byte[2];
    System.arraycopy(classData, 6, major_byte, 0, 2);
    
    //å°†2ä½byteå­—èŠ‚è½¬æˆ16è¿›åˆ¶å­—ç¬¦ä¸²
    String major_hex_str = new BigInteger(1, major_byte).toString(16);
    System.out.println("major_hex_strï¼š" + major_hex_str);
    
    //major_unsigned_int32 è½¬æˆæ— ç¬¦å·16è¿›åˆ¶
    int major_unsigned_int32 = Integer.parseInt(major_hex_str, 16);
    System.out.println("major_unsigned_int32ï¼š" + major_unsigned_int32);
    System.out.println("ç‰ˆæœ¬å·ï¼š" + major_unsigned_int32 + "." + minor_unsigned_int32);
}
```

- è¿™é‡Œæœ‰ä¸€ä¸ªå°æŠ€å·§ï¼Œclass æ–‡ä»¶è§£æå‡ºæ¥æ˜¯ä¸€æ•´ç‰‡çš„å†…å®¹ï¼ŒJVM éœ€è¦æŒ‰ç…§è™šæ‹Ÿæœºè§„èŒƒï¼Œä¸€æ®µä¸€æ®µçš„è§£æå‡ºæ‰€æœ‰çš„ä¿¡æ¯ã€‚
- åŒæ ·è¿™é‡Œæˆ‘ä»¬éœ€è¦æŠŠ2ä½byteè½¬æ¢ä¸º16è¿›åˆ¶ä¿¡æ¯ï¼Œå¹¶ç»§ç»­ä»ç¬¬6ä½ç»§ç»­è¯»å–2ä½ä¿¡æ¯ã€‚ç»„åˆå‡ºæ¥çš„æ‰æ˜¯ç‰ˆæœ¬ä¿¡æ¯ã€‚

**æµ‹è¯•ç»“æœ**

```java
------------ æ ¡éªŒç‰ˆæœ¬å· ------------
minor_hex_strï¼š0
minor_unsigned_int32ï¼š0
major_hex_strï¼š34
major_unsigned_int32ï¼š52
ç‰ˆæœ¬å·ï¼š52.0
```

### 4. è§£æå…¨éƒ¨å†…å®¹å¯¹ç…§

æŒ‰ç…§ JVM çš„åŠ è½½è¿‡ç¨‹ï¼Œå…¶å®è¿œä¸æ­¢é­”æ•°å’Œç‰ˆæœ¬å·ä¿¡æ¯ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–å†…å®¹ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥æŠŠæµ‹è¯•ç»“æœå±•ç¤ºå‡ºæ¥ï¼Œæ–¹ä¾¿å¤§å®¶æœ‰ä¸€ä¸ªå­¦ä¹ ç»“æœçš„æ¯”å¯¹å°è±¡ã€‚

```java
classpathï¼šorg.itstack.demo.jvm.classpath.Classpath@4bf558aa classï¼šjava.lang.String argsï¼šnull
version: 52.0
constants countï¼š540
access flagsï¼š0x31
this classï¼šjava/lang/String
super classï¼šjava/lang/Object
interfacesï¼š[java/io/Serializable, java/lang/Comparable, java/lang/CharSequence]
fields countï¼š5
value 		 [C
hash 		 I
serialVersionUID 		 J
serialPersistentFields 		 [Ljava/io/ObjectStreamField;
CASE_INSENSITIVE_ORDER 		 Ljava/util/Comparator;
methods count: 94
<init> 		 ()V
<init> 		 (Ljava/lang/String;)V
<init> 		 ([C)V
<init> 		 ([CII)V
<init> 		 ([III)V
<init> 		 ([BIII)V
<init> 		 ([BI)V
checkBounds 		 ([BII)V
<init> 		 ([BIILjava/lang/String;)V
<init> 		 ([BIILjava/nio/charset/Charset;)V
<init> 		 ([BLjava/lang/String;)V
<init> 		 ([BLjava/nio/charset/Charset;)V
<init> 		 ([BII)V
<init> 		 ([B)V
<init> 		 (Ljava/lang/StringBuffer;)V
<init> 		 (Ljava/lang/StringBuilder;)V
<init> 		 ([CZ)V
length 		 ()I
isEmpty 		 ()Z
charAt 		 (I)C
codePointAt 		 (I)I
codePointBefore 		 (I)I
codePointCount 		 (II)I
offsetByCodePoints 		 (II)I
getChars 		 ([CI)V
getChars 		 (II[CI)V
getBytes 		 (II[BI)V
getBytes 		 (Ljava/lang/String;)[B
getBytes 		 (Ljava/nio/charset/Charset;)[B
getBytes 		 ()[B
equals 		 (Ljava/lang/Object;)Z
contentEquals 		 (Ljava/lang/StringBuffer;)Z
nonSyncContentEquals 		 (Ljava/lang/AbstractStringBuilder;)Z
contentEquals 		 (Ljava/lang/CharSequence;)Z
equalsIgnoreCase 		 (Ljava/lang/String;)Z
compareTo 		 (Ljava/lang/String;)I
compareToIgnoreCase 		 (Ljava/lang/String;)I
regionMatches 		 (ILjava/lang/String;II)Z
regionMatches 		 (ZILjava/lang/String;II)Z
startsWith 		 (Ljava/lang/String;I)Z
startsWith 		 (Ljava/lang/String;)Z
endsWith 		 (Ljava/lang/String;)Z
hashCode 		 ()I
indexOf 		 (I)I
indexOf 		 (II)I
indexOfSupplementary 		 (II)I
lastIndexOf 		 (I)I
lastIndexOf 		 (II)I
lastIndexOfSupplementary 		 (II)I
indexOf 		 (Ljava/lang/String;)I
indexOf 		 (Ljava/lang/String;I)I
indexOf 		 ([CIILjava/lang/String;I)I
indexOf 		 ([CII[CIII)I
lastIndexOf 		 (Ljava/lang/String;)I
lastIndexOf 		 (Ljava/lang/String;I)I
lastIndexOf 		 ([CIILjava/lang/String;I)I
lastIndexOf 		 ([CII[CIII)I
substring 		 (I)Ljava/lang/String;
substring 		 (II)Ljava/lang/String;
subSequence 		 (II)Ljava/lang/CharSequence;
concat 		 (Ljava/lang/String;)Ljava/lang/String;
replace 		 (CC)Ljava/lang/String;
matches 		 (Ljava/lang/String;)Z
contains 		 (Ljava/lang/CharSequence;)Z
replaceFirst 		 (Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
replaceAll 		 (Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
replace 		 (Ljava/lang/CharSequence;Ljava/lang/CharSequence;)Ljava/lang/String;
split 		 (Ljava/lang/String;I)[Ljava/lang/String;
split 		 (Ljava/lang/String;)[Ljava/lang/String;
join 		 (Ljava/lang/CharSequence;[Ljava/lang/CharSequence;)Ljava/lang/String;
join 		 (Ljava/lang/CharSequence;Ljava/lang/Iterable;)Ljava/lang/String;
toLowerCase 		 (Ljava/util/Locale;)Ljava/lang/String;
toLowerCase 		 ()Ljava/lang/String;
toUpperCase 		 (Ljava/util/Locale;)Ljava/lang/String;
toUpperCase 		 ()Ljava/lang/String;
trim 		 ()Ljava/lang/String;
toString 		 ()Ljava/lang/String;
toCharArray 		 ()[C
format 		 (Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
format 		 (Ljava/util/Locale;Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
valueOf 		 (Ljava/lang/Object;)Ljava/lang/String;
valueOf 		 ([C)Ljava/lang/String;
valueOf 		 ([CII)Ljava/lang/String;
copyValueOf 		 ([CII)Ljava/lang/String;
copyValueOf 		 ([C)Ljava/lang/String;
valueOf 		 (Z)Ljava/lang/String;
valueOf 		 (C)Ljava/lang/String;
valueOf 		 (I)Ljava/lang/String;
valueOf 		 (J)Ljava/lang/String;
valueOf 		 (F)Ljava/lang/String;
valueOf 		 (D)Ljava/lang/String;
intern 		 ()Ljava/lang/String;
compareTo 		 (Ljava/lang/Object;)I
<clinit> 		 ()V

Process finished with exit code 0
```

- å¦‚æœå¤§å®¶å¯¹è¿™éƒ¨åˆ†éªŒè¯ã€å‡†å¤‡ã€è§£æï¼Œçš„å®ç°è¿‡ç¨‹æ„Ÿå…´è¶£ï¼Œå¯ä»¥å‚ç…§è¿™éƒ¨åˆ†ç”¨Javaå®ç°çš„JVMæºç ï¼š[https://github.com/fuzhengwei/itstack-demo-jvm](https://github.com/fuzhengwei/itstack-demo-jvm)

## å…­ã€æ€»ç»“

- å­¦ä¹  JVM æœ€å¤§çš„é—®é¢˜æ˜¯ä¸å¥½å®è·µï¼Œæ‰€ä»¥æœ¬æ–‡ä»¥æ¡ˆä¾‹å®æ“çš„æ–¹å¼ï¼Œå­¦ä¹  JVM çš„åŠ è½½è§£æè¿‡ç¨‹ã€‚ä¹Ÿè®©æ›´å¤šçš„å¯¹ JVM æ„Ÿå…´è¶£çš„ç ”å‘ï¼Œèƒ½æ›´å¥½çš„æ¥è§¦åˆ° JVM å¹¶æ·±å…¥çš„å­¦ä¹ ã€‚
- æœ‰äº†ä»¥ä¸Šè¿™æ®µä»£ç ï¼Œå¤§å®¶å¯ä»¥å‚ç…§ JVM è™šæ‹Ÿæœºè§„èŒƒï¼Œåœ¨è°ƒè¯•Javaç‰ˆæœ¬çš„JVMï¼Œè¿™æ ·å°±å¯ä»¥éå¸¸å®¹æ˜“ç†è§£æ•´ä¸ªJVMçš„åŠ è½½è¿‡ç¨‹ï¼Œéƒ½åšäº†ä»€ä¹ˆã€‚
- å¦‚æœå¤§å®¶éœ€è¦æ–‡ç« ä¸­ä¸€äº›åŸå›¾ xmind æˆ–è€…æºç ï¼Œå¯ä»¥æ·»åŠ ä½œè€…å°å‚…å“¥(fustack)ï¼Œæˆ–è€…å…³æ³¨å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆè¿›è¡Œè·å–ã€‚å¥½äº†ï¼Œæœ¬ç« èŠ‚å°±æ‰¯åˆ°è¿™ï¼Œåç»­è¿˜æœ‰å¾ˆå¤šåŠªåŠ›ï¼ŒæŒç»­åŸåˆ›ï¼Œæ„Ÿè°¢å¤§å®¶çš„æ”¯æŒï¼
