---
layout: post
category: interview
title: é¢ç»æ‰‹å†Œ Â· ç¬¬20ç¯‡ã€ŠThread çº¿ç¨‹ï¼ŒçŠ¶æ€è½¬æ¢ã€æ–¹æ³•ä½¿ç”¨ã€åŸç†åˆ†æã€‹
tagline: by å°å‚…å“¥
tag: [java,interview]
excerpt: è§£æåŸç†ã€æ•™ä½ ä½¿ç”¨ yieldã€waitã€notifyã€joinï¼Œè®©ä½ æ‡‚çº¿ç¨‹ï¼çº¿ç¨‹çŠ¶æ€å’ŒçŠ¶æ€çš„è½¬æ¢ä¹Ÿæ˜¯é¢è¯•ä¸­å¿…é—®çš„é—®é¢˜ï¼Œä½†é™¤äº†é¢è¯•æ˜¯æˆ‘ä»¬è‡ªå·±åœ¨å¼€å‘ä¸­ï¼Œå¦‚æœçœŸçš„ä½¿ç”¨çº¿ç¨‹ï¼Œæ˜¯éå¸¸æœ‰å¿…è¦äº†è§£çº¿ç¨‹çŠ¶æ€æ˜¯å¦‚ä½•è½¬æ¢çš„ã€‚*æ¨¡æ¨¡ç³Šç³Šçš„ä½¿ç”¨ï¼Œæ€»ä¼šè§‰å¾—æ‹…å¿ƒï¼Œé‚£ä¹ˆä½ æ˜¯ä¸ªå¥½ç¨‹åºå‘˜ï¼*
lock: need
---

# é¢ç»æ‰‹å†Œ Â· ç¬¬20ç¯‡ã€ŠThread çº¿ç¨‹ï¼ŒçŠ¶æ€è½¬æ¢ã€æ–¹æ³•ä½¿ç”¨ã€åŸç†åˆ†æã€‹

ä½œè€…ï¼šå°å‚…å“¥
<br/>åšå®¢ï¼š[https://bugstack.cn](https://bugstack.cn)

>æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„

## ä¸€ã€å‰è¨€

`è€ƒä¸å¸¸ç”¨çš„ã€è€ƒä½ ä¸ä¼šçš„ã€è€ƒä½ å¿½ç•¥çš„ï¼Œæ‰æ˜¯è€ƒè¯•ï¼`

å¤§éƒ¨åˆ†è€ƒè¯•è€ƒçš„ï¼ŒåŸºæœ¬éƒ½æ˜¯ä¸æ€ä¹ˆç”¨çš„ã€‚*ä¾‹å¤–çš„å’±ä»¬ä¸è¯´ğŸ˜„* å°±åƒä½ åšç¨‹åºå¼€å‘ï¼Œå°¤å…¶åœ¨RPC+MQ+åˆ†åº“åˆ†è¡¨ï¼Œå…¶å®å¾ˆéš¾å‡ºç°è®©ä½ ç”¨ä¸€ä¸ªæœºå™¨å®ä¾‹ç¼–å†™å¤šçº¿ç¨‹å‹æ¦¨CPUæ€§èƒ½ã€‚å¾ˆå¤šæ—¶å€™æ˜¯æ‰”å‡ºä¸€ä¸ªMQï¼Œå¼‚æ­¥æ¶ˆè´¹äº†ã€‚å¦‚æœæ²¡æœ‰èµ„æºç«äº‰ï¼Œä¾‹å¦‚åº“è¡¨ç§’æ€ï¼Œé‚£ä¹ˆå…¶å®ä½ ç¡®å®å¾ˆéš¾æ¥è§¦å¤šå¹¶å‘ç¼–ç¨‹ä»¥åŠé”çš„ä½¿ç”¨ã€‚

ä½†ï¼å‡¡æœ‰ä¾‹å¤–ï¼Œæ¯”å¦‚ä½ éœ€è¦å¼€å‘ä¸€ä¸ªæ•°æ®åº“è·¯ç”±ä¸­é—´ä»¶ï¼Œé‚£ä¹ˆå°±è‚¯å®šä¼šå‡ºç°åœ¨ä¸€å°åº”ç”¨å®ä¾‹ä¸Šåˆ†é…æ•°æ®åº“èµ„æºæ± çš„æƒ…å†µï¼Œå¦‚æœå‡ºç°ç«äº‰å°±è¦åˆç†åˆ†é…èµ„æºã€‚å¦‚æ­¤ï¼Œç±»ä¼¼è¿™æ ·çš„ä¸­é—´ä»¶å¼€å‘ï¼Œå°±ä¼šæ¶‰åŠåˆ°ä¸€äº›æ›´æ ¸å¿ƒåº•å±‚çš„æŠ€æœ¯çš„åº”ç”¨ã€‚

æ‰€ä»¥ï¼Œæœ‰æ—¶å€™ä¸æ˜¯`æ²¡ç”¨`ï¼Œè€Œæ˜¯ä½ æ²¡æœ‰*ç”¨*ã€‚

## äºŒã€é¢è¯•é¢˜

`è°¢é£æœºï¼Œå°è®°ï¼` çº¿ç¨‹æˆ‘ç©å®šäº†ï¼Œé¢è¯•ä¹Ÿæ‹¦ä¸ä½æˆ‘ï¼Œæˆ‘è¯´çš„ï¼

**è°¢é£æœº**ï¼šå˜¿ï¼Œä½ å¥½å“‡ï¼Œæˆ‘æ˜¯è°¢é£æœºï¼

**é¢è¯•å®˜**ï¼šå¥½ï¼Œä»Šå¤©ç”µè¯é¢è¯•ï¼Œä½ å‡†å¤‡å¥½äº†ï¼Ÿ

**è°¢é£æœº**ï¼šå‡†å¤‡å¥½äº†ï¼Œå˜¿å˜¿ï¼

**é¢è¯•å®˜**ï¼šå—¯ï¼Œæˆ‘çœ‹ä½ ç®€å†é‡Œå†™äº†ä¸å°‘çº¿ç¨‹çš„ä¸œè¥¿ï¼Œçœ‹æ¥äº†è§£çš„ä¸é”™ã€‚é—®ä½ ä¸€ä¸ªçº¿ç¨‹å§é‚£å°±ï¼Œçº¿ç¨‹ä¹‹é—´çŠ¶æ€æ˜¯æ€ä¹ˆè½¬æ¢çš„ï¼Ÿ

**è°¢é£æœº**ï¼šæ‰’æ‹‰æ‰’æ‹‰ï¼Œæ‰’æ‹‰æ‰’æ‹‰ï¼

**é¢è¯•å®˜**ï¼šå—¯ï¼Œè¿˜ä¸é”™ã€‚é‚£ yield æ–¹æ³•æ˜¯æ€ä¹ˆä½¿ç”¨çš„ã€‚

**è°¢é£æœº**ï¼šå—¯ï¼å¥½åƒæ˜¯è®©å‡ºCPUã€‚å…·ä½“çš„æ²¡æ€ä¹ˆç”¨è¿‡ï¼

**é¢è¯•å®˜**ï¼šåšåšæµ‹è¯•ï¼ŒéªŒè¯ä¸‹ï¼Œä¸‹æ¬¡é—®ä½ ã€‚

## ä¸‰ã€Thread çŠ¶æ€å…³ç³»

Java çš„çº¿ç¨‹çŠ¶æ€æè¿°åœ¨æšä¸¾ç±» `java.lang.Thread.State` ä¸­ï¼Œå…±åŒ…æ‹¬å¦‚ä¸‹äº”ç§çŠ¶æ€ï¼š

```java
public enum State {
    NEW, RUNNABLE, BLOCKED, WAITING, TIMED_WAITING, TERMINATED;
}
```

è¿™äº”ç§çŠ¶æ€æè¿°äº†ä¸€ä¸ªçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼Œå…¶å®è¿™ç§çŠ¶æ€ç çš„å®šä¹‰åœ¨æˆ‘ä»¬æ—¥å¸¸çš„ä¸šåŠ¡å¼€å‘ä¸­ï¼Œä¹Ÿç»å¸¸å‡ºç°ã€‚æ¯”å¦‚ï¼šä¸€ä¸ªæ´»åŠ¨çš„æäº¤ã€å®¡æ ¸ã€æ‹’ç»ã€ä¿®æ”¹ã€é€šè¿‡ã€è¿è¡Œã€å…³é—­ç­‰ï¼Œæ˜¯ç±»ä¼¼çš„ã€‚é‚£ä¹ˆçº¿ç¨‹çš„çŠ¶æ€æ˜¯é€šè¿‡ä¸‹å›¾çš„æ–¹å¼è¿›è¡Œæµè½¬çš„ï¼Œå¦‚å›¾ 20-1

![å›¾ 20-1 çº¿ç¨‹çŠ¶æ€æµè½¬](https://bugstack.cn/assets/images/2020/interview/interview-20-1.png)

- `New`ï¼šæ–°åˆ›å»ºçš„ä¸€ä¸ªçº¿ç¨‹ï¼Œå¤„äºç­‰å¾…çŠ¶æ€ã€‚
- `Runnable`ï¼šå¯è¿è¡ŒçŠ¶æ€ï¼Œå¹¶ä¸æ˜¯å·²ç»è¿è¡Œï¼Œå…·ä½“çš„çº¿ç¨‹è°ƒåº¦å„æ“ä½œç³»ç»Ÿå†³å®šã€‚åœ¨ Runnable ä¸­åŒ…å«äº† `Ready`ã€`Running` ä¸¤ä¸ªçŠ¶æ€ï¼Œå½“çº¿ç¨‹è°ƒç”¨äº† start() æ–¹æ³•åï¼Œçº¿ç¨‹åˆ™å¤„äºå°±ç»ª Ready çŠ¶æ€ï¼Œç­‰å¾…æ“ä½œç³»ç»Ÿåˆ†é… CPU æ—¶é—´ç‰‡ï¼Œåˆ†é…ååˆ™è¿›å…¥ Running è¿è¡ŒçŠ¶æ€ã€‚æ­¤å¤–å½“è°ƒç”¨ yield() æ–¹æ³•åï¼Œåªæ˜¯*è°¦è®©*çš„å…è®¸å½“å‰çº¿ç¨‹è®©å‡ºCPUï¼Œä½†å…·ä½“è®©ä¸è®©ä¸ä¸€å®šï¼Œç”±æ“ä½œç³»ç»Ÿå†³å®šã€‚å¦‚æœè®©äº†ï¼Œé‚£ä¹ˆå½“å‰çº¿ç¨‹åˆ™ä¼šå¤„äº Ready çŠ¶æ€ç»§ç»­ç«äº‰CPUï¼Œç›´è‡³æ‰§è¡Œã€‚
- `Timed_waiting`ï¼šæŒ‡å®šæ—¶é—´å†…è®©å‡ºCPUèµ„æºï¼Œæ­¤æ—¶çº¿ç¨‹ä¸ä¼šè¢«æ‰§è¡Œï¼Œä¹Ÿä¸ä¼šè¢«ç³»ç»Ÿè°ƒåº¦ï¼Œç›´åˆ°ç­‰å¾…æ—¶é—´åˆ°æœŸåæ‰ä¼šè¢«æ‰§è¡Œã€‚ä¸‹åˆ—æ–¹æ³•éƒ½å¯ä»¥è§¦å‘ï¼š`Thread.sleep`ã€`Object.wait`ã€`Thread.join`ã€`LockSupport.parkNanos`ã€`LockSupport.parkUntil`ã€‚
- `Wating`ï¼šå¯è¢«å”¤é†’çš„ç­‰å¾…çŠ¶æ€ï¼Œæ­¤æ—¶çº¿ç¨‹ä¸ä¼šè¢«æ‰§è¡Œä¹Ÿä¸ä¼šè¢«ç³»ç»Ÿè°ƒåº¦ã€‚æ­¤çŠ¶æ€å¯ä»¥é€šè¿‡ synchronized è·å¾—é”ï¼Œè°ƒç”¨ wait æ–¹æ³•è¿›å…¥ç­‰å¾…çŠ¶æ€ã€‚æœ€åé€šè¿‡ notifyã€notifyall å”¤é†’ã€‚ä¸‹åˆ—æ–¹æ³•éƒ½å¯ä»¥è§¦å‘ï¼š`Object.wait`ã€`Thread.join`ã€`LockSupport.park`ã€‚
- `Blocked`ï¼šå½“å‘ç”Ÿé”ç«äº‰çŠ¶æ€ä¸‹ï¼Œæ²¡æœ‰è·å¾—é”çš„çº¿ç¨‹ä¼šå¤„äºæŒ‚èµ·çŠ¶æ€ã€‚ä¾‹å¦‚ synchronized é”ï¼Œå…ˆè·å¾—çš„å…ˆæ‰§è¡Œï¼Œæ²¡æœ‰è·å¾—çš„è¿›å…¥é˜»å¡çŠ¶æ€ã€‚
- `Terminated`ï¼šè¿™ä¸ªæ˜¯ç»ˆæ­¢çŠ¶æ€ï¼Œä» New åˆ° Terminated æ˜¯ä¸å¯é€†çš„ã€‚ä¸€èˆ¬æ˜¯ç¨‹åºæµç¨‹æ­£å¸¸ç»“æŸæˆ–è€…å‘ç”Ÿäº†å¼‚å¸¸ã€‚

*è¿™é‡Œå‚è€ƒæšä¸¾`State` ç±»çš„è‹±æ–‡æ³¨é‡Šäº†è§£äº†æ¯ä¸€ä¸ªçŠ¶æ€ç çš„å«ä¹‰ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å»å°è¯•æ“ä½œçº¿ç¨‹æ–¹æ³•ï¼ŒæŠŠè¿™äº›çŠ¶æ€ä½“ç°å‡ºæ¥ã€‚*

## å››ã€Thread çŠ¶æ€æµ‹è¯•

### 1. NEW

```java
Thread thread = new Thread(() -> {
});
System.out.println(thread.getState());

// NEW
```

- è¿™ä¸ªçŠ¶æ€å¾ˆç®€å•ï¼Œå°±æ˜¯çº¿ç¨‹åˆ›å»ºè¿˜æ²¡æœ‰å¯åŠ¨æ—¶å°±æ˜¯è¿™ä¸ªçŠ¶æ€ã€‚

### 2. RUNNABLE

```java
Thread thread = new Thread(() -> {
});
// å¯åŠ¨
thread.start();
System.out.println(thread.getState());

// RUNNABLE
```

- åˆ›å»ºçš„çº¿ç¨‹å¯åŠ¨å `start()`ï¼Œå°±ä¼šè¿›å…¥ RUNNABLE çŠ¶æ€ã€‚ä½†æ­¤æ—¶å¹¶ä¸ä¸€å®šåœ¨æ‰§è¡Œï¼Œè€Œæ˜¯è¯´è¿™ä¸ªçº¿ç¨‹å·²ç»å°±ç»ªï¼Œå¯ä»¥ç«äº‰ CPU èµ„æºã€‚

### 3. BLOCKED

```java
Object obj = new Object();
new Thread(() -> {
    synchronized (obj) {
        try {
            Thread.sleep(10000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}).start();

Thread thread = new Thread(() -> {
    synchronized (obj) {
        try {
            obj.wait();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
});

thread.start();
while (true) {
    Thread.sleep(1000);
    System.out.println(thread.getState());
}

// BLOCKED
// BLOCKED
// BLOCKED
```

- è¿™æ®µä»£ç ç¨å¾®æœ‰ç‚¹é•¿ï¼Œä¸»è¦æ˜¯ä¸ºäº†è®©ä¸¤ä¸ªçº¿ç¨‹å‘ç”Ÿé”ç«äº‰ã€‚
- ç¬¬ä¸€ä¸ªçº¿ç¨‹ï¼Œsynchronized è·å–é”åä¼‘çœ ï¼Œä¸é‡Šæ”¾é”ã€‚
- ç¬¬äºŒä¸ªçº¿ç¨‹ï¼Œsynchronized è·å–ä¸åˆ°é”ï¼Œä¼šè¢«æŒ‚èµ·ã€‚
- é‚£ä¹ˆæœ€åçš„è¾“å‡ºç»“æœå°±ä¼šæ˜¯ï¼Œ`BLOCKED`

### 4. WAITING

```java
Object obj = new Object();
Thread thread = new Thread(() -> {
    synchronized (obj) {
        try {
            obj.wait();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
});

thread.start();

while (true) {
    Thread.sleep(1000);
    System.out.println(thread.getState());
}

// WAITING
// WAITING
// WAITING
```

- åªè¦åœ¨ synchronized ä»£ç å—æˆ–è€…ä¿®é¥°çš„æ–¹æ³•ä¸­ï¼Œè°ƒç”¨ `wait` æ–¹æ³•ï¼Œåˆæ²¡æœ‰è¢« notify å°±ä¼šè¿›å…¥ `WAITING` çŠ¶æ€ã€‚
- å¦å¤– `Thread.join` æºç ä¸­ä¹Ÿæ˜¯è°ƒç”¨çš„ wait æ–¹æ³•ï¼Œæ‰€ä»¥ä¹Ÿä¼šè®©çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ã€‚

### 5. TIMED_WAITING

```java
Object obj = new Object();
Thread thread = new Thread(() -> {
    synchronized (obj) {
        try {
            Thread.sleep(100000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
});
thread.start();

while (true) {
    Thread.sleep(1000);
    System.out.println(thread.getState());
}

// TIMED_WAITING
// TIMED_WAITING
// TIMED_WAITING
```

- æœ‰äº†ä¸Šé¢çŠ¶æ€è·å–çš„å¯¹æ¯”ï¼Œè¿™ä¸ªçŠ¶æ€çš„è·å–å°±æ²¡ä»€ä¹ˆéš¾åº¦äº†ã€‚åªè¦æ”¹æˆ `Thread.sleep(100000);` å°±å¯ä»¥äº†ã€‚

### 6. TERMINATED

```java
Thread thread = new Thread(() -> {
});
thread.start();

System.out.println(thread.getState());
System.out.println(thread.getState());
System.out.println(thread.getState());

// RUNNABLE
// TERMINATED
// TERMINATED
```

- è¿™ä¸ªå°±æ¯”è¾ƒç®€å•äº†ï¼Œåªè¦ä¸€ä¸ªçº¿ç¨‹è¿è¡Œå®Œï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸç»“æŸäº†ï¼Œå°±è¿›å…¥äº† `TERMINATED` çŠ¶æ€ã€‚

## äº”ã€Thread æ–¹æ³•ä½¿ç”¨

ä¸€èˆ¬æƒ…å†µä¸‹ Thread ä¸­æœ€å¸¸ç”¨çš„æ–¹æ³•å°±æ˜¯ start å¯åŠ¨ï¼Œé™¤æ­¤ä¹‹å¤–ä¸€äº›å…¶ä»–æ–¹æ³•å¯èƒ½åœ¨å¹³å¸¸çš„å¼€å‘ä¸­ç”¨çš„ä¸å¤šï¼Œä½†è¿™äº›æ–¹æ³•åœ¨ä¸€äº›æ¡†æ¶ä¸­å´ç»å¸¸å‡ºç°ã€‚*å› æ­¤åªäº†è§£å®ƒä»¬çš„æ¦‚å¿µï¼Œä½†æ˜¯å´ç¼ºå°‘ä¸€äº›å®ä¾‹æ¥å‚è€ƒï¼* æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥åšä¸€äº›æ¡ˆä¾‹æ¥éªŒè¯è¿™äº›æ–¹æ³•ï¼ŒåŒ…æ‹¬ï¼šyieldã€waitã€notifyã€joinã€‚

### 1. yield

yield æ–¹æ³•è®©å‡ºCPUï¼Œ*ä½†ä¸ä¸€å®šï¼Œä¸€å®šè®©å‡ºï¼*ã€‚è¿™ç§å¯èƒ½ä¼šç”¨åœ¨ä¸€äº›åŒæ—¶å¯åŠ¨çš„çº¿ç¨‹ä¸­ï¼ŒæŒ‰ç…§ä¼˜å…ˆçº§ä¿è¯é‡è¦çº¿ç¨‹çš„æ‰§è¡Œï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ä¸€äº›ç‰¹æ®Šçš„ä¸šåŠ¡åœºæ™¯ï¼ˆä¾‹å¦‚è¿™ä¸ªçº¿ç¨‹å†…å®¹å¾ˆè€—æ—¶ï¼Œåˆä¸é‚£ä¹ˆé‡è¦ï¼Œå¯ä»¥æ”¾åœ¨åé¢ï¼‰ã€‚

ä¸ºäº†éªŒè¯è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬åšä¸€ä¸ªä¾‹å­ï¼šå¯åŠ¨50ä¸ªçº¿ç¨‹è¿›è¡Œï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½è¿›è¡Œ1000æ¬¡çš„åŠ å’Œè®¡ç®—ã€‚å…¶ä¸­10ä¸ªçº¿ç¨‹ä¼šæ‰§è¡Œè®©å‡ºCPUæ“ä½œã€‚**é‚£ä¹ˆ**ï¼Œå¦‚æœè®©å‡ºCPUé‚£10ä¸ªçº¿ç¨‹çš„è®¡ç®—åŠ å’Œæ—¶é—´éƒ½æ¯”è¾ƒé•¿ï¼Œè¯´æ˜ç¡®å®åœ¨è¿›è¡Œè®©å‡ºæ“ä½œã€‚

**æ¡ˆä¾‹ä»£ç **

```java
private static volatile Map<String, AtomicInteger> count = new ConcurrentHashMap<>();
static class Y implements Runnable {
    private String name;
    private boolean isYield;
    public Y(String name, boolean isYield) {
        this.name = name;
        this.isYield = isYield;
    }
    @Override
    public void run() {
        long l = System.currentTimeMillis();
        for (int i = 0; i < 1000; i++) {
            if (isYield) Thread.yield();
            AtomicInteger atomicInteger = count.get(name);
            if (null == atomicInteger) {
                count.put(name, new AtomicInteger(1));
                continue;
            }
            atomicInteger.addAndGet(1);
            count.put(name, atomicInteger);
        }
        System.out.println("çº¿ç¨‹ç¼–å·ï¼š" + name + " æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š" + (System.currentTimeMillis() - l) + " (æ¯«ç§’)" + (isYield ? "è®©å‡ºCPU----------------------" : "ä¸è®©CPU"));
    }
}

public static void main(String[] args) {
    for (int i = 0; i < 50; i++) {
        if (i < 10) {
            new Thread(new Y(String.valueOf(i), true)).start();
            continue;
        }
        new Thread(new Y(String.valueOf(i), false)).start();
    }
}
```

**æµ‹è¯•ç»“æœ**

```java
çº¿ç¨‹ç¼–å·ï¼š10 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š2 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š11 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š2 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š15 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š1 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š14 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š1 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š19 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š1 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š18 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š1 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š22 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š0 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š26 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š0 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š27 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š1 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š30 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š0 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š31 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š0 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š34 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š1 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š12 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š1 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š16 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š1 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š13 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š1 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š17 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š1 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š20 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š0 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š23 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š0 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š21 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š0 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š25 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š1 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š24 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š1 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š28 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š0 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š38 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š0 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š39 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š0 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š37 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š1 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š40 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š0 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š44 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š0 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š36 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š1 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š42 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š1 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š45 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š1 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š43 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š1 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š46 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š0 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š47 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š0 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š35 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š0 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š33 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š0 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š32 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š0 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š41 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š0 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š48 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š1 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š6 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š15 (æ¯«ç§’)è®©å‡ºCPU----------------------
çº¿ç¨‹ç¼–å·ï¼š7 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š15 (æ¯«ç§’)è®©å‡ºCPU----------------------
çº¿ç¨‹ç¼–å·ï¼š49 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š2 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š29 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š1 (æ¯«ç§’)ä¸è®©CPU
çº¿ç¨‹ç¼–å·ï¼š2 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š17 (æ¯«ç§’)è®©å‡ºCPU----------------------
çº¿ç¨‹ç¼–å·ï¼š1 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š11 (æ¯«ç§’)è®©å‡ºCPU----------------------
çº¿ç¨‹ç¼–å·ï¼š4 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š15 (æ¯«ç§’)è®©å‡ºCPU----------------------
çº¿ç¨‹ç¼–å·ï¼š8 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š12 (æ¯«ç§’)è®©å‡ºCPU----------------------
çº¿ç¨‹ç¼–å·ï¼š5 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š12 (æ¯«ç§’)è®©å‡ºCPU----------------------
çº¿ç¨‹ç¼–å·ï¼š9 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š12 (æ¯«ç§’)è®©å‡ºCPU----------------------
çº¿ç¨‹ç¼–å·ï¼š0 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š21 (æ¯«ç§’)è®©å‡ºCPU----------------------
çº¿ç¨‹ç¼–å·ï¼š3 æ‰§è¡Œå®Œæˆè€—æ—¶ï¼š21 (æ¯«ç§’)è®©å‡ºCPU----------------------
```

- ä»æµ‹è¯•ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œé‚£äº›è®©å‡º CPU çš„ï¼Œæ‰§è¡Œå®Œè®¡ç®—å·²ç»åœ¨10æ¯«ç§’ä»¥ä¸Šï¼Œè¯´æ˜æˆ‘ä»¬çš„æµ‹è¯•æ˜¯æ•ˆæœçš„ã€‚

### 2. wait & notify

wait å’Œ notify/nofityallï¼Œæ˜¯ä¸€å¯¹æ–¹æ³•ï¼Œæœ‰ä¸€ä¸ªç­‰å¾…ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªå«é†’ï¼Œå¦åˆ™ç¨‹åºå°±å¤¯åœ¨é‚£ä¸åŠ¨äº†ã€‚å…³äºè¿™éƒ¨åˆ†ä¼šä½¿ç”¨åˆ°çš„ `synchronized` åœ¨ä¹‹å‰å°å‚…å“¥æœ‰æ·±å…¥çš„æºç åˆ†æï¼Œè®²åˆ°å®ƒæ˜¯æ€ä¹ˆåŠ é”åœ¨å¯¹è±¡å¤´çš„ï¼Œå¦‚æœä½ å¿˜è®°äº†å¯ä»¥ç¿»ç¿»çœ‹ [ã€Šsynchronized è§£æ¯’ï¼Œå‰–ææºç æ·±åº¦åˆ†æï¼ã€‹](https://bugstack.cn/interview/2020/10/28/%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C-%E7%AC%AC15%E7%AF%87-%E7%A0%81%E5%86%9C%E4%BC%9A%E9%94%81-synchronized-%E8%A7%A3%E6%AF%92-%E5%89%96%E6%9E%90%E6%BA%90%E7%A0%81%E6%B7%B1%E5%BA%A6%E5%88%86%E6%9E%90.html)

æ¥ä¸‹æ¥æˆ‘ä»¬æ¨¡æ‹Ÿé¹¿é¼è®°Â·ä¸½æ˜¥é™¢ï¼Œæ¸…å€Œå–èŒ¶åŸè¯—èŠé£æœˆæ—¥å¸¸ã€‚å½“æœ‰è¾¾å®˜è´µäººæ¥æ—¶ï¼Œéœ€è¦åˆ†é…æ¸…å€Œç»™å¤§è€çˆ·ã€‚ä¸­é—´ä¼šæœ‰ä¸€äº›ç­‰å¾…ã€å«é†’æ“ä½œã€‚*åªä¸ºè®©ä½ æ›´å¥½çš„è®°ä½è¿™æ ·çš„æ¡ˆä¾‹ï¼Œä¸è¦æƒ³æ­ªå–½ã€‚æ¸…å€Œäººå³æ˜¯åªå–è‰ºæ¬¢åœºäººï¼Œå–Šéº¦çš„ã€‚*

**æ¡ˆä¾‹ä»£ç **

```java
public class ä¸½æ˜¥é™¢ {

    public static void main(String[] args) {
        è€é¸¨ é¸¨å­ = new è€é¸¨();

        æ¸…å€Œ miss = new æ¸…å€Œ(é¸¨å­);
        å®¢å®˜ guest = new å®¢å®˜(é¸¨å­);

        Thread t_miss = new Thread(miss);
        Thread t_guest = new Thread(guest);

        t_miss.start();
        t_guest.start();
    }

}

class æ¸…å€Œ implements Runnable {

    è€é¸¨ é¸¨å­;

    public æ¸…å€Œ(è€é¸¨ é¸¨å­) {
        this.é¸¨å­ = é¸¨å­;
    }

    @Override
    public void run() {
        int i = 1;
        while (true) {
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e1) {
                e1.printStackTrace();
            }
            if (i == 1) {
                try {
                    é¸¨å­.åœ¨å²—æ¸…å€Œ("è‹ç”°é‡å­", "500 æ—¥å…ƒ");
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            } else {
                try {
                    é¸¨å­.åœ¨å²—æ¸…å€Œ("èŠ±ç”°å²—å­", "800 æ—¥å…ƒ");
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
            i = (i + 1) % 2;
        }
    }

}

class å®¢å®˜ implements Runnable {

    è€é¸¨ é¸¨å­;

    public å®¢å®˜(è€é¸¨ é¸¨å­) {
        this.é¸¨å­ = é¸¨å­;
    }

    @Override
    public void run() {
        while (true) {
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e1) {
                e1.printStackTrace();
            }
            try {
                é¸¨å­.å–èŒ¶åŸè¯—èŠé£æœˆ();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }

}

class è€é¸¨ {

    private String æ¸…å€Œ = null;
    private String price = null;
    private boolean å·¥ä½œçŠ¶æ€ = true;

    public synchronized void åœ¨å²—æ¸…å€Œ(String æ¸…å€Œ, String price) throws InterruptedException {
        if (!å·¥ä½œçŠ¶æ€)
            wait();//ç­‰å¾…
        this.æ¸…å€Œ = æ¸…å€Œ;
        this.price = price;
        å·¥ä½œçŠ¶æ€ = false;
        notify();//å«é†’
    }

    public synchronized void å–èŒ¶åŸè¯—èŠé£æœˆ() throws InterruptedException {
        if (å·¥ä½œçŠ¶æ€)
            wait();//ç­‰å¾…
        System.out.println("èŠé£æœˆï¼š" + æ¸…å€Œ);
        System.out.println("èŒ¶æ°´è´¹ï¼š" + price);
        System.out.println("  " + "  " + "  " + "  " + "  " + "  " + "  " + "  " + "  " + "  " + æ¸…å€Œ + "å®Œäº‹" + "å‡†å¤‡ ... ...");
        System.out.println("****************************************");
        å·¥ä½œçŠ¶æ€ = true;
        notify();//å«é†’
    }

}
```

**æµ‹è¯•ç»“æœ**

```java
èŠé£æœˆï¼šè‹ç”°é‡å­
èŒ¶æ°´è´¹ï¼š500 æ—¥å…ƒ
                    è‹ç”°é‡å­å®Œäº‹å‡†å¤‡ ... ...
****************************************
èŠé£æœˆï¼šèŠ±ç”°å²—å­
èŒ¶æ°´è´¹ï¼š800 æ—¥å…ƒ
                    èŠ±ç”°å²—å­å®Œäº‹å‡†å¤‡ ... ...
****************************************
èŠé£æœˆï¼šè‹ç”°é‡å­
èŒ¶æ°´è´¹ï¼š500 æ—¥å…ƒ
                    è‹ç”°é‡å­å®Œäº‹å‡†å¤‡ ... ...
****************************************

...
```

- æ•ˆæœæ•ˆæœä¸»è¦ä½“ç° waitã€notifyï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•çš„ä½¿ç”¨ã€‚*æˆ‘ç›¸ä¿¡ä½ ä¸€å®šèƒ½è®°ä½è¿™ä¸ªä¾‹å­ï¼*

### 3. join

join æ˜¯ä¸¤ä¸ªçº¿ç¨‹çš„åˆå¹¶å—ï¼Ÿä¸æ˜¯çš„ï¼

join æ˜¯è®©çº¿ç¨‹è¿›å…¥ wait ï¼Œå½“çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åï¼Œä¼šåœ¨JVMæºç ä¸­æ‰¾åˆ°ï¼Œå®ƒæ‰§è¡Œå®Œæ¯•åï¼Œå…¶å®æ‰§è¡Œnotifyï¼Œä¹Ÿå°±æ˜¯ `ç­‰å¾…` å’Œ `å«é†’` æ“ä½œã€‚

**æºç **ï¼š[jdk8u_hotspot/blob/master/src/share/vm/runtime/thread.cpp](https://github.com/JetBrains/jdk8u_hotspot/blob/master/src/share/vm/runtime/thread.cpp)

```c++
void JavaThread::exit(bool destroy_vm, ExitType exit_type) {
	// Notify waiters on thread object. This has to be done after exit() is called
	// on the thread (if the thread is the last thread in a daemon ThreadGroup the
	// group should have the destroyed bit set before waiters are notified).
	ensure_join(this);
}
```

```c++
static void ensure_join(JavaThread* thread) {
  // å«é†’
  java_lang_Thread::set_thread(threadObj(), NULL);
  lock.notify_all(thread);
}
```

å¥½çš„ï¼Œå°±æ˜¯è¿™é‡Œï¼`lock.notify_all(thread)`ï¼Œæ‰§è¡Œåˆ°è¿™ï¼Œå°±å¯¹ä¸Šäº†ã€‚

**æ¡ˆä¾‹ä»£ç **

```java
Thread thread = new Thread(() -> {
    System.out.println("thread before");
    try {
        Thread.sleep(3000);
    } catch (Exception e) {
        e.printStackTrace();
    }
    System.out.println("thread after");
});
thread.start();
System.out.println("main beginï¼");
thread.join();
System.out.println("main endï¼");
```

**æµ‹è¯•ç»“æœ**

```java
main beginï¼
thread before
thread after
main endï¼

Process finished with exit code 0
```

é¦–å…ˆjoin() æ˜¯ä¸€ä¸ªsynchronizedæ–¹æ³•ï¼Œ é‡Œé¢è°ƒç”¨äº†wait()ï¼Œè¿™ä¸ªè¿‡ç¨‹çš„ç›®çš„æ˜¯è®©æŒæœ‰è¿™ä¸ªåŒæ­¥é”çš„çº¿ç¨‹è¿›å…¥ç­‰å¾…ï¼Œé‚£ä¹ˆè°æŒæœ‰äº†è¿™ä¸ªåŒæ­¥é”å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä¸»çº¿ç¨‹ï¼Œå› ä¸ºä¸»çº¿ç¨‹è°ƒç”¨äº†threadA.join()æ–¹æ³•ï¼Œç›¸å½“äºåœ¨threadA.join()ä»£ç è¿™å—å†™äº†ä¸€ä¸ªåŒæ­¥ä»£ç å—ï¼Œè°å»æ‰§è¡Œäº†è¿™æ®µä»£ç å‘¢ï¼Œæ˜¯ä¸»çº¿ç¨‹ï¼Œæ‰€ä»¥ä¸»çº¿ç¨‹è¢«wait()äº†ã€‚ç„¶ååœ¨å­çº¿ç¨‹threadAæ‰§è¡Œå®Œæ¯•ä¹‹åï¼ŒJVMä¼šè°ƒç”¨lock.notify_all(thread);å”¤é†’æŒæœ‰threadAè¿™ä¸ªå¯¹è±¡é”çš„çº¿ç¨‹ï¼Œä¹Ÿå°±æ˜¯ä¸»çº¿ç¨‹ï¼Œä¼šç»§ç»­æ‰§è¡Œã€‚

- è¿™éƒ¨åˆ†éªŒè¯çš„ä¸»è¦ä½“ç°å°±æ˜¯åŠ äº† `thread.join()` åï¼Œä¼šå½±å“åˆ°è¾“å‡ºç»“æœã€‚å¦‚æœä¸åŠ ï¼Œ`main endï¼` ä¼šä¼˜å…ˆ `thread after` æå‰æ‰“å°å‡ºæ¥ã€‚
- **join() æ˜¯ä¸€ä¸ª synchronized æ–¹æ³•**ï¼Œé‡Œé¢è°ƒç”¨äº† wait() æ–¹æ³•ï¼Œè®©æŒæœ‰å½“å‰åŒæ­¥é”çš„çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯ä¸»çº¿ç¨‹ã€‚å½“å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åï¼Œæˆ‘ä»¬ä»æºç ä¸­å¯ä»¥çœ‹åˆ° JVM è°ƒç”¨äº† lock.notify_all(thread) æ‰€ä»¥å”¤é†’äº†ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œã€‚

## å…­ã€æ€»ç»“

- çº¿ç¨‹çŠ¶æ€å’ŒçŠ¶æ€çš„è½¬æ¢ä¹Ÿæ˜¯é¢è¯•ä¸­å¿…é—®çš„é—®é¢˜ï¼Œä½†é™¤äº†é¢è¯•æ˜¯æˆ‘ä»¬è‡ªå·±åœ¨å¼€å‘ä¸­ï¼Œå¦‚æœçœŸçš„ä½¿ç”¨çº¿ç¨‹ï¼Œæ˜¯éå¸¸æœ‰å¿…è¦äº†è§£çº¿ç¨‹çŠ¶æ€æ˜¯å¦‚ä½•è½¬æ¢çš„ã€‚*æ¨¡æ¨¡ç³Šç³Šçš„ä½¿ç”¨ï¼Œæ€»ä¼šè§‰å¾—æ‹…å¿ƒï¼Œé‚£ä¹ˆä½ æ˜¯ä¸ªå¥½ç¨‹åºå‘˜ï¼*
- çº¿ç¨‹çš„ä¸€äº›æ·±å…¥å­¦ä¹ éƒ½æ˜¯åœ¨è°ƒç”¨æœ¬åœ°æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯éœ€è¦äº†è§£åˆ°JVMå±‚é¢ï¼Œæ‰èƒ½æ›´åŠ æ·±åˆ»çš„è§åˆ°c++ä»£ç æ˜¯å¦‚ä½•å®ç°è¿™éƒ¨åˆ†é€»è¾‘çš„ã€‚
- åœ¨ä½¿ç”¨çº¿ç¨‹çš„æ—¶å€™ä¸€å®šè¦è®©è‡ªå·±æœ‰ä¸€ä¸ªç±»ä¼¼å¤šæ ¸çš„è„‘å­ï¼Œ*çº¿ç¨‹ä¸€èµ·ã€ç”Ÿæ­»ç”±ä½ ï¼*æœ¬ç« èŠ‚å°±æ‰¯åˆ°è¿™äº†ï¼Œå¾ˆå¤šçš„çŸ¥è¯†éƒ½æ˜¯ä¸ºäº†æ•´å¥—å†…å®¹ä½“ç³»çš„å…¨é¢ï¼Œä¸ºåç»­ä»‹ç»å…¶ä»–çŸ¥è¯†æ‰“ä¸‹æ ¹åŸºã€‚æ„Ÿè°¢ï¼

## ä¸ƒã€ç³»åˆ—æ¨è

- [BATJTMDï¼Œå¤§å‚æ‹›è˜ï¼Œéƒ½æ‹›ä»€ä¹ˆæ ·Javaç¨‹åºå‘˜ï¼Ÿ](https://bugstack.cn/itstack-code-life/2020/11/15/BATJTMD-%E5%A4%A7%E5%8E%82%E6%8B%9B%E8%81%98-%E9%83%BD%E6%8B%9B%E4%BB%80%E4%B9%88%E6%A0%B7Java%E7%A8%8B%E5%BA%8F%E5%91%98.html)
- [Thread.start() ï¼Œå®ƒæ˜¯æ€ä¹ˆè®©çº¿ç¨‹å¯åŠ¨çš„å‘¢ï¼Ÿ](https://bugstack.cn/interview/2020/11/25/%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C-%E7%AC%AC19%E7%AF%87-Thread.start()-%E5%AE%83%E6%98%AF%E6%80%8E%E4%B9%88%E8%AE%A9%E7%BA%BF%E7%A8%8B%E5%90%AF%E5%8A%A8%E7%9A%84%E5%91%A2.html)
- [synchronized è§£æ¯’ï¼Œå‰–ææºç æ·±åº¦åˆ†æï¼](https://bugstack.cn/interview/2020/10/28/%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C-%E7%AC%AC15%E7%AF%87-%E7%A0%81%E5%86%9C%E4%BC%9A%E9%94%81-synchronized-%E8%A7%A3%E6%AF%92-%E5%89%96%E6%9E%90%E6%BA%90%E7%A0%81%E6%B7%B1%E5%BA%A6%E5%88%86%E6%9E%90.html)
- [volatile æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§ï¼Ÿæ²¡æœ‰ volatile ä¸€å®šä¸å¯è§å—ï¼Ÿ](https://bugstack.cn/interview/2020/10/21/%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C-%E7%AC%AC14%E7%AF%87-volatile-%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%86%85%E5%AD%98%E5%8F%AF%E8%A7%81-%E6%B2%A1%E6%9C%89-volatile-%E4%B8%80%E5%AE%9A%E4%B8%8D%E5%8F%AF%E8%A7%81%E5%90%97.html)
- [é¹¿é¼è®° Â· éŸ¦å°å®ï¼Œä¸½æ˜¥é™¢ã€å¤©åœ°ä¼šã€å…¥çš‡å®«ç­‰äº”ä¸ªåœºæ™¯ï¼Œæ­é…ä¸åŒå‰§æƒ…è®²è§£å¤šçº¿ç¨‹å’Œé”ï¼ŒçœŸé¦™ï¼](https://bugstack.cn/itstack-code-life/2020/11/22/%E9%B9%BF%E9%BC%8E%E8%AE%B0-%E9%9F%A6%E5%B0%8F%E5%AE%9D-%E4%B8%BD%E6%98%A5%E9%99%A2-%E5%A4%A9%E5%9C%B0%E4%BC%9A-%E5%85%A5%E7%9A%87%E5%AE%AB%E7%AD%89%E4%BA%94%E4%B8%AA%E5%9C%BA%E6%99%AF-%E6%90%AD%E9%85%8D%E4%B8%8D%E5%90%8C%E5%89%A7%E6%83%85%E8%AE%B2%E8%A7%A3%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%92%8C%E9%94%81-%E7%9C%9F%E9%A6%99.html)