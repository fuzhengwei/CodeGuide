---
title: 【更】第1-1节：网关需求分析
pay: https://t.zsxq.com/f6fiZ
---

# 《AI MCP Gateway 网关服务系统》第1-1节：网关需求分析

作者：小傅哥
<br/>博客：[https://bugstack.cn](https://bugstack.cn)
<br/>视频：[https://t.zsxq.com/i8tV1](https://t.zsxq.com/i8tV1)

>大家好，我是技术UP主小傅哥。

今天是我们 **《AI MCP Gateway 网关服务系统》** 项目学习的第1节课程，小傅哥会带着大家，以互联网公司正规的承接产品需求到开发部署上线的流程，带着大家以第一主人公视角的方式进行学习。这样既可以保证你学习到项目内容，也能了解到公司里正规的开发模式，以后进入到公司也可以很好的融入团队，承接项目需求。加油💪🏻！让我们开启新项目之旅！

## 一、本章诉求

站在产品视角，分析 AI MCP Gateway 网关服务系统，这样一个产品功能需求的背景、诉求和目的。

需求是怎么来的呢？

作为互联网公司里的研发，我们通常都是从业务产品经理那承接需求，评审 PRD 文档，之后研发进行详细设计，给出设计文档在评审，评审通过后开始进入编码开发，以及推进后续的测试和上线。

那么，还有一类需求是不需要业务产品经理的，往往是纯技术产品经理或者研发和技术一起驱动的，这类的需求包括，系统的重构、组件的设计、框架的升级等。他们虽然也是需求，但不直接影响到产品经理的业务需求，所以往往由技术产品或者研发推动。

所以，像是 AI MCP Gateway 网关服务系统，是附属于 AI 应用开发部门的项目，一般是由 AI 技术产品经理推动，这类产品经理，往往比纯业务产品经理要多一些技术储备的。虽然他们编码不熟练，但对技术是有不错的储备，可以很好的规划和推进技术产品。

## 二、项目背景

MCP 协议的定义和发布，改变了我们使用 AI 的形态。

LLM 大模型第一次以 chatgpt 问世时，就足以震撼到我们。它具备各行各业的知识储备，可以识别人类语言，可以完成逻辑关系推理。在很长一段时间里，我们都是把问题抛给大模型，大模型回答后，我们在根据它的回复，复制粘贴到具体的场景进行处理。

但大模型不能无中生有，不能根据你的提问，直接帮你完成最终的处理。如；帮我查询最近一天内数据库账户表写入的数据量，这是做不到的，因为大模型并不能直接连接到我们的数据库或者其他任何服务。

在 2023 年前，如果想让大模型和程序代码互动，我们经常做的方式是写提示词，告诉大模型我的程序具备什么样的能力，有什么样的接口格式，你需要分析我的问题，并按照最终的执行给出结构化参数。json 格式为 `{"function":"query_user_account","arguments":{"sc":"渠道值"}}` 之后再根据大模型的结果调用对应的程序方法。不过以上方式执行起来的误差较大，经常是需要慢慢微调提示词。

到了 2023年6月，OpenAI 发布 gpt-3.5-turbo-0613 模型，给 API 的调用提供了 Function Calling 的能力，只需要在请求 API 的时候传入 functions 参数，告知大模型本地有哪些函数方法可以被调用使用即可。到了 2023年11月，gpt-3.5-turbo-1106 发布，这回开始支持 tools 函数，我们可以在提问的时候，进行网络检索，天气对接。但是这些功能代码， 都被嵌入到大模型调用中，编写起来耦合在一块，维护起来很麻烦。

直至到2024年11月，Anthropic 发布了 MCP 协议，将 tools 的封装单独抽离到独立的服务，这种服务称之为 MCP 服务，然后通过远程协议的模式提供给大模型调用。而 MCP 协议的主要作用是将服务转换为可以被大模型识别的格式结构（后面章节会细分析 MCP 协议）。

**MCP 为何重要？**

- MCP 在构建或与 AI 应用程序或代理集成时减少了开发时间和复杂性。
- MCP 提供对数据源、工具和应用程序生态系统的访问，这将增强功能并改善最终用户体验。
- MCP 可产生功能更强大的 AI 应用程序或代理，它们可以在必要时访问您的数据并代表您采取行动。

<div align="center">
	<img src="https://bugstack.cn/images/article/project/ai-mcp-gateway/ai-mcp-gateway-1-1-01.png" width="600px"/>
</div>

自从有了 MCP 协议以后，市面上开始出现各类的 AI Agent 智能体服务，如被大家熟知的 `Dify`、`Corz`、`Trae.ai/Cursor` 等。这些都是通用的智能体服务，可以解决市面上大部分通用场景问题。

到这以后，各个公司开启了自己的 AI Agent 智能体实现，对公司里自身业务场景进行提效。如账户服务、交易订单、计息计罚、还款计划等，做成智能客户和AI运营工具，都可以为企业提效。那么这里就有一个问题，这些接口想被大模型识别，就要开发为 MCP 协议服务，只有 MCP 协议才能被大模型识别的协议，公司里的各项服务要想被大模型调用，就要编写为一个个的 MCP Server 服务端，这个工作量是非常大的。

<div align="center">
	<img src="https://bugstack.cn/images/article/project/ai-mcp-gateway/ai-mcp-gateway-1-1-02.png" width="750px"/>
</div>

所以，为了解决需要把大量接口开发成 MCP 协议服务的工作，我们可以设计一个 MCP 网关服务系统。它的核心工作原理在于，设计实现一套 MCP 协议的统一服务入口，管理和使用动态化注册的 HTTP/RPC 服务接口。MCP 协议的接口会被接入 MCP 服务的大模型，进行调用，核心过程包括；`建立sse连接创建会话ID`、`初始化服务`、`获取 tools 工具列表`、`响应工具调用`。这些内容，小傅哥会在后续的协议分析中带着大家学习。

综上，当我们有了一套 MCP 网关以后，就可以把我们各项所需的接口，快速🔜转换为 MCP 协议，配置给 AI Agent 智能体系统进行使用啦。这也是我们本次课程的最终目的。


