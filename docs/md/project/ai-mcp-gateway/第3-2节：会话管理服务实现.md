---
title: 【更】第3-2节：会话管理服务实现
pay: https://t.zsxq.com/c0WoQ
---

# 《AI MCP Gateway 网关服务系统》第3-2节：会话管理服务实现

作者：小傅哥
<br/>博客：[https://bugstack.cn](https://bugstack.cn)
<br/>视频：[https://t.zsxq.com/nPibY](https://t.zsxq.com/nPibY)

>大家好，我是技术UP主小傅哥。

## 一、本章诉求

从本章节开始，我们会以**第1-2节：系统建模设计**为标准，进行各个模块的逻辑编码实现。包括；协议、鉴权、会话等。这部分内容完成后，在定义 api 接口，以及在 trigger 的 http 下实现接口，以及调用 case 层，处理 domain 领域的编排。整个实现过程是逐步有`骨架`，之后陆续填充完善的过程，你只要跟住理解清楚了，就可以很容易的完成全部编码。

**温馨提示**：尽量不要完全对照视频写代码，可以是先看视频，之后对照工程中分支代码变化（前面一节教程有告诉大家怎么对比），之后来实现功能。这样你会注意到更多的细节。

## 二、功能设计

如图，会话领域服务功能；

<div align="center">
	<img src="https://bugstack.cn/images/article/project/ai-mcp-gateway/ai-mcp-gateway-3-2-01.png" width="650px"/>
</div>

- 首先，我们是把一次连接请求作为一次会话来看。比如数据库查询会话、MyBatis 操作会话、信贷交易会话，会话的作用在于以统一的标识记录用户的操作行为，根据你的会话ID，可以找到你再次过程中所有的行为记录。
- 那么，在 AI MCP Gateway 中，也是按照 MCP 的协议方式，进行会话请求和消息处理。会话的作用是拿到后续处理消息的请求地址，这个地址是在会话请求阶段进行分配的。`在前面章节进行协议分析的时候，有讲解过 /mcp/message?sessionId= 的获取和使用`