---
title: 【更】第3-12节：鉴权功能领域服务
pay: https://t.zsxq.com/gLU35
---

# 《AI MCP Gateway 网关服务系统》第3-12节：鉴权功能领域服务

作者：小傅哥
<br/>博客：[https://bugstack.cn](https://bugstack.cn)
<br/>视频：[https://t.zsxq.com/I9dRQ](https://t.zsxq.com/I9dRQ)

>沉淀、分享、成长，让自己和他人都能有所收获！😄

## 一、本章诉求

设计 MCP 网关通信过程中的鉴权领域功能，包括；权限注册、请求限流、权限校验，这样3个主要的服务能力。领域层设计好后，就可以让 case 串联逻辑完成权限功能的使用了。

## 二、流程设计

如图，关于鉴权功能的领域处理；

<div align="center">
	<img src="https://bugstack.cn/images/article/project/ai-mcp-gateway/ai-mcp-gateway-3-12-01.png" width="950px"/>
</div>

- 首先，设计对鉴权领域的功能，校验阶段，判断当前用户传递 api_key 是否为配置的有效key，是否开启认证，是否在有效期。
- 之后，是注册 api_key 的处理，以及 api_key 的使用限流。数据库表中设计了，速率限制（次/小时） 可以按需设计你的。`这部分值在使用中会转换为多少秒一次，不过程序调用过程中，一般会达到毫秒。所以这个值可以适当放大`