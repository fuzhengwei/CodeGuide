---
title: 【更】第3-5节：消息协议处理案例
pay: https://t.zsxq.com/zUvnY
---

# 《AI MCP Gateway 网关服务系统》第3-5节：消息协议处理案例

作者：小傅哥
<br/>博客：[https://bugstack.cn](https://bugstack.cn)
<br/>视频：[https://t.zsxq.com/kWYZ9](https://t.zsxq.com/kWYZ9)

>沉淀、分享、成长，让自己和他人都能有所收获！😄

## 一、本章诉求

整个 MCP 协议的通信调用过程，需要先创建 session 会话，之后通过 handler 接收下发的指令方法，完成整个 MCP 的处理。那么，为了让大家更清楚我们所开发的东西，这里我们要先做一些流程案例，完成整个 MCP 服务的通信过程。后续在把案例的固定的代码，拆分到数据库配置实现。

## 二、功能设计

如图，会话消息响应设计；

<div align="center">
	<img src="https://bugstack.cn/images/article/project/ai-mcp-gateway/ai-mcp-gateway-3-5-01.png" width="800px"/>
</div>

- 首先，MCP 的通信过程，分为了初始化，后去工具列表，调用工具，以及资源和通知等。这里我们要硬编码返参实现这些方法。
- 之后，我们这里做一个单词小写转换大写的方法，让 AI 通过 MCP 调用到网关服务。做完这部分，你就能联想到，这里既然也可以硬编码操作，那么也可以调用 http、rpc，甚至是 mq，以及还可以是 rs232 串口通信，控制硬件设备。
- 注意，这一节的实现，还是从 trigger 触发器的 http 层，直接调用到 domain 领域方法，后续在从 case 层进行串联流程。