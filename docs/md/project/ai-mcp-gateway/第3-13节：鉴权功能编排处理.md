---
title: 【更】第3-13节：鉴权功能编排处理
pay: https://t.zsxq.com/wvb2k
---

# 《AI MCP Gateway 网关服务系统》第3-13节：鉴权功能编排处理

作者：小傅哥
<br/>博客：[https://bugstack.cn](https://bugstack.cn)
<br/>视频：[https://t.zsxq.com/wO9Cw](https://t.zsxq.com/wO9Cw)

>沉淀、分享、成长，让自己和他人都能有所收获！😄

## 一、本章诉求

在 case 的 mcp 模块下，将 auth 鉴权功能，串联到 `session 会话创建`、`message 消息处理中`去。让会话创建的时候可以校验 apiKey 的可用性，以及在消息处理中使用限流控制请求频次。

## 二、流程设计

如图，将鉴权功能串联到case编排中；

<div align="center">
	<img src="https://bugstack.cn/images/article/project/ai-mcp-gateway/ai-mcp-gateway-3-13-01.png" width="750px"/>
</div>

- 首先，是 api 入参这部分，都需要添加一个 `apiKey` 作为后缀的请求入参。会话请求阶段，是用户配置的请求连接传递进来的，而后续的消息处理部分，是我们在会话阶段把 apiKey 拼接到请求地址里去的。
- 之后，消息处理阶段，根据请求的 apiKey 做响应的限流处理。`基本你在各个官网申请的 mcp 服务，如百度搜索，都会让你创建一个 apiKey 针对你的这个 key 做一些列的流程处理。包括还会对你请求的数据做一个日志记录。`