---
title: 【更】第1-4节：升级网关库表
pay: https://t.zsxq.com/eeZPc
---

# 《AI MCP Gateway 网关服务系统》第1-4节：升级网关库表

作者：小傅哥
<br/>博客：[https://bugstack.cn](https://bugstack.cn)
<br/>视频：[https://t.zsxq.com/QCvqV](https://t.zsxq.com/QCvqV)

## 一、本章诉求

增强网关库表设计，拆分出工具（tool）、工具协议类型（http），让网关配置可以支持一个网关下多个工具，工具可以绑定和切换到不同的协议上（1:n）。细节上会在 tool 上设计协议类型，以便于扩展支持不同的协议对接。

## 二、升级设计

如图，从旧版库表升级到新版库表的结构；

<div align="center">
	<img src="https://bugstack.cn/images/article/project/ai-mcp-gateway/ai-mcp-gateway-1-4-01.png" width="600px"/>
</div>

- 旧版的设计中，是有一个 mcp_protocol_registry 协议注册，里面包含了工具描述和 http 接口协议信息。功能理解和编码实现上会比较直观，适合我们最开始让大家上手学习。
- 新版的设计中，拆分了 tool 工具表，也就是一个网关（mcp_gateway）可以对应多个 tool 表，tool 表可以单独配置对应的协议信息，可以是 http，也可以是其他的。后续扩展的时候增加新的表即可。