---
title: 【更】第2-20节：函数式数据缓存和降级到DB处理
pay: https://t.zsxq.com/pEE1a
---

# 《拼团交易平台系统》第2-20节：函数式数据缓存和降级到DB处理

作者：小傅哥
<br/>博客：[https://bugstack.cn](https://bugstack.cn)
<br/>视频：[https://t.zsxq.com/6IYJ6](https://t.zsxq.com/6IYJ6)

> 沉淀、分享、成长，让自己和他人都能有所收获！😄

## 一、本章诉求

以查询活动配置为场景，增加缓存处理。同时使用降级服务，控制走缓存还是走DB数据库。并把这部分功能统一抽象成函数式编程。

## 二、功能流程

如图，缓存和降级的使用；

<div align="center">
    <img src="https://bugstack.cn/images/article/project/group-buy-market/group-buy-market-2-20-01.png" width="550px">
</div>

- 首先，在日常的业务场景中，很多高频使用的数据，都是从 Redis 缓存获取。如果缓存不存在，才会从数据库读取。
- 之后，也会给缓存配置降级，如果缓存有问题，或者要做一些验证，必须从库里读取，则会动态的配置，让当时的操作从数据库获取。
- 注意，整个操作过程，缓存、降级、数据库，是一整条代码编程。如果在每个方法里都加这样的内容，就会显得很臃肿，所以一般会抽象一个方法，使用函数式的方式进行编程，降低使用者的编码量。**这个技巧很重要**