---
title: AliPay å•†å“ä¸‹å•æ”¯ä»˜åœºæ™¯
lock: need
---

# ã€å°åœºæ™¯è®­ç»ƒè¥ã€‘å•†å“ä¸‹å•æ”¯ä»˜åœºæ™¯ï¼ŒDDDè®¾è®¡å®ç°ã€Œæ”¯ä»˜å®æ²™ç®±ã€

ä½œè€…ï¼šå°å‚…å“¥
<br/>åšå®¢ï¼š[https://bugstack.cn](https://bugstack.cn)

>æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„

<iframe id="B-Video" src="//player.bilibili.com/player.html?aid=922461679&bvid=BV1ku4y1M7E1&cid=1372506705&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="480"> </iframe>

å“ˆå–½ï¼Œå¤§å®¶ä¼™æˆ‘æ˜¯æŠ€æœ¯UPä¸»å°å‚…å“¥ã€‚

ç»å†äº†åŠå¹´å¤šğŸ’ï¼Œ**ã€ŠDDD æŠ€æœ¯å°å†Œã€‹** æ•´ä¸ªç³»åˆ—å·²å®Œæˆ`ç†è®ºçŸ¥è¯†`ä¸`æŠ€æœ¯å®è·µ`ä¸¤ä¸ªéƒ¨åˆ†ï¼Œæ¥ä¸‹æ¥å°å‚…å“¥å°†å¸¦ç€å°ä¼™ä¼´ä»¬å¼€å¯`DDD æŠ€æœ¯å°å†Œä¹‹åœºæ™¯æ–¹æ¡ˆ`çš„å­¦ä¹ æ—…ç¨‹ã€‚â€”â€” å­¦ç†è®ºã€ç»ƒæŠ€æœ¯ã€æ‰¾åœºæ™¯é”»ç‚¼ï¼Œç»¼åˆçš„å­¦ä¹ ä¼šå¿«é€Ÿçš„æé«˜ç¼–ç¨‹æŠ€æœ¯ã€‚

<div align="center">
    <img src="https://bugstack.cn/images/system/zsxq/xingqiu-231018-01.png?raw=true" width="650px">
</div>

æŠ€æœ¯ï¼Œæ˜¯æ‰¿æ¥ä¸šåŠ¡éœ€æ±‚æä¾›è§£å†³æ–¹æ¡ˆçš„ç»¼åˆè¿ç”¨ï¼Œè€Œä»å®é™…éœ€æ±‚ä¸­æ‘˜å–å‡ºæ¥çš„å°åœºæ™¯å­¦ä¹ ï¼ŒåŒ…æ‹¬ï¼›æ”¯ä»˜ã€çŸ­ä¿¡ã€åœ°å›¾ã€äººè„¸ã€è§„åˆ™ã€çŸ­ä¿¡çŒ«ã€ä¸‰æ–¹ç™»å½•ç­‰ï¼Œéƒ½å¯ä»¥éå¸¸å¥½çš„é”»ç‚¼æ€ç»´ï¼Œæé«˜ç¼–ç èƒ½åŠ›ã€‚

é‚£ä¹ˆï¼Œæœ¬èŠ‚æˆ‘ä»¬å…ˆæ¥å®Œæˆä¸‹æ”¯ä»˜åœºæ™¯åœ¨ DDD é¢†åŸŸé©±åŠ¨ä¸‹çš„åœºæ™¯è®¾è®¡å’Œç¼–ç å®ç°ã€‚è¿™é‡Œé€‰ç”¨æ”¯ä»˜å®çš„æ²™ç®±æ”¯ä»˜ï¼Œå› ä¸ºè¿™ä¸ªæ”¯ä»˜å¯¹æ¥éå¸¸å¥½ç”³è¯·ï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿å¤§å®¶ä¸€èµ·å‚ä¸å­¦ä¹ ã€‚

>æ–‡æœ«æä¾›äº†ã€Œæ˜Ÿçƒï¼šç å†œä¼šé”ã€ä¼˜æƒ åŠ å…¥å­¦ä¹ æ–¹å¼ï¼Œä¸ä»…å¯ä»¥å­¦ä¹ ç¢ç‰‡åŒ–çš„å³ä½¿çŸ¥è¯†ï¼Œè¿˜å¯ä»¥ç»¼åˆé”»ç‚¼å®æˆ˜é¡¹ç›®ã€‚é¡¹ç›®æ¼”ç¤ºåœ°å€ï¼š[https://gaga.plus](https://gaga.plus)

## ä¸€ã€åœºæ™¯è¯´æ˜

åœ¨æœ¬èŠ‚å°å‚…å“¥ä¼šå¸¦ç€å¤§å®¶å…ˆä»¥æœ€ç®€å•çš„æ–¹å¼å®Œæˆå¯¹æ¥æ”¯ä»˜éªŒè¯ã€‚å†ä»¥å•†å“ä¸‹å•æ¨¡å‹ï¼Œé€šè¿‡ DDD çš„é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼Œæœ€ç»ˆå®Œæˆå¯¹`æ”¯ä»˜å®æ²™ç®±`çš„å¯¹æ¥ä½¿ç”¨ã€‚ã€å¦‚å›¾ã€‘

<div align="center">
    <img src="https://bugstack.cn/images/article/project/ddd-scene-solution/alipay-sandbox-02.png?raw=true" width="650px">
</div>

- åŒ…æ‹¬ï¼›å•†åŸã€å‡ºè¡Œã€å¤–å–ç­‰åœºæ™¯ï¼Œå‡¡æ˜¯å¯¹æ¥æ”¯ä»˜ï¼Œéƒ½ä¼šå…ˆåˆ›å»ºä¸€æ¡è®¢å•ã€‚åœ¨åŸºäºè®¢å•çš„å”¯ä¸€IDåˆ›å»ºæ”¯ä»˜å•ã€‚è¿™æ˜¯å› ä¸ºè°ƒç”¨çš„æ”¯ä»˜éƒ½æ˜¯å¤–éƒ¨çš„æ¥å£æä¾›ï¼Œæ²¡æ³•å’Œè‡ªå·±æµç¨‹åšä¸€ä¸ªç»Ÿä¸€çš„äº‹åŠ¡ã€‚é‚£ä¹ˆè¿™é‡Œå°±éœ€è¦è€ƒè™‘æœ€ç»ˆä¸€è‡´æ€§é—®é¢˜ï¼Œè¦å¹‚ç­‰å¯é‡è¯•ã€‚â€”â€” æ‰€ä»¥æœ‰è¿™æ ·çš„æµç¨‹ï¼Œè°ƒå•ä¹Ÿå¯ä»¥è¡¥å¿ã€‚
- å•†å“æ”¯ä»˜å®Œæˆåï¼Œä¼šæ”¶åˆ°æ”¯ä»˜å®Œæˆçš„å›è°ƒã€‚å›è°ƒè°ƒç”¨ä½ æä¾›å¥½çš„ä¸€ä¸ªæ¥å£ï¼Œç”¨äºæ¥æ”¶æ”¯ä»˜å®Œæˆçš„é€šçŸ¥ã€‚è¿™ä¸ªé€šçŸ¥ç”¨äºå˜æ›´æ”¯ä»˜å•çš„çŠ¶æ€ï¼Œä»¥åŠè‡ªå·±ç³»ç»Ÿå†…å†å‘ä¸€ä¸ªå¼‚æ­¥çš„MQæ¶ˆæ¯ï¼Œç”¨äºå¤„ç†åç»­çš„æµç¨‹ã€‚
- æ‰€æœ‰çš„è¿™äº›æµç¨‹èŠ‚ç‚¹ï¼Œæ”¯ä»˜æ‰å•ã€å›è°ƒå¤±è´¥ã€MQå‘é€å¤±è´¥ï¼Œåœ¨å„ä¸ªæµç¨‹èŠ‚ç‚¹éƒ½æœ‰å”¯ä¸€IDï¼Œæ‰€ä»¥éƒ½å¯ä»¥ç”¨å®šæ—¶ä»»åŠ¡è¡¥å¿ã€‚

## äºŒã€æ”¯ä»˜ç”³è¯· - Alipay æ²™ç®±æ”¯ä»˜

### 1. æ²™ç®±åº”ç”¨

**æ”¯ä»˜å®|å¼€æ”¾å¹³å°** åœ°å€ï¼š[https://open.alipay.com/develop/manage](https://open.alipay.com/develop/manage) - `ä»»ä½•äººéƒ½å¯ä»¥ç”³è¯·ï¼Œä¸è¦ä¼ä¸šèµ„è´¨`

<div align="center">
    <img src="https://bugstack.cn/images/article/project/ddd-scene-solution/alipay-sandbox-03.png?raw=true" width="750px">
</div>

<div align="center">
    <img src="https://bugstack.cn/images/article/project/ddd-scene-solution/alipay-sandbox-04.png?raw=true" width="750px">
</div>
- å¼€å¯æ²™ç®±åº”ç”¨ä»¥åï¼Œè¿˜éœ€è¦ä¸‹è½½æ”¯ä»˜å®ç§˜é’¥å·¥å…·ã€‚ç§˜é’¥å·¥å…·åˆ›å»ºçš„ç§˜é’¥ï¼Œéœ€è¦å¡«å†™åˆ°æŸ¥çœ‹ä¸­ã€‚
- ğŸ“¢ ã€æ²™ç®±è´¦å·ã€‘ï¼Œé‡Œé¢æä¾›äº†åç»­åœ¨ç½‘é¡µä¸Šæ”¯ä»˜æ—¶ï¼Œè¾“å…¥çš„è´¦å·ã€å¯†ç å’Œæ”¯ä»˜å¯†ç ã€‚
- ğŸ“¢ ã€æ²™ç®±å·¥å…·ã€‘ï¼Œé‡Œé¢æä¾›äº†å®‰å“ç‰ˆæµ‹è¯•è½¯ä»¶ï¼Œå¯ä»¥åœ¨æ‰‹æœºæ‰«ç æ”¯ä»˜ã€‚

### 2. ç§˜é’¥å·¥å…·

**æ–‡æ¡£ä¸­å¿ƒ | å¼€æ”¾å¹³å°** åœ°å€ï¼š[https://opendocs.alipay.com/common/02kipk](https://opendocs.alipay.com/common/02kipk) - `ä¸‹è½½æ”¯ä»˜å®å¼€æ”¾å¹³å°ç§˜é’¥å·¥å…·` åœ¨æ–‡æ¡£çš„ä»‹ç»ä¸­ï¼Œä¹Ÿæœ‰å¾ˆè¯¦ç»†çš„è¯´æ˜ã€‚

<div align="center">
    <img src="https://bugstack.cn/images/article/project/ddd-scene-solution/alipay-sandbox-07.png?raw=true" width="750px">
</div>

<div align="center">
    <img src="https://bugstack.cn/images/article/project/ddd-scene-solution/alipay-sandbox-05.png?raw=true" width="750px">
</div>

<div align="center">
    <img src="https://bugstack.cn/images/article/project/ddd-scene-solution/alipay-sandbox-06.png?raw=true" width="750px">
</div>

### 3. ç§˜é’¥å¡«å†™

<div align="center">
    <img src="https://bugstack.cn/images/article/project/ddd-scene-solution/alipay-sandbox-08.png?raw=true" width="750px">
</div>

<div align="center">
    <img src="https://bugstack.cn/images/article/project/ddd-scene-solution/alipay-sandbox-09.png?raw=true" width="750px">
</div>

- åœ¨ç§˜é’¥å·¥å…·ä¸­ç”Ÿæˆçš„**åº”ç”¨å…¬é’¥**ï¼Œå¤åˆ¶åˆ°å¦‚å›¾ä¸­å¡«å†™ä¿å­˜ã€‚å¡«å†™åå°±å¯ä»¥çœ‹åˆ°å¯¹åº”çš„æ”¯ä»˜å®å…¬é’¥äº†ã€‚

## ä¸‰ã€ç®€å•æ¡ˆä¾‹

æœ‰äº†å‰é¢è¿™äº›æ­¥éª¤çš„ç”³è¯·æ“ä½œï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥å…ˆåšä¸€ä¸ªå°æ”¯ä»˜æ¡ˆä¾‹äº†ã€‚è¿™ä¸ªæ”¯ä»˜æ¡ˆä¾‹åœ¨å·¥ç¨‹ä»£ç ä¸­ xfg-dev-tech-app ApiTest ä¸‹ã€‚

### 1. åç«¯ä»£ç 

**æºç **ï¼š`cn.bugstack.xfg.dev.tech.test.ApiTest`

```java
@Slf4j
public class ApiTest {

    // ã€Œæ²™ç®±ç¯å¢ƒã€åº”ç”¨ID - æ‚¨çš„APPIDï¼Œæ”¶æ¬¾è´¦å·æ—¢æ˜¯ä½ çš„APPIDå¯¹åº”æ”¯ä»˜å®è´¦å·ã€‚è·å–åœ°å€ï¼›https://open.alipay.com/develop/sandbox/app
    public static String app_id = "9021000132689924";
    // ã€Œæ²™ç®±ç¯å¢ƒã€å•†æˆ·ç§é’¥ï¼Œä½ çš„PKCS8æ ¼å¼RSA2ç§é’¥
    public static String merchant_private_key = "ä¸Šæ–‡ä¸­ï¼Œã€ç§˜é’¥å·¥å…·ã€‘æ‰€åˆ›å»ºçš„å…¬æˆ·ç§é’¥";
    // ã€Œæ²™ç®±ç¯å¢ƒã€æ”¯ä»˜å®å…¬é’¥
    public static String alipay_public_key = "ä¸Šæ–‡ä¸­ï¼Œã€ç§˜é’¥å¡«å†™ã€‘åæä¾›ç»™ä½ çš„æ”¯ä»˜å®å…¬é’¥";
    // ã€Œæ²™ç®±ç¯å¢ƒã€æœåŠ¡å™¨å¼‚æ­¥é€šçŸ¥é¡µé¢è·¯å¾„ã€‚è¿™é‡Œå°å‚…å“¥ç”¨äº† natapp.cn å†…ç½‘ç©¿é€å·¥å…·
    public static String notify_url = "https://xfg.natapp.cn/api/v1/alipay/alipay_notify_url";
    // ã€Œæ²™ç®±ç¯å¢ƒã€é¡µé¢è·³è½¬åŒæ­¥é€šçŸ¥é¡µé¢è·¯å¾„ éœ€http://æ ¼å¼çš„å®Œæ•´è·¯å¾„ï¼Œå¿…é¡»å¤–ç½‘å¯ä»¥æ­£å¸¸è®¿é—®ï¼Œæ‰ä¼šåŒæ­¥è·³è½¬
    public static String return_url = "https://gaga.plus";
    // ã€Œæ²™ç®±ç¯å¢ƒã€
    public static String gatewayUrl = "https://openapi-sandbox.dl.alipaydev.com/gateway.do";
    // ç­¾åæ–¹å¼
    public static String sign_type = "RSA2";
    // å­—ç¬¦ç¼–ç æ ¼å¼
    public static String charset = "utf-8";

    @Test
    public void test_AliPay() throws AlipayApiException {
        AlipayClient alipayClient = new DefaultAlipayClient(gatewayUrl,
                app_id,
                merchant_private_key,
                "json",
                charset,
                alipay_public_key,
                sign_type);

        AlipayTradePagePayRequest request = new AlipayTradePagePayRequest();  // å‘é€è¯·æ±‚çš„ Requestç±»
        request.setNotifyUrl(notify_url);
        request.setReturnUrl(return_url);

        JSONObject bizContent = new JSONObject();
        bizContent.put("out_trade_no", "daniel82AAAA000032333361X02");  // æˆ‘ä»¬è‡ªå·±ç”Ÿæˆçš„è®¢å•ç¼–å·
        bizContent.put("total_amount", "0.01"); // è®¢å•çš„æ€»é‡‘é¢
        bizContent.put("subject", "æµ‹è¯•å•†å“");   // æ”¯ä»˜çš„åç§°
        bizContent.put("product_code", "FAST_INSTANT_TRADE_PAY");  // å›ºå®šé…ç½®
        request.setBizContent(bizContent.toString());

        String form = alipayClient.pageExecute(request).getBody();
        log.info("æµ‹è¯•ç»“æœï¼š{}", form);

}
```

**æ”¯ä»˜é…ç½®**ï¼š

- app_idï¼šåº”ç”¨ID - æ‚¨çš„APPIDï¼Œæ”¶æ¬¾è´¦å·æ—¢æ˜¯ä½ çš„APPIDå¯¹åº”æ”¯ä»˜å®è´¦å·ã€‚è·å–åœ°å€ï¼›[https://open.alipay.com/develop/sandbox/app](https://open.alipay.com/develop/sandbox/app)
- merchant_private_keyï¼šå•†æˆ·ç§é’¥ï¼Œã€é€šè¿‡æ”¯ä»˜å®å¼€æ”¾å¹³å°ç§˜é’¥å·¥å…·ã€‘åˆ›å»ºå‡ºæ¥çš„ç§é’¥ã€‚å…¬é’¥å¡«å†™åˆ°ç½‘é¡µä¸Šï¼Œç§é’¥ç¨‹åºé‡Œä½¿ç”¨ã€‚
- alipay_public_keyï¼šæ”¯ä»˜å®å…¬é’¥ï¼Œåœ¨ç½‘é¡µä¸Šå¡«å†™å…¬é’¥åï¼Œä¼šç»™ä½ ä¸€ä¸ªæ”¯ä»˜å®çš„å…¬é’¥ã€‚
- notify_urlï¼šæœåŠ¡å™¨å¼‚æ­¥é€šçŸ¥å›è°ƒåœ°å€ï¼Œä¹Ÿå°±æ˜¯ä½ æ”¯ä»˜å®Œæˆåï¼Œæ”¯ä»˜å®è°ƒç”¨ä½ çš„åœ°å€ã€‚å› ä¸ºæˆ‘ä»¬æ˜¯åœ¨æœ¬åœ°åšæµ‹è¯•ï¼Œå¤–ç½‘æ˜¯è®¿é—®ä¸åˆ°çš„ã€‚æ‰€ä»¥ä¸ºäº†èƒ½åšè¿™æ ·çš„æµ‹è¯•ï¼Œå¯ä»¥å›è°ƒåˆ°æˆ‘ä»¬ã€‚é‚£ä¹ˆè¿™é‡Œéœ€è¦ä½¿ç”¨ natapp.cn åšä¸€ä¸ªå†…ç½‘ç©¿é€ã€‚
- return_urlï¼šæ”¯ä»˜å®Œæˆåè·³è½¬çš„åœ°å€
- gatewayUrlï¼šæ”¯ä»˜å®æ²™ç®±ç¯å¢ƒçš„åœ°å€ï¼Œå›ºå®šçš„ã€‚
- sign_typeï¼šç­¾åæ–¹å¼å›ºå®šçš„
- charsetï¼šå­—ç¬¦ç¼–ç å›ºå®šçš„

**è°ƒç”¨é…ç½®**

- out_trade_noï¼šä½ çš„å•å·ï¼Œç”¨ä½ çš„å•å·ç±»ç”Ÿæˆæ”¯ä»˜å•ä¿¡æ¯ã€‚
- total_amountï¼šæ”¯ä»˜é‡‘é¢
- subjectï¼šå•†å“åç§°
- product_codeï¼šå›ºå®šå€¼ï¼›FAST_INSTANT_TRADE_PAY

**æµ‹è¯•ç»“æœ**

<div align="center">
    <img src="https://bugstack.cn/images/article/project/ddd-scene-solution/alipay-sandbox-10.png?raw=true" width="750px">
</div>

```java
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=J1BBEkS9SIRKTL9sdyFhJ4rUCkJL0HaSOnQ%2BIr5Iy9TdYUigoNfplYfSTFlfjHP8Fq5Me33k7LWNJUH0HzubXxL1vg7P1QOcgzG5K%2Bu5HzWDCkbG4TYhJ%2FOHjYw0nTeRdu%2BkEw%2FMfWr3y4YYpO5oUPEtFMjmvB1UrKmx2%2Buwx0zJk1qrpQWAOfmuS27hf2qda1SVUMs4vdNrKIEKZy1Fysaoo2J6Bqzw2CAFS1QtwN5wm2%2F%2F4uQpxA3TlV1%2BaDvh3Ve5NNTFhiREqW7QPNalFHI0AvGQq6MYKnamaEiNPTFMXUDVsOPFcVqsLZKSvovNlK1CPFp67ZfCTMZP%2BZK3Rw%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=https%3A%2F%2Fxfg.natapp.cn%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000132689924&sign_type=RSA2&timestamp=2023-12-17+11%3A55%3A51&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;daniel82AAAA000032333361X03&quot;,&quot;total_amount&quot;:&quot;0.01&quot;,&quot;subject&quot;:&quot;æµ‹è¯•å•†å“&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="ç«‹å³æ”¯ä»˜" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
```

- è¿è¡Œåä½ ä¼šå¾—åˆ°ä¸€ä»½ HTML è„šæœ¬ï¼Œè¿™ä»½è„šæœ¬å°±å¯ä»¥åœ¨æµè§ˆå™¨æ‰“å¼€ã€‚
- å¦‚æœä½ æƒ³å°‘é‡çš„å­˜å‚¨ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥æŠŠå¿…è¦çš„æ•°æ®å­˜åˆ°æ•°æ®åº“ï¼Œä¸ç”¨å…¨å­˜å‚¨ã€‚

### 2. å‰ç«¯ä»£ç 

<div align="center">
    <img src="https://bugstack.cn/images/article/project/ddd-scene-solution/alipay-sandbox-11.png?raw=true" width="750px">
</div>

<div align="center">
    <img src="https://bugstack.cn/images/article/project/ddd-scene-solution/alipay-sandbox-12.png?raw=true" width="750px">
</div>

- æŠŠåç«¯è¿è¡Œç”Ÿæˆçš„ä»£ç ï¼Œç²˜è´´åˆ° form.html æ–‡ä»¶ä¸­ï¼Œä¹‹åç‚¹æµè§ˆå™¨æŒ‰é’®è¿è¡Œæ‰“å¼€ã€‚
- æ‰“å¼€åï¼Œä¼šè·³è½¬åˆ°æ”¯ä»˜å®æ”¯ä»˜é¡µé¢ï¼Œä¹‹åä½ å¯ä»¥ä»ã€æ”¯ä»˜å® | å¼€æ”¾å¹³å°ã€‘æ²™ç®±è´¦å·ä¸­è·å–ä½ çš„è´¦å·ä¿¡æ¯ã€‚åœ°å€ï¼š[https://open.alipay.com/develop/sandbox/account](https://open.alipay.com/develop/sandbox/account)

>åˆ°è¿™æ”¯ä»˜å®çš„æ²™ç®±ç”³è¯·å’Œç®€å•æ¡ˆä¾‹å·²ç»åšå®Œäº†ï¼Œä¹‹åæˆ‘ä»¬è¿›å…¥åœºæ™¯åº”ç”¨çš„è®­ç»ƒã€‚

## å››ã€åœºæ™¯ä»‹ç»

æ”¯ä»˜ï¼Œå¯ä»¥è¯´æ˜¯ä¸€ä¸ªå¯¹æ¥çš„æ¸ é“ï¼Œé‚£ä¹ˆç»“åˆåˆ°æˆ‘ä»¬çš„å®é™…åœºæ™¯ä¸­åº”è¯¥å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿæ¯”å¦‚æµç¨‹çš„æ‰§è¡Œã€è®¢å•çš„åˆ›å»ºã€æ•°æ®çš„ä¿å­˜ã€å›è°ƒçš„å¤„ç†ç­‰ï¼Œè¿™äº›éƒ½æ˜¯å®é™…ä¸šåŠ¡ä¸­è¦åšçš„ä¸œè¥¿ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±åšä¸‹è¿™ä¸ªåœºæ™¯å­¦ä¹ ã€‚

### 1. æ”¯ä»˜ç•Œé¢

<div align="center">
    <img src="https://bugstack.cn/images/article/project/ddd-scene-solution/alipay-sandbox-14.png?raw=true" width="550px">
</div>

### 2. ä¸šåŠ¡æµç¨‹

<div align="center">
    <img src="https://bugstack.cn/images/article/project/ddd-scene-solution/alipay-sandbox-13.png?raw=true" width="750px">
</div>

### 3. åº“è¡¨è®¾è®¡

<div align="center">
    <img src="https://bugstack.cn/images/article/project/ddd-scene-solution/alipay-sandbox-15.png?raw=true" width="750px">
</div>

## äº”ã€å·¥ç¨‹å®ç°

<div align="center">
    <img src="https://bugstack.cn/images/article/project/ddd-scene-solution/alipay-sandbox-24.png?raw=true" width="750px">
</div>

æ­¤é¡¹ç›®ä¸ºã€Œæ˜Ÿçƒï¼šç å†œä¼šé”ã€å°åœºæ™¯è®­ç»ƒè¥çš„ä¸€éƒ¨åˆ† â€”â€” åœ°å€ï¼š[https://gitcode.net/KnowledgePlanet/ddd-scene-solution](https://gitcode.net/KnowledgePlanet/ddd-scene-solution) - `æ˜Ÿçƒå†…è¿˜åŒ…æ‹¬äº†å¤§é‡çš„å®æˆ˜é¡¹ç›®ï¼›å¤§è¥é”€å¹³å°ã€OpenAIé¡¹ç›®ã€APIç½‘å…³ã€LotteryæŠ½å¥–ã€IMé€šä¿¡ã€SpringBoot Starter ç»„ä»¶å¼€å‘ã€IDEA Plugin æ’ä»¶å¼€å‘ç­‰`

### 1. å·¥ç¨‹ç»“æ„

<div align="center">
    <img src="https://bugstack.cn/images/article/project/ddd-scene-solution/alipay-sandbox-16.png?raw=true" width="550px">
</div>

åˆ†å±‚ä»‹ç»ï¼š

- docsï¼šè¿™é‡Œæä¾›äº†å·¥ç¨‹æ‰€éœ€çš„èµ„æºï¼Œdocker å®‰è£… msyqlã€natapp å†…ç½‘ç©¿é€ã€éœ€è¦è‡ªå·±ç”³è¯·ä¸€ä¸ªåœ°å€ã€‘ã€front å‰ç«¯é¡µé¢ã€‚
- appï¼šåº”ç”¨çš„å¯åŠ¨å±‚ï¼Œå¤„ç† config é…ç½®å’Œ resources èµ„æºåŠ è½½ã€‚ä»¥åŠ test æ¨¡å—çš„æµ‹è¯•ã€‚
- domainï¼šé¢†åŸŸå±‚ï¼Œå¤„ç†æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€‚
- infrastructureï¼šåŸºç¡€è®¾æ–½å±‚ï¼Œå¦‚ç®¡ç†æŒä¹…åŒ–æ•°æ®ã€‚
- triggerï¼šè§¦å‘å™¨å±‚ï¼Œç»Ÿä¸€ç®¡ç† httpã€mqã€listenerã€job ç­‰å…¥å£è°ƒç”¨ã€‚

### 2. ç¯å¢ƒå®‰è£…

#### 2.1 MySQL

```java
# å‘½ä»¤æ‰§è¡Œ docker-compose up -d
version: '3.9'
services:
  mysql:
    image: mysql:8.0.32
    container_name: mysql
    command: --default-authentication-plugin=mysql_native_password
    restart: always
    environment:
      TZ: Asia/Shanghai
      MYSQL_ROOT_PASSWORD: 123456
      MYSQL_USER: xfg
      MYSQL_PASSWORD: 123456
    depends_on:
      - mysql-job-dbdata
    ports:
      - "13306:3306"
    volumes:
      - ./sql:/docker-entrypoint-initdb.d
    volumes_from:
      - mysql-job-dbdata
    healthcheck:
      test: [ "CMD", "mysqladmin" ,"ping", "-h", "localhost" ]
      interval: 5s
      timeout: 10s
      retries: 10
      start_period: 15s
    networks:
      - my-network

  # phpmyadmin https://hub.docker.com/_/phpmyadmin
  phpmyadmin:
    image: phpmyadmin:5.2.1
    container_name: phpmyadmin
    hostname: phpmyadmin
    ports:
      - 8899:80
    environment:
      - PMA_HOST=mysql
      - PMA_PORT=3306
      - MYSQL_ROOT_PASSWORD=123qwe!@#QWE
    depends_on:
      mysql:
        condition: service_healthy
    networks:
      - my-network

  # è‡ªåŠ¨åŠ è½½æ•°æ®
  mysql-job-dbdata:
    image: alpine:3.18.2
    container_name: mysql-job-dbdata
    volumes:
      - /var/lib/mysql

networks:
  my-network:
    driver: bridge
```

- ç›´æ¥åœ¨ docker ä¸‹å®‰è£…ç¯å¢ƒï¼Œå®‰è£…æ—¶ä¼šè‡ªåŠ¨çš„å¸®ä½ æŠŠ dev-ops/mysql/sql ä¸‹çš„è„šæœ¬åˆ›å»ºåˆ°æ•°æ®åº“ä¸­ã€‚
- å¹¶ä¸”è¿™é‡Œæä¾›äº† phpmyadmin å¯ä»¥è®©ä½ ç›´æ¥åœ¨çº¿ä¸Šå°±èƒ½ç®¡ç†æ•°æ®åº“ã€‚
- å¦‚æœä½ æœ¬åœ°æœ‰ msyql 8.x é‚£ä¹ˆå¯ä»¥ç›´æ¥å¯¼å…¥æ•°æ®åº“è„šæœ¬ã€‚`dev-ops/mysql/sql/xfg-dev-tech-alipay-sandbox.sql`

#### 2.2 å†…ç½‘ç©¿é€

ç™»å½•ï¼š[https://natapp.cn/](https://natapp.cn/) - `å†…ç½‘ç©¿é€çš„ä¸»è¦ä½œç”¨å°±æ˜¯è®©ä½ çš„æœ¬åœ°åº”ç”¨åœ°å€ï¼Œå¯ä»¥è¢«æ”¯ä»˜å®å›è°ƒè°ƒç”¨åˆ°`

1. å¼€é€šè‡ªå·±çš„å…è´¹/ä»˜è´¹æ¸ é“ï¼Œç”¨äºå†…ç½‘ç©¿é€ã€‚æœ¬åœ°å†…ç½‘ç©¿é€çš„åœ°å€ï¼Œå°±å¯ä»¥è¢«å…¬ç½‘è®¿é—®ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥è¢«æ”¯ä»˜å›è°ƒã€‚
2. å¼€é€šåï¼Œç™»å½•åå¤åˆ¶è‡ªå·±çš„æ¸ é“ token ç²˜è´´åˆ° config.ini æ–‡ä»¶ authtoken ä¸‹ã€‚å¦‚æœæ˜¯Windowsç”µè„‘ï¼Œå¯ä»¥è‡ªå·±åœ¨å®˜ç½‘ä¸‹è½½ã€‚åœ°å€ï¼š[https://natapp.cn/#download](https://natapp.cn/#download)

### 3. å·¥ç¨‹é…ç½®

**æºç **ï¼š`cn.bugstack.xfg.dev.tech.config.AliPayConfig`

```java
@Configuration
@EnableConfigurationProperties(AliPayConfigProperties.class)
public class AliPayConfig {

    @Bean(name = "alipayClient")
    @ConditionalOnProperty(value = "alipay.enabled", havingValue = "true", matchIfMissing = false)
    public AlipayClient alipayClient(AliPayConfigProperties properties){
        return new DefaultAlipayClient(properties.getGatewayUrl(),
                properties.getApp_id(),
                properties.getMerchant_private_key(),
                properties.getFormat(),
                properties.getCharset(),
                properties.getAlipay_public_key(),
                properties.getSign_type());
    }

}
```

```yml
# application-dev.yml
# æ”¯ä»˜å®æ”¯ä»˜ - æ²™ç®± https://opendocs.alipay.com/common/02kkv7
alipay:
  enabled: true
  app_id: 9021000132689924
  merchant_private_key:
  alipay_public_key: 
  notify_url: http://xfg-studio.natapp1.cc/api/v1/alipay/pay_notify
  return_url: https://gaga.plus
  gatewayUrl: https://openapi-sandbox.dl.alipaydev.com/gateway.do
```

- ä½ å¯ä»¥å‚ç…§ã€ç®€å•æ¡ˆä¾‹ã€‘é…ç½®ä»¥ä¸Šå†…å®¹ï¼ŒåŒ…æ‹¬ï¼›app_idã€merchant_private_keyã€alipay_public_keyã€notify_url è¿™äº›å‚æ•°ã€‚

### 4. ä»£ç å®ç°

#### 4.1 è®¢å•æœåŠ¡

**æºç **ï¼š`cn.bugstack.xfg.dev.tech.domain.service.IOrderService`

```java
public interface IOrderService {

    /**
     * é€šè¿‡è´­ç‰©è½¦å®ä½“å¯¹è±¡ï¼Œåˆ›å»ºæ”¯ä»˜å•å®ä½“ï¼ˆç”¨äºæ”¯ä»˜ï¼‰â€”â€” æ‰€æœ‰çš„è®¢å•ä¸‹å•éƒ½ä»è´­ç‰©è½¦å¼€å§‹è§¦å‘
     *
     * @param shopCartEntity è´­ç‰©è½¦å®ä½“
     * @return æ”¯ä»˜å•å®ä½“
     */
    PayOrderEntity createOrder(ShopCartEntity shopCartEntity) throws Exception;

    /**
     * æ›´æ–°è®¢å•çŠ¶æ€
     * @param orderId è®¢å•ID
     */
    void changeOrderPaySuccess(String orderId);

}
```

#### 4.2 æ¨¡æ¿æ¨¡å¼

**æºç **ï¼š`cn.bugstack.xfg.dev.tech.domain.service.AbstractOrderService`

```java
@Override
public PayOrderEntity createOrder(ShopCartEntity shopCartEntity) throws Exception{
    // 1. æŸ¥è¯¢å½“å‰ç”¨æˆ·æ˜¯å¦å­˜åœ¨æ‰å•å’Œæœªæ”¯ä»˜è®¢å•
    OrderEntity unpaidOrderEntity = repository.queryUnPayOrder(shopCartEntity);
    if (null != unpaidOrderEntity && OrderStatusVO.PAY_WAIT.equals(unpaidOrderEntity.getOrderStatus())) {
        log.info("åˆ›å»ºè®¢å•-å­˜åœ¨ï¼Œå·²å­˜åœ¨æœªæ”¯ä»˜è®¢å•ã€‚userId:{} productId:{} orderId:{}", shopCartEntity.getUserId(), shopCartEntity.getProductId(), unpaidOrderEntity.getOrderId());
        return PayOrderEntity.builder()
                .orderId(unpaidOrderEntity.getOrderId())
                .payUrl(unpaidOrderEntity.getPayUrl())
                .build();
    } else if (null != unpaidOrderEntity && OrderStatusVO.CREATE.equals(unpaidOrderEntity.getOrderStatus())) {
        log.info("åˆ›å»ºè®¢å•-å­˜åœ¨ï¼Œå­˜åœ¨æœªåˆ›å»ºæ”¯ä»˜å•è®¢å•ï¼Œåˆ›å»ºæ”¯ä»˜å•å¼€å§‹ userId:{} productId:{} orderId:{}", shopCartEntity.getUserId(), shopCartEntity.getProductId(), unpaidOrderEntity.getOrderId());
        PayOrderEntity payOrderEntity = this.doPrepayOrder(shopCartEntity.getUserId(), shopCartEntity.getProductId(), unpaidOrderEntity.getProductName(), unpaidOrderEntity.getOrderId(), unpaidOrderEntity.getTotalAmount());
        return PayOrderEntity.builder()
                .orderId(payOrderEntity.getOrderId())
                .payUrl(payOrderEntity.getPayUrl())
                .build();
    }
  
    // 2. æŸ¥è¯¢å•†å“ & èšåˆè®¢å•
    ProductEntity productEntity = repository.queryProductByProductId(shopCartEntity.getProductId());
    OrderEntity orderEntity = OrderEntity.builder()
            .productId(productEntity.getProductId())
            .productName(productEntity.getProductName())
            .orderId(RandomStringUtils.randomNumeric(16))
            .orderTime(new Date())
            .orderStatus(OrderStatusVO.CREATE)
            .build();
    CreateOrderAggregate orderAggregate = CreateOrderAggregate.builder()
            .userId(shopCartEntity.getUserId())
            .productEntity(productEntity)
            .orderEntity(orderEntity)
            .build();
  
    // 3. ä¿å­˜è®¢å• - ä¿å­˜ä¸€ä»½è®¢å•ï¼Œå†ç”¨è®¢å•ç”ŸæˆIDç”Ÿæˆæ”¯ä»˜å•ä¿¡æ¯
    this.doSaveOrder(orderAggregate);
  
    // 4. åˆ›å»ºæ”¯ä»˜å•
    PayOrderEntity payOrderEntity = this.doPrepayOrder(shopCartEntity.getUserId(), productEntity.getProductId(), productEntity.getProductName(), orderEntity.getOrderId(), productEntity.getPrice());
    log.info("åˆ›å»ºè®¢å•-å®Œæˆï¼Œç”Ÿæˆæ”¯ä»˜å•ã€‚userId: {} orderId: {} payUrl: {}", shopCartEntity.getUserId(), orderEntity.getOrderId(), payOrderEntity.getPayUrl());
  
    return PayOrderEntity.builder()
            .orderId(payOrderEntity.getOrderId())
            .payUrl(payOrderEntity.getPayUrl())
            .build();
}
```

- é€šè¿‡æ¨¡æ¿æ¨¡å¼ï¼Œå®šä¹‰å‡ºæ•´ä¸ªä¸‹å•è¿‡ç¨‹çš„æ ‡å‡†æµç¨‹å’ŒæŠ½è±¡æ–¹æ³•ã€‚

#### 4.3 æ”¯ä»˜æ¥å£

**æºç **ï¼š`cn.bugstack.xfg.dev.tech.trigger.http.AliPayController#createParOrder`

```java
@RequestMapping(value = "create_pay_order", method = RequestMethod.POST)
public Response<String> createParOrder(@RequestParam String userId, @RequestParam String productId) {
    try {
        log.info("å•†å“ä¸‹å•ï¼Œæ ¹æ®å•†å“IDåˆ›å»ºæ”¯ä»˜å•å¼€å§‹ userId:{} productId:{}", userId, productId);
        ShopCartEntity shopCartEntity = ShopCartEntity.builder().userId(userId).productId(productId).build();
        PayOrderEntity payOrderEntity = orderService.createOrder(shopCartEntity);
        log.info("å•†å“ä¸‹å•ï¼Œæ ¹æ®å•†å“IDåˆ›å»ºæ”¯ä»˜å•å®Œæˆ userId:{} productId:{} orderId:{}", userId, productId, payOrderEntity.getOrderId());
        return Response.<String>builder()
                .code(ResponseCode.SUCCESS.getCode())
                .info(ResponseCode.SUCCESS.getInfo())
                .data(payOrderEntity.getPayUrl())
                .build();
    } catch (Exception e) {
        log.error("å•†å“ä¸‹å•ï¼Œæ ¹æ®å•†å“IDåˆ›å»ºæ”¯ä»˜å•å¤±è´¥ userId:{} productId:{}", userId, productId, e);
        return Response.<String>builder()
                .code(ResponseCode.UN_ERROR.getCode())
                .info(ResponseCode.UN_ERROR.getInfo())
                .build();
    }
}
```

- åœ°å€ï¼š[http://localhost:8091/api/v1/alipay/create_pay_order?userId=1001&productId=100001](http://localhost:8091/api/v1/alipay/create_pay_order?userId=1001&productId=100001)
- è¯´æ˜ï¼šè¿™é‡Œæ¨¡æ‹Ÿäº†ä¸€ä¸ªè°ƒç”¨æ¥å£è¿›è¡Œåˆ›å»ºæ”¯ä»˜å•çš„å®ç°ã€‚

#### 4.4 å›è°ƒæ¥å£

**æºç **ï¼š`cn.bugstack.xfg.dev.tech.trigger.http.AliPayController#payNotify`

```java
@RequestMapping(value = "pay_notify", method = RequestMethod.POST)
public String payNotify(HttpServletRequest request) {
    try {
        log.info("æ”¯ä»˜å›è°ƒï¼Œæ¶ˆæ¯æ¥æ”¶ {}", request.getParameter("trade_status"));
        if (request.getParameter("trade_status").equals("TRADE_SUCCESS")) {
            Map<String, String> params = new HashMap<>();
            Map<String, String[]> requestParams = request.getParameterMap();
            for (String name : requestParams.keySet()) {
                params.put(name, request.getParameter(name));
            }
            String tradeNo = params.get("out_trade_no");
            String gmtPayment = params.get("gmt_payment");
            String alipayTradeNo = params.get("trade_no");
            String sign = params.get("sign");
            String content = AlipaySignature.getSignCheckContentV1(params);
            boolean checkSignature = AlipaySignature.rsa256CheckContent(content, sign, alipayPublicKey, "UTF-8"); // éªŒè¯ç­¾å
            // æ”¯ä»˜å®éªŒç­¾
            if (checkSignature) {
                // éªŒç­¾é€šè¿‡
                log.info("æ”¯ä»˜å›è°ƒï¼Œäº¤æ˜“åç§°: {}", params.get("subject"));
                log.info("æ”¯ä»˜å›è°ƒï¼Œäº¤æ˜“çŠ¶æ€: {}", params.get("trade_status"));
                log.info("æ”¯ä»˜å›è°ƒï¼Œæ”¯ä»˜å®äº¤æ˜“å‡­è¯å·: {}", params.get("trade_no"));
                log.info("æ”¯ä»˜å›è°ƒï¼Œå•†æˆ·è®¢å•å·: {}", params.get("out_trade_no"));
                log.info("æ”¯ä»˜å›è°ƒï¼Œäº¤æ˜“é‡‘é¢: {}", params.get("total_amount"));
                log.info("æ”¯ä»˜å›è°ƒï¼Œä¹°å®¶åœ¨æ”¯ä»˜å®å”¯ä¸€id: {}", params.get("buyer_id"));
                log.info("æ”¯ä»˜å›è°ƒï¼Œä¹°å®¶ä»˜æ¬¾æ—¶é—´: {}", params.get("gmt_payment"));
                log.info("æ”¯ä»˜å›è°ƒï¼Œä¹°å®¶ä»˜æ¬¾é‡‘é¢: {}", params.get("buyer_pay_amount"));
                log.info("æ”¯ä»˜å›è°ƒï¼Œæ”¯ä»˜å›è°ƒï¼Œæ›´æ–°è®¢å• {}", tradeNo);
                // æ›´æ–°è®¢å•æœªå·²æ”¯ä»˜
                orderService.changeOrderPaySuccess(tradeNo);
                // æ¨é€æ¶ˆæ¯ã€è‡ªå·±çš„ä¸šåŠ¡åœºæ™¯ä¸­å¯ä»¥ä½¿ç”¨MQæ¶ˆæ¯ã€‘
                eventBus.post(tradeNo);
            }
        }
        return "success";
    } catch (Exception e) {
        log.error("æ”¯ä»˜å›è°ƒï¼Œå¤„ç†å¤±è´¥", e);
        return "false";
    }
}
```

- åœ°å€ï¼š[http://xfg-studio.natapp1.cc/api/v1/alipay/pay_notify](http://xfg-studio.natapp1.cc/api/v1/alipay/pay_notify)
- è¯´æ˜ ï¼šå›è°ƒæ˜¯æ”¯ä»˜å®è°ƒç”¨æˆ‘ä»¬çš„æ¥å£ã€‚é»˜è®¤æ˜¯ https://localhost:8091 å› ä¸ºä½¿ç”¨äº† natapp å°±å¯ä»¥æŠŠæœ¬åœ°çš„åœ°å€+ç«¯å£ï¼Œæ˜ å°„åˆ°ä¸€ä¸ª natapp å†…ç½‘ç©¿é€åœ°å€ã€‚æ‰€ä»¥åœ°å€ä¸ºï¼šhttp://xfg-studio.natapp1.cc/api/v1/alipay/pay_notify

## å…­ã€åŠŸèƒ½éªŒè¯

### 1. å‰ç½®

1. å®‰è£… MySQL 8.0 æ•°æ®åº“ + åˆå§‹åŒ–åº“è¡¨ã€‚å¦‚æœä½ æ˜¯ä½ç‰ˆæœ¬çš„æ•°æ®åº“ï¼Œéœ€è¦è‡ªå·±åˆ›å»ºä¸‹åº“è¡¨ã€‚
2. æ‰“å¼€ natapp.cn é…ç½®ä¸€ä¸ªè‡ªå·±çš„å†…ç½‘ç©¿é€æ¸ é“ï¼Œæ¸ é“å†…é…ç½®å·¥ç¨‹æ˜ å°„åœ°å€ 8091 å¦‚æœä½ æ˜¯å…¶ä»–ç«¯å£åˆ™é…ç½®ä¸ºå…¶ä»–çš„åœ°å€å³å¯ã€‚ä¹‹åæœ¬åœ°å¯åŠ¨ natapp
3. å¯åŠ¨ xfg-dev-tech-alipay-sandbox åº”ç”¨ã€‚

### 2. æµ‹è¯•

#### 2.1 å¯åŠ¨ natapp

<div align="center">
    <img src="https://bugstack.cn/images/article/project/ddd-scene-solution/alipay-sandbox-17.png?raw=true" width="650px">
</div>

#### 2.2 å¯åŠ¨å·¥ç¨‹

<div align="center">
    <img src="https://bugstack.cn/images/article/project/ddd-scene-solution/alipay-sandbox-18.png?raw=true" width="650px">
</div>

#### 2.3 ä¸‹å•é¡µé¢

è¿›å…¥åˆ°å·¥ç¨‹ docs/dev-ops/front ä¸‹ï¼Œæ‰“å¼€ index.html æ–‡ä»¶ã€‚ç‚¹å‡»ä¸‹å•ï¼Œè¿™ä¸ªæ—¶å€™ä½ ä¼šè¿›å…¥åˆ°æ”¯ä»˜é¡µé¢ã€‚

<div align="center">
    <img src="https://bugstack.cn/images/article/project/ddd-scene-solution/alipay-sandbox-19.png?raw=true" width="650px">
</div>

#### 2.4 å•†å“æ”¯ä»˜

<div align="center">
    <img src="https://bugstack.cn/images/article/project/ddd-scene-solution/alipay-sandbox-20.png?raw=true" width="650px">
</div>

<div align="center">
    <img src="https://bugstack.cn/images/article/project/ddd-scene-solution/alipay-sandbox-21.png?raw=true" width="650px">
</div>

<div align="center">
    <img src="https://bugstack.cn/images/article/project/ddd-scene-solution/alipay-sandbox-22.png?raw=true" width="650px">
</div>

#### 2.5 åº“è¡¨æ•°æ®

<div align="center">
    <img src="https://bugstack.cn/images/article/project/ddd-scene-solution/alipay-sandbox-23.png?raw=true" width="650px">
</div>

### 3. æ—¥å¿—

```java
23-12-17.15:11:55.692 [http-nio-8091-exec-4] INFO  AliPayController       - å•†å“ä¸‹å•ï¼Œæ ¹æ®å•†å“IDåˆ›å»ºæ”¯ä»˜å•å¼€å§‹ userId:xiaofuge productId:100010090091
23-12-17.15:11:55.908 [http-nio-8091-exec-4] INFO  AbstractOrderService   - åˆ›å»ºè®¢å•-å®Œæˆï¼Œç”Ÿæˆæ”¯ä»˜å•ã€‚userId: xiaofuge orderId: 1620564694789743 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=dh959MC1wu4JD%2B5%2Fxs5HMLaapqFB2zpH5ceDI5B9tIDsNxq22lRawhQcBL%2BNt8zKpb%2BB9fua5VJnm6PGnq0GRqpE2CIwb99stQuTbwyZDRtRq327Dm%2FvQTXw5vil%2FrIkRC9j8SRH9sCk5ZdiedQqoCXZfacNK2dO87T%2BrOACJDT1RkGxJNl4aZ%2FJCrZlGuEcXccc%2BrZVVRY9spBLXOLJwwNcDZkqJtFkxbZUJbZ86hfkW4ihIDf2Q7nMwTyobyINnNgkbfk2z2dxeK8YAccp16Z5P9uMGvhlIqF6u5itcsFFsxoR43n8%2Fj77aKsFbfLUftJ%2BGpEUEY4smAfSV0eyxw%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Fxfg-studio.natapp1.cc%2Fapi%2Fv1%2Falipay%2Fpay_notify&version=1.0&app_id=9021000132689924&sign_type=RSA2&timestamp=2023-12-17+15%3A11%3A55&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;1620564694789743&quot;,&quot;total_amount&quot;:&quot;1.68&quot;,&quot;subject&quot;:&quot;æµ‹è¯•å•†å“&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="ç«‹å³æ”¯ä»˜" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
23-12-17.15:11:55.909 [http-nio-8091-exec-4] INFO  AliPayController       - å•†å“ä¸‹å•ï¼Œæ ¹æ®å•†å“IDåˆ›å»ºæ”¯ä»˜å•å®Œæˆ userId:xiaofuge productId:100010090091 orderId:1620564694789743
23-12-17.15:12:37.553 [http-nio-8091-exec-5] INFO  AliPayController       - æ”¯ä»˜å›è°ƒï¼Œæ¶ˆæ¯æ¥æ”¶ TRADE_SUCCESS
23-12-17.15:12:37.558 [http-nio-8091-exec-5] INFO  AliPayController       - æ”¯ä»˜å›è°ƒï¼Œäº¤æ˜“åç§°: æµ‹è¯•å•†å“
23-12-17.15:12:37.558 [http-nio-8091-exec-5] INFO  AliPayController       - æ”¯ä»˜å›è°ƒï¼Œäº¤æ˜“çŠ¶æ€: TRADE_SUCCESS
23-12-17.15:12:37.558 [http-nio-8091-exec-5] INFO  AliPayController       - æ”¯ä»˜å›è°ƒï¼Œæ”¯ä»˜å®äº¤æ˜“å‡­è¯å·: 2023121722001413370501437659
23-12-17.15:12:37.558 [http-nio-8091-exec-5] INFO  AliPayController       - æ”¯ä»˜å›è°ƒï¼Œå•†æˆ·è®¢å•å·: 1620564694789743
23-12-17.15:12:37.558 [http-nio-8091-exec-5] INFO  AliPayController       - æ”¯ä»˜å›è°ƒï¼Œäº¤æ˜“é‡‘é¢: 1.68
23-12-17.15:12:37.562 [http-nio-8091-exec-5] INFO  AliPayController       - æ”¯ä»˜å›è°ƒï¼Œä¹°å®¶åœ¨æ”¯ä»˜å®å”¯ä¸€id: 2088722024513370
23-12-17.15:12:37.562 [http-nio-8091-exec-5] INFO  AliPayController       - æ”¯ä»˜å›è°ƒï¼Œä¹°å®¶ä»˜æ¬¾æ—¶é—´: 2023-12-17 15:12:35
23-12-17.15:12:37.562 [http-nio-8091-exec-5] INFO  AliPayController       - æ”¯ä»˜å›è°ƒï¼Œä¹°å®¶ä»˜æ¬¾é‡‘é¢: 1.68
23-12-17.15:12:37.562 [http-nio-8091-exec-5] INFO  AliPayController       - æ”¯ä»˜å›è°ƒï¼Œæ”¯ä»˜å›è°ƒï¼Œæ›´æ–°è®¢å• 1620564694789743
23-12-17.15:12:37.584 [http-nio-8091-exec-5] INFO  OrderPaySuccessListener - æ”¶åˆ°æ”¯ä»˜æˆåŠŸæ¶ˆæ¯ï¼Œå¯ä»¥åšæ¥ä¸‹æ¥çš„äº‹æƒ…äº†ã€å‘è´§ã€å……å€¼ã€å¼€ä¼šå‘˜ã€‘orderIdï¼š1620564694789743
```

- ä»¥ä¸Šä¸ºæ•´ä¸ªé¡¹ç›®è¿è¡Œè¿‡ç¨‹æ‰€äº§ç”Ÿçš„æ—¥å¿—æ•°æ®ã€‚é€šè¿‡æ—¥å¿—å¯æ¸…æ¥šçŸ¥é“æ¯ä¸€æ­¥çš„æ“ä½œè¿‡ç¨‹ã€‚

## ä¸ƒã€åŠ å…¥å­¦ä¹ 

**æ³¨æ„**ğŸ“¢ï¼Œæœ¬é¡¹ç›®ä¹Ÿåªæ˜¯ã€æ˜Ÿçƒï¼šç å†œä¼šé”ã€‘ä¼—å¤šé¡¹ç›®ä¸­çš„1ä¸ªï¼Œå…¶ä»–çš„é¡¹ç›®è¿˜åŒ…æ‹¬ï¼šå¤§è¥é”€å¹³å°ç³»ç»Ÿã€OpenAI å¤§æ¨¡å‹åº”ç”¨ã€APIç½‘å…³ã€LotteryæŠ½å¥–ã€IMé€šä¿¡ã€SpringBoot Starter ç»„ä»¶å¼€å‘ã€IDEA Plugin æ’ä»¶å¼€å‘ç­‰ï¼Œå¹¶è¿˜æœ‰å¼€æºé¡¹ç›®å­¦ä¹ ã€‚

å¦‚æœå¤§å®¶å¸Œæœ›é€šè¿‡åšæœ‰ä»·å€¼çš„ç¼–ç¨‹é¡¹ç›®ï¼Œæé«˜è‡ªå·±çš„ç¼–ç¨‹æ€ç»´å’Œç¼–ç èƒ½åŠ›ï¼Œå¯ä»¥åŠ å…¥å°å‚…å“¥çš„ã€æ˜Ÿçƒï¼šç å†œä¼šé”ã€‘ã€‚åŠ å…¥åè§£é”ğŸ”“æ‰€æœ‰å¾€æœŸé¡¹ç›®ï¼Œè¿˜å¯ä»¥å­¦ä¹ åç»­æ–°å¼€å‘çš„é¡¹ç›®ã€‚

>[ğŸ§§åŠ å…¥å­¦ä¹ ](https://bugstack.cn/md/zsxq/other/join.html)

åŠ å…¥åå³å¯è§£é”å…¨éƒ¨å­¦ä¹ èµ„æºï¼Œé¡¹ç›®æ¼”ç¤ºåœ°å€ï¼š[https://gaga.plus](https://gaga.plus)