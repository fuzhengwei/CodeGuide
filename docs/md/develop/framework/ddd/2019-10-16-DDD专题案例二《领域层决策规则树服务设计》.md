---
layout: post
category: itstack-demo-ddd
title: DDDä¸“é¢˜æ¡ˆä¾‹äºŒã€Šé¢†åŸŸå±‚å†³ç­–è§„åˆ™æ ‘æœåŠ¡è®¾è®¡ã€‹
tagline: by ä»˜æ”¿å§”
tag: [ddd,itstack-demo-ddd]
excerpt: æ— è®ºæ˜¯DDDã€MVCï¼Œä»–ä»¬æ›´åƒæ˜¯å®¶é‡Œä¸‰å±…æˆ–è€…å››å±€çš„æ ¼å±€ï¼Œæ¯ä¸€ç§æ ¼å±€æ–¹å¼éƒ½æ˜¯ä¸ºäº†æ›´å¥½çš„å®ç°å¯¹åº”æ¶æ„ä¸‹çš„è®¾è®¡æ€æƒ³ã€‚ä½†ï¼Œä¸æ˜¯è¯´ç»™ä½ ä¸€ä¸ªé€šç”¨çš„æ¶æ„æ¨¡å¼ï¼Œä½ å°±èƒ½å¼€å‘å‡ºå¹²å‡€(é«˜å†…èš)ã€æ•´æ´(ä½è€¦åˆ)ã€æ¼‚äº®(æ¨¡å—åŒ–)çš„ä»£ç ã€‚è¿™å°±åƒæ˜¯ä½ å®¶ä½ä¸‰å±…ã€ä»–å®¶ä¹Ÿä½ä¸‰å±…ï¼Œä½†æ˜¯ä½ ä»¬å±‹å­çš„èˆ’é€‚æƒ…å†µå°±ä¸€æ ·å—ï¼Ÿï½›å†æœ‰ï¼Œä½ å®¶é‡Œä¼šæŠŠå•æ‰€å®‰åœ¨å¨æˆ¿å—ï¼Ÿä½†ä½ çš„ä»£ç æ˜¯å¦è¿™ä¹ˆå¹²è¿‡ï¼Œä¸åˆç†çš„æ‘†æ”¾å¯¼è‡´é‡æ„å»¶æœŸã€‚ï½
lock: need
---

# DDDä¸“é¢˜æ¡ˆä¾‹äºŒã€Šé¢†åŸŸå±‚å†³ç­–è§„åˆ™æ ‘æœåŠ¡è®¾è®¡ã€‹

ä½œè€…ï¼šå°å‚…å“¥
<br/>åšå®¢ï¼š[https://bugstack.cn](https://bugstack.cn)
<br/>DDDé¡¹ç›®ï¼š[https://t.zsxq.com/jAi2nUf](https://t.zsxq.com/jAi2nUf)

> æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„

## å‰è¨€ä»‹ç»

åœ¨ä¸Šä¸€ç« èŠ‚ä»‹ç»äº†é¢†åŸŸé©±åŠ¨è®¾è®¡çš„åŸºæœ¬æ¦‚å¿µä»¥åŠæŒ‰ç…§é¢†åŸŸé©±åŠ¨è®¾è®¡çš„æ€æƒ³è¿›è¡Œä»£ç åˆ†å±‚ï¼Œä½†æ˜¯ä»…ä»…åªæ˜¯ä»ä¸€ä¸ªç®€å•çš„åˆ†å±‚ç»“æ„ä¸Šä¾ç„¶æ²¡æ³•ç†è§£DDDä»¥åŠå¦‚ä½•å»å¼€å‘è¿™æ ·çš„å¾®æœåŠ¡ã€‚å¦å¤–å¾€å¾€æŒ‰ç…§è¿™æ ·åˆ†å±‚åä¾ç„¶æ„Ÿè§‰å’ŒMVCä¹Ÿæ²¡æœ‰ä»€ä¹ˆå·®åˆ«ï¼Œä¹Ÿæ²¡æœ‰æ„Ÿå—åˆ°å¸¦æ¥ä»€ä¹ˆéå¸¸å¤§çš„å¥½å¤„ã€‚é‚£ä¹ˆé—®é¢˜å‡ºåœ¨å“ªå‘¢ï¼Ÿæˆ‘ä¸ªäººè§‰å¾—DDDå­¦èµ·æ¥æ›´åƒæ˜¯ä¸€å¥—æŒ‡å¯¼æ€æƒ³ï¼Œä¸æ–­çš„å°†å­¦ä¹ è€…å¼•å…¥åˆ°é¢†åŸŸè§¦å‘çš„æ€ç»´ä¸­å»ï¼Œè€Œè¿™æ°æ°ä¹Ÿæ˜¯æœ€éš¾å­¦ä¹ çš„åœ°æ–¹ã€‚æ—¶è€Œæ„Ÿè§‰ä¼šäº†ï¼Œè€Œå®é™…å¼€å‘ä¸­åˆä¸å¯¹ï¼Œæœ¬æ¥å·²ç»æ‹†è§£æ¸…æ™°äº†ï¼Œä½†æ€ä¹ˆåˆé‚£ä¹ˆåƒMVCäº†ã€‚ç”šè‡³æ€€ç–‘è‡ªå·±ï¼Œæˆ‘åœ¨å¹²å˜›ï¼Ÿ

æ— è®ºæ˜¯DDDã€MVCï¼Œä»–ä»¬æ›´åƒæ˜¯å®¶é‡Œä¸‰å±…æˆ–è€…å››å±€çš„æ ¼å±€ï¼Œæ¯ä¸€ç§æ ¼å±€æ–¹å¼éƒ½æ˜¯ä¸ºäº†æ›´å¥½çš„å®ç°å¯¹åº”æ¶æ„ä¸‹çš„è®¾è®¡æ€æƒ³ã€‚ä½†ï¼Œä¸æ˜¯è¯´ç»™ä½ ä¸€ä¸ªé€šç”¨çš„æ¶æ„æ¨¡å¼ï¼Œä½ å°±èƒ½å¼€å‘å‡ºå¹²å‡€(é«˜å†…èš)ã€æ•´æ´(ä½è€¦åˆ)ã€æ¼‚äº®(æ¨¡å—åŒ–)çš„ä»£ç ã€‚è¿™å°±åƒæ˜¯ä½ å®¶ä½ä¸‰å±…ã€ä»–å®¶ä¹Ÿä½ä¸‰å±…ï¼Œä½†æ˜¯ä½ ä»¬å±‹å­çš„èˆ’é€‚æƒ…å†µå°±ä¸€æ ·å—ï¼Ÿï½›å†æœ‰ï¼Œä½ å®¶é‡Œä¼šæŠŠå•æ‰€å®‰åœ¨å¨æˆ¿å—ï¼Ÿä½†ä½ çš„ä»£ç æ˜¯å¦è¿™ä¹ˆå¹²è¿‡ï¼Œä¸åˆç†çš„æ‘†æ”¾å¯¼è‡´é‡æ„å»¶æœŸã€‚ï½

å¦å¤–DDDä¹‹æ‰€ä»¥çœ‹ç€ç®€å•ä½†åˆä¸é‚£ä¹ˆå¥½è½åœ°ï¼Œä¸ªäººè®¤ä¸ºå¾ˆé‡è¦å°±æ˜¯é¢†åŸŸæ€æƒ³ï¼ŒDDDåªæ˜¯æŒ‡å¯¼ä½†æ˜¯ä¸èƒ½æŠŠäº’è”ç½‘å¤©ä¸‹æ¯ä¸€ä¸ªä¸šåŠ¡è¡Œä¸ºå¼€å‘éƒ½æ‹¿å‡ºæ¥ä¸¾ä¾‹å­ç»™ä½ çœ‹ï¼Œæ¯ä¸ªé¢†åŸŸéœ€è¦è®¾è®¡ã€‚æ‰€ä»¥éœ€è¦ä¸€äº›é¢†åŸŸä¸“å®¶ï½›äº§å“+æ¶æ„+ä¸æ˜¯æ ç²¾çš„ç¨‹åºçŒ¿ï½æ¥è®¨è®ºæ¢³ç†ï¼Œå°†ä¸šåŠ¡å½¢æ€è®¾è®¡å‡ºåˆç†çš„æ¶æ„&ä»£ç ã€‚

- æœ¬èŠ‚æ¡ˆä¾‹ä»£ç ï¼š[https://github.com/fuzhengwei/itstack-demo-ddd](https://github.com/fuzhengwei/itstack-demo-ddd)
- æ–°ç‰ˆDDDè®²è§£ï¼š[æ¶æ„çš„æœ¬è´¨ä¹‹ DDD æ¶æ„](https://bugstack.cn/md/road-map/ddd.html)

## æ¡ˆä¾‹ç›®æ ‡

æœ¬æ¡ˆä¾‹é€šè¿‡ä¸€ä¸ªå•†å“ä¸‹å•è§„åˆ™çš„åœºæ™¯æ¥è¿›è¡Œæ¼”ç¤ºDDDï¼›
1. å‡è®¾äº§å“éœ€æ±‚ä¸šåŠ¡è¿è¡Œäººå‘˜å¯ä»¥å¯¹ä¸åŒçš„å•†å“é…ç½®ä¸€äº›è§„åˆ™ï¼Œè¿™äº›è§„åˆ™å¯ä»¥æ»¡è¶³ä¸åŒç”¨æˆ·ç±»å‹å¯ä»¥ä¸‹å•ä¸åŒå•†å“ã€‚
2. å¦å¤–ä¸€äº›è¡Œä¸ºè§„åˆ™æ˜¯ä¼šéšç€ä¸šåŠ¡å‘å±•è€Œå¢åŠ æˆ–è€…å˜åŠ¨çš„ï¼Œæ‰€ä»¥ä¸èƒ½å†™æ­»ï½›å†™æ­»å¤ªå“äººäº†ï½ã€‚
3. æ•°æ®åº“çš„POç±»ä¸åº”è¯¥è¢«å¤–éƒ¨æœåŠ¡è°ƒç”¨ï¼Œè¿™ä¹Ÿæ˜¯å¿…é¡»çš„ã€‚å¦‚æœä½ å¼€å‘è¿‡å¾ˆå¤šç³»ç»Ÿï¼Œé‚£ä¹ˆå¯èƒ½å·²ç»åƒè¿‡äºå¹¶æ„è¯†åˆ°è¿™ä¸ªé—®é¢˜ã€‚
4. æŒ‰ç…§DDDæ€æƒ³æˆ‘ä»¬å°è¯•éœ€è¦è®¾è®¡ä¸€ä¸ªè§„åˆ™å¼•æ“çš„æœåŠ¡ï¼Œé€šè¿‡ç»™å¤–éƒ¨æä¾›éå¸¸ç®€å•çš„æ¥å£ï¼ˆapplicationï¼‰æ¥è·å–æœ€ç»ˆç»“æœã€‚
5. é€šè¿‡è¿™æ ·çš„æ¡ˆä¾‹å¯ä»¥å¾ˆå®¹æ˜“çš„æ„Ÿå—åˆ°ç›®å‰çš„å››å±‚æ¶æ„ç¡®å®åœ¨å®ç°DDDæ€æƒ³ä¸Šæœ‰å¾ˆå¤šçš„å¸®åŠ©ã€‚

>å¦‚å›¾ï¼›DDDåˆ†å±‚ç»“æ„ | æŒ‡å¯¼è®¾è®¡æ¶æ„

![bugstackè™«æ´æ ˆ & åˆ†å±‚ç»“æ„](https://bugstack.cn/assets/images/pic-content/2019/10/DDD-01-2.png)

## DDDæ€æƒ³ Â· å¼€å‘è®¾è®¡
é€šè¿‡é¢†åŸŸé©±åŠ¨è®¾è®¡çš„æ€æƒ³ï¼Œä»é¢†åŸŸçŸ¥è¯†ä¸­æå–å’Œåˆ’åˆ†ä¸ºä¸€ä¸ªä¸€ä¸ªçš„å­é¢†åŸŸï¼ˆæ ¸å¿ƒå­åŸŸï¼Œé€šç”¨å­åŸŸï¼Œæ”¯æ’‘å­åŸŸï¼‰ï¼Œå¹¶åœ¨å­é¢†åŸŸä¸Šå»ºç«‹æ¨¡å‹ã€‚é‚£ä¹ˆåœ¨æŠ€æœ¯å®ç°ä¸Šå°±éœ€è¦å»æ”¯æ’‘è¿™ç§å»ºæ¨¡ï¼Œä»¥ä½¿æˆ‘ä»¬çš„ä»£ç æ¨¡å—ç‹¬ç«‹ã€å…æ±¡æŸ“ã€æ˜“äºæ‰©å±•ã€‚

åœ¨ä¸Šé¢æˆ‘ä»¬æåˆ°éœ€è¦å¼€å‘ä¸€ä¸ªå¯æ‰©å±•ä½¿ç”¨çš„è§„åˆ™æ ‘ï¼Œé‚£ä¹ˆå¦‚æœåªæ˜¯å•çº¯çš„ä¸€æ¬¡æ€§éœ€æ±‚ï¼Œæœ€å¿«çš„æ–¹å¼æ˜¯ifè¯­å¥å°±æå®šäº†ã€‚ä½†æ˜¯ä¸ºäº†ä½¿è¿™ä¸ªé¢†åŸŸæœåŠ¡å…·å¤‡è‰¯å¥½çš„ä½¿ç”¨å’Œæ‰©å±•æ€§ï¼Œæˆ‘ä»¬éœ€è¦åšäº›æ‹†åˆ†ï¼Œé‚£ä¹ˆå¦‚ä¸‹ï¼›
1. ä½ æ˜¯å¦æƒ³è¿‡ç³»ç»Ÿåœ¨è¿‡æ»¤è¿‡åˆ™çš„æ—¶å€™å…¶å®å°±åƒæ‰§è¡Œä¸€æ£µäºŒå‰æ ‘ä¸€æ ·éå·¦å³å³ä¾§ï¼Œæ¯ä¸€æ¡çº¿ä¸Šéƒ½æœ‰ç€æ‰§è¡Œæ¡ä»¶ï¼Œé€šè¿‡åˆ¤æ–­æ¥è¾¾åˆ°æœ€ç»ˆçš„ç»“æœã€‚
2. æŒ‰ç…§æ ‘å½¢ç»“æ„æˆ‘ä»¬å°†å®šä¹‰å‡ºæ¥å››ä¸ªç±»ï¼›æ ‘ã€èŠ‚ç‚¹ã€æœå®ã€æŒ‡å‘çº¿(From-To)ï¼Œç”¨äºæè¿°æˆ‘ä»¬çš„è§„åˆ™è¡Œä¸ºã€‚
3. å†æ­¤åŸºç¡€ä¸Šéœ€è¦å®ç°ä¸€ä¸ªé€»è¾‘å®šä¹‰ä¸è§„åˆ™æ ‘æ‰§è¡Œå¼•æ“ï¼Œé€šè¿‡ç»Ÿä¸€çš„å¼•æ“æœåŠ¡æ¥æ‰§è¡Œæˆ‘ä»¬æ¯æ¬¡é…ç½®å¥½çš„è§„åˆ™æ ‘ã€‚

>å¦‚å›¾ï¼›é¢†åŸŸå¼€å‘è®¾è®¡æœåŠ¡

![bugstackè™«æ´æ ˆ & é¢†åŸŸå¼€å‘è®¾è®¡æœåŠ¡](https://bugstack.cn/assets/images/pic-content/2019/10/DDD-02-1.png)

## å·¥ç¨‹æ¨¡å‹
```java
itstack-demo-ddd-02
â””â”€â”€ src
    â”œâ”€â”€ main
    â”‚   â”œâ”€â”€ java
    â”‚   â”‚   â””â”€â”€ org.itstack.demo
    â”‚   â”‚       â”œâ”€â”€ application
    â”‚   â”‚       â”‚	â”œâ”€â”€ MallRuleService.java	
    â”‚   â”‚       â”‚	â””â”€â”€ MallTreeService.java	
    â”‚   â”‚       â”œâ”€â”€ domain
    â”‚   â”‚       â”‚	â”œâ”€â”€ rule
    â”‚   â”‚       â”‚	â”‚   â”œâ”€â”€ model
    â”‚   â”‚       â”‚	â”‚   â”‚   â”œâ”€â”€ aggregates
    â”‚   â”‚       â”‚	â”‚   â”‚   â”‚   â””â”€â”€ UserRichInfo.java	
    â”‚   â”‚       â”‚	â”‚   â”‚   â””â”€â”€ vo
    â”‚   â”‚       â”‚	â”‚   â”‚       â”œâ”€â”€ DecisionMatter.java
    â”‚   â”‚       â”‚	â”‚   â”‚       â”œâ”€â”€ EngineResult.java
    â”‚   â”‚       â”‚	â”‚   â”‚       â”œâ”€â”€ TreeNodeInfo.java
    â”‚   â”‚       â”‚	â”‚   â”‚       â”œâ”€â”€ TreeNodeLineInfo.java	
    â”‚   â”‚       â”‚	â”‚   â”‚       â””â”€â”€ UserSchool.java	
    â”‚   â”‚       â”‚	â”‚   â”œâ”€â”€ repository
    â”‚   â”‚       â”‚	â”‚   â”‚   â””â”€â”€ IRuleRepository.java	
    â”‚   â”‚       â”‚	â”‚   â””â”€â”€ service
    â”‚   â”‚       â”‚	â”‚       â”œâ”€â”€ engine
    â”‚   â”‚       â”‚	â”‚       â”‚   â”œâ”€â”€ impl	
    â”‚   â”‚       â”‚	â”‚       â”‚   â””â”€â”€ EngineFilter.java	
    â”‚   â”‚       â”‚	â”‚       â”œâ”€â”€ logic
    â”‚   â”‚       â”‚	â”‚       â”‚   â”œâ”€â”€ impl	
    â”‚   â”‚       â”‚	â”‚       â”‚   â””â”€â”€ LogicFilter.java	
    â”‚   â”‚       â”‚	â”‚       â””â”€â”€ MallRuleServiceImpl.java	
    â”‚   â”‚       â”‚	â””â”€â”€ tree
    â”‚   â”‚       â”‚	    â”œâ”€â”€ model
    â”‚   â”‚       â”‚	    â”‚   â”œâ”€â”€ aggregates
    â”‚   â”‚       â”‚	    â”‚   â”‚   â””â”€â”€ TreeCollect.java	
    â”‚   â”‚       â”‚	    â”‚   â””â”€â”€ vo
    â”‚   â”‚       â”‚	    â”‚       â”œâ”€â”€ TreeInfo.java	
    â”‚   â”‚       â”‚	    â”‚       â””â”€â”€ TreeRulePoint.java	
    â”‚   â”‚       â”‚	    â”œâ”€â”€ repository
    â”‚   â”‚       â”‚	    â”‚   â””â”€â”€ ITreeRepository.java	
    â”‚   â”‚       â”‚	    â””â”€â”€ service
    â”‚   â”‚       â”‚	        â””â”€â”€ MallTreeServiceImpl.java	
    â”‚   â”‚       â”œâ”€â”€ infrastructure
    â”‚   â”‚       â”‚	â”œâ”€â”€ common
    â”‚   â”‚       â”‚	â”‚   â””â”€â”€ Constants.java
    â”‚   â”‚       â”‚	â”œâ”€â”€ dao
    â”‚   â”‚       â”‚	â”‚   â”œâ”€â”€ RuleTreeDao.java
    â”‚   â”‚       â”‚	â”‚   â”œâ”€â”€ RuleTreeNodeDao.java	
    â”‚   â”‚       â”‚	â”‚   â””â”€â”€ RuleTreeNodeLineDao.java	
    â”‚   â”‚       â”‚	â”œâ”€â”€ po
    â”‚   â”‚       â”‚	â”‚   â”œâ”€â”€ RuleTree.java
    â”‚   â”‚       â”‚	â”‚   â”œâ”€â”€ RuleTreeConfig.java
    â”‚   â”‚       â”‚	â”‚   â”œâ”€â”€ RuleTreeNode.java	
    â”‚   â”‚       â”‚	â”‚   â””â”€â”€ RuleTreeNodeLine.java		
    â”‚   â”‚       â”‚	â”œâ”€â”€ repository
    â”‚   â”‚       â”‚	â”‚   â”œâ”€â”€ cache
    â”‚   â”‚       â”‚	â”‚   â”‚   â””â”€â”€ RuleCacheRepository.java
    â”‚   â”‚       â”‚	â”‚   â”œâ”€â”€ mysql
    â”‚   â”‚       â”‚	â”‚   â”‚   â”œâ”€â”€ RuleMysqlRepository.java	
    â”‚   â”‚       â”‚	â”‚   â”‚   â””â”€â”€ TreeMysqlRepository.java
    â”‚   â”‚       â”‚	â”‚   â”œâ”€â”€ RuleRepository.java	
    â”‚   â”‚       â”‚	â”‚   â””â”€â”€ TreeRepository.java	
    â”‚   â”‚       â”‚	â””â”€â”€ util
    â”‚   â”‚       â”‚	    â””â”€â”€ CacheUtil.java
    â”‚   â”‚       â”œâ”€â”€ interfaces
    â”‚   â”‚       â”‚	â”œâ”€â”€ dto
    â”‚   â”‚       â”‚	â”‚	â”œâ”€â”€ DecisionMatterDTO.java
    â”‚   â”‚       â”‚	â”‚	â””â”€â”€ TreeDTO.java	
    â”‚   â”‚       â”‚	â””â”€â”€ DDDController.java
    â”‚   â”‚       â””â”€â”€ DDDApplication.java
    â”‚   â””â”€â”€ resources	
    â”‚       â”œâ”€â”€ mybatis
    â”‚       â””â”€â”€ application.yml
    â””â”€â”€ test
         â””â”€â”€ java
             â””â”€â”€ org.itstack.demo.test
                 â””â”€â”€ ApiTest.java
```

**æ¼”ç¤ºéƒ¨åˆ†é‡ç‚¹ä»£ç å—ï¼Œå®Œæ•´ä»£ç ä¸‹è½½å…³æ³¨å…¬ä¼—å·ï¼›bugstackè™«æ´æ ˆ | å›å¤DDDè½åœ°**

### applicationåº”ç”¨å±‚

>application/MallRuleService.java | åº”ç”¨å±‚å®šä¹‰æ¥å£æœåŠ¡ï¼Œä¹Ÿå¯ä»¥é€‚å½“åšç®€å•åŒ…è£…

```java
/**
 * å•†è¶…è§„åˆ™è¿‡æ»¤æœåŠ¡ï¼›æä¾›è§„åˆ™æ ‘å†³ç­–åŠŸèƒ½
 * å¾®ä¿¡å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ | ä¸“æ³¨åŸåˆ›æŠ€æœ¯ä¸“é¢˜æ¡ˆä¾‹
 * è®ºå›ï¼šhttp://bugstack.cn
 * Create by ä»˜æ”¿å§” on @2019
 */
public interface MallRuleService {

    /**
     * å†³ç­–æœåŠ¡
     * @param matter å†³ç­–ç‰©æ–™
     * @return       å†³ç­–ç»“æœ
     */
    EngineResult process(final DecisionMatter matter);

}
```

### domainé¢†åŸŸå±‚
domainä¸­æœ‰ä¸¤ä¸ªé¢†åŸŸæœåŠ¡ï¼›è§„åˆ™æ ‘ä¿¡æ¯é¢†åŸŸã€è§„åˆ™æ‰§è¡Œé¢†åŸŸï¼Œé€šè¿‡åˆç†çš„æŠ½è±¡åŒ–æ¥å®ç°é«˜å†…èšã€ä½è€¦åˆçš„æ¨¡å—åŒ–æœåŠ¡

>domain/service/MallRuleServiceImpl.java | é¢†åŸŸå±‚ä¸­çš„serviceæ¥å®ç°åº”ç”¨å±‚æ¥å£

```java
/**
 * è§„åˆ™æ ‘æœåŠ¡ï¼›æä¾›è§„åˆ™è§„å¾‹åŠŸèƒ½
 *
 * 1ã€ruleåŒ…ä¸‹åªè¿›è¡Œè§„åˆ™å†³ç­–é¢†åŸŸçš„å¤„ç†
 * 2ã€å°è£…å†³ç­–è¡Œä¸ºåˆ°é¢†åŸŸæ¨¡å‹ä¸­ï¼Œå¤–éƒ¨åªéœ€è¦è°ƒç”¨å’Œå¤„ç†ç»“æœå³å¯
 * 3ã€å¯ä»¥æ‰©å±•ä¸åŒçš„å†³ç­–å¼•æ“è¿›è¡Œç»Ÿä¸€ç®¡ç†
 *
 * å¾®ä¿¡å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ | ä¸“æ³¨åŸåˆ›æŠ€æœ¯ä¸“é¢˜æ¡ˆä¾‹
 * è®ºå›ï¼šhttp://bugstack.cn
 * Create by ä»˜æ”¿å§” on @2019
 */
@Service("mallRuleService")
public class MallRuleServiceImpl implements MallRuleService {

    private Logger logger = LoggerFactory.getLogger(MallRuleServiceImpl.class);

    @Resource(name = "ruleEngineHandle")
    private EngineFilter ruleEngineHandle;

    @Override
    public EngineResult process(DecisionMatter matter) {
        try {
            return ruleEngineHandle.process(matter);
        } catch (Exception e) {
            logger.error("å†³ç­–å¼•æ“æ‰§è¡Œå¤±è´¥", e);
            return new EngineResult(false);
        }
    }

}
```

>domain/service/logic/LogicFilter.java | é€»è¾‘å†³ç­–å®šä¹‰

```java
/**
 * å¾®ä¿¡å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ | ä¸“æ³¨åŸåˆ›æŠ€æœ¯ä¸“é¢˜æ¡ˆä¾‹
 * è®ºå›ï¼šhttp://bugstack.cn
 * Create by ä»˜æ”¿å§” on @2019
 */
public interface LogicFilter {

    /**
     * é€»è¾‘å†³ç­–å™¨
     * @param matterValue          å†³ç­–å€¼
     * @param treeNodeLineInfoList å†³ç­–èŠ‚ç‚¹
     * @return                     ä¸‹ä¸€ä¸ªèŠ‚ç‚¹Id
     */
    Long filter(String matterValue, List<TreeNodeLineInfo> treeNodeLineInfoList);

    /**
     * è·å–å†³ç­–å€¼
     *
     * @param decisionMatter å†³ç­–ç‰©æ–™
     * @return               å†³ç­–å€¼
     */
    String matterValue(DecisionMatter decisionMatter);

}
```

>domain/service/engine/EngineFilter.java | å¼•æ“æ‰§è¡Œå®šä¹‰

```java
/**
 * å¾®ä¿¡å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ | ä¸“æ³¨åŸåˆ›æŠ€æœ¯ä¸“é¢˜æ¡ˆä¾‹
 * è®ºå›ï¼šhttp://bugstack.cn
 * Create by ä»˜æ”¿å§” on @2019
 */
public interface EngineFilter {

    EngineResult process(final DecisionMatter matter) throws Exception;

}
```

### infrastructureåŸºç¡€å±‚
1ã€å®ç°é¢†åŸŸå±‚ä»“å‚¨å®šä¹‰
2ã€æ•°æ®åº“æ“ä½œä¸ºéä¸šåŠ¡å±æ€§çš„åŠŸèƒ½æ“ä½œ
3ã€åœ¨ä»“å‚¨å®ç°å±‚è¿›è¡Œç»„åˆè£…é…DAO&Redis&Cacheç­‰

>infrastructure/repository/RuleRepository.java

```java
/**
 * å¾®ä¿¡å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ | ä¸“æ³¨åŸåˆ›æŠ€æœ¯ä¸“é¢˜æ¡ˆä¾‹
 * è®ºå›ï¼šhttp://bugstack.cn
 * Create by ä»˜æ”¿å§” on @2019
 */
@Repository("ruleRepository")
public class RuleRepository implements IRuleRepository {

    @Resource(name = "ruleMysqlRepository")
    private RuleMysqlRepository ruleMysqlRepository;
    @Resource(name = "ruleCacheRepository")
    private RuleCacheRepository ruleCacheRepository;

    @Override
    public TreeRuleRich queryTreeRuleRich(Long treeId) {
        TreeRuleRich treeRuleRich = ruleCacheRepository.queryTreeRuleRich(treeId);
        if (null != treeRuleRich) return treeRuleRich;
        return ruleMysqlRepository.queryTreeRuleRich(treeId);
    }

}
```

### interfacesæ¥å£å±‚
1ã€åŒ…è£…åº”ç”¨æ¥å£å¯¹å¤–æä¾›api
2ã€å¤–éƒ¨ä¼ è¾“å¯¹è±¡é‡‡ç”¨DTOç±»ï¼Œä¸»è¦ä¸ºäº†é¿å…å†…éƒ¨ç±»è¢«æ±¡æŸ“ï½›ä¸æ–­çš„è¿­ä»£çš„éœ€æ±‚ä¼šåœ¨ç±»ä¸­å¢åŠ å¾ˆå¤šå­—æ®µï½
3ã€ç›®å‰ä¾ç„¶æ˜¯æä¾›çš„HttpæœåŠ¡ï¼Œå¦‚æœæä¾›çš„rpcæœåŠ¡ï¼Œå°†éœ€è¦å¯¹å¤–æä¾›å¯å¼•ç”¨jar

>interfaces/DDDController.java

```java
**
 * å¾®ä¿¡å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ | æ¬¢è¿å…³æ³¨å­¦ä¹ ä¸“é¢˜æ¡ˆä¾‹
 * è®ºå›ï¼šhttp://bugstack.cn
 * Create by ä»˜æ”¿å§” on @2019
 */
@Controller
public class DDDController {

    private Logger logger = LoggerFactory.getLogger(DDDController.class);

    @Resource
    private MallTreeService mallTreeService;
    @Resource
    private MallRuleService mallRuleService;

    /**
     * æµ‹è¯•æ¥å£ï¼šhttp://localhost:8080/api/tree/queryTreeSummaryInfo
     * è¯·æ±‚å‚æ•°ï¼š{"treeId":10001}
     */
    @RequestMapping(path = "/api/tree/queryTreeSummaryInfo", method = RequestMethod.POST)
    @ResponseBody
    public ResponseEntity queryTreeSummaryInfo(@RequestBody TreeDTO request) {
        String reqStr = JSON.toJSONString(request);
        try {
            logger.info("æŸ¥è¯¢è§„åˆ™æ ‘ä¿¡æ¯{}Begin reqï¼š{}", request.getTreeId(), reqStr);
            TreeCollect treeCollect = mallTreeService.queryTreeSummaryInfo(request.getTreeId());
            logger.info("æŸ¥è¯¢è§„åˆ™æ ‘ä¿¡æ¯{}End resï¼š{}", request.getTreeId(), JSON.toJSON(treeCollect));
            return new ResponseEntity<>(treeCollect, HttpStatus.OK);
        } catch (Exception e) {
            logger.error("æŸ¥è¯¢è§„åˆ™æ ‘ä¿¡æ¯{}Error reqï¼š{}", request.getTreeId(), reqStr, e);
            return new ResponseEntity<>(e.getMessage(), HttpStatus.OK);
        }
    }

    /**
     * æµ‹è¯•æ¥å£ï¼šhttp://localhost:8080/api/tree/decisionRuleTree
     * è¯·æ±‚å‚æ•°ï¼š{"treeId":10001,"userId":"fuzhengwei","valMap":{"gender":"man","age":"25"}}
     */
    @RequestMapping(path = "/api/tree/decisionRuleTree", method = RequestMethod.POST)
    @ResponseBody
    public ResponseEntity decisionRuleTree(@RequestBody DecisionMatterDTO request) {
        String reqStr = JSON.toJSONString(request);
        try {
            logger.info("è§„åˆ™æ ‘è¡Œä¸ºä¿¡æ¯å†³ç­–{}Begin reqï¼š{}", request.getTreeId(), reqStr);
            DecisionMatter decisionMatter = new DecisionMatter();
            decisionMatter.setTreeId(request.getTreeId());
            decisionMatter.setUserId(request.getUserId());
            decisionMatter.setValMap(request.getValMap());
            EngineResult engineResult = mallRuleService.process(decisionMatter);
            logger.info("è§„åˆ™æ ‘è¡Œä¸ºä¿¡æ¯å†³ç­–{}End resï¼š{}", request.getTreeId(), JSON.toJSON(engineResult));
            return new ResponseEntity<>(engineResult, HttpStatus.OK);
        } catch (Exception e) {
            logger.error("è§„åˆ™æ ‘è¡Œä¸ºä¿¡æ¯å†³ç­–{}Error reqï¼š{}", request.getTreeId(), reqStr, e);
            return new ResponseEntity<>(e.getMessage(), HttpStatus.OK);
        }
    }

}
```

## æµ‹è¯•éªŒè¯

>è§„åˆ™æ ‘ç»“æ„{æ•°æ®åº“è½¬Json} | å¯è‡ªè¡Œå®šä¹‰

```java
{
    "treeNodeMap": {
        "1": {
            "nodeType": 1,
            "ruleDesc": "ç”¨æˆ·æ€§åˆ«[ç”·/å¥³]",
            "ruleKey": "userGender",
            "treeId": 10001,
            "treeNodeId": 1,
            "treeNodeLineInfoList": [
                {
                    "nodeIdFrom": 1,
                    "nodeIdTo": 11,
                    "ruleLimitType": 1,
                    "ruleLimitValue": "man"
                },
                {
                    "nodeIdFrom": 1,
                    "nodeIdTo": 12,
                    "ruleLimitType": 1,
                    "ruleLimitValue": "woman"
                }
            ]
        },
        "11": {
            "nodeType": 1,
            "ruleDesc": "ç”¨æˆ·å¹´é¾„",
            "ruleKey": "userAge",
            "treeId": 10001,
            "treeNodeId": 11,
            "treeNodeLineInfoList": [
                {
                    "nodeIdFrom": 11,
                    "nodeIdTo": 111,
                    "ruleLimitType": 3,
                    "ruleLimitValue": "25"
                },
                {
                    "nodeIdFrom": 11,
                    "nodeIdTo": 112,
                    "ruleLimitType": 3,
                    "ruleLimitValue": "25"
                }
            ]
        },
        "12": {
            "nodeType": 1,
            "ruleDesc": "ç”¨æˆ·å¹´é¾„",
            "ruleKey": "userAge",
            "treeId": 10001,
            "treeNodeId": 12,
            "treeNodeLineInfoList": [
                {
                    "nodeIdFrom": 12,
                    "nodeIdTo": 121,
                    "ruleLimitType": 3,
                    "ruleLimitValue": "25"
                },
                {
                    "nodeIdFrom": 12,
                    "nodeIdTo": 122,
                    "ruleLimitType": 3,
                    "ruleLimitValue": "25"
                }
            ]
        },
        "111": {
            "nodeType": 2,
            "nodeValue": "æœå®A",
            "treeId": 10001,
            "treeNodeId": 111,
            "treeNodeLineInfoList": [ ]
        },
        "112": {
            "nodeType": 2,
            "nodeValue": "æœå®B",
            "treeId": 10001,
            "treeNodeId": 112,
            "treeNodeLineInfoList": [ ]
        },
        "121": {
            "nodeType": 2,
            "nodeValue": "æœå®C",
            "treeId": 10001,
            "treeNodeId": 121,
            "treeNodeLineInfoList": [ ]
        },
        "122": {
            "nodeType": 2,
            "nodeValue": "æœå®D",
            "treeId": 10001,
            "treeNodeId": 122,
            "treeNodeLineInfoList": [ ]
        }
    },
    "treeRoot": {
        "treeId": 10001,
        "treeName": "è´­ç‰©åˆ†ç±»è§„åˆ™æ ‘",
        "treeRootNodeId": 1
    }
}
```

>é€šè¿‡postmanè°ƒç”¨ | raw => json 

**æŸ¥è¯¢è§„åˆ™æ ‘ä¿¡æ¯**
æµ‹è¯•æ¥å£ï¼šhttp://localhost:8080/api/tree/decisionRuleTree
è¯·æ±‚å‚æ•°ï¼š{"treeId":10001}

```java
{
    "treeInfo": {
        "treeId": 10001,
        "treeName": "è´­ç‰©åˆ†ç±»è§„åˆ™æ ‘",
        "treeDesc": "ç”¨äºåˆ†ç±»ä¸åŒç±»å‹ç”¨æˆ·å¯è´­ç‰©èŒƒå›´",
        "nodeCount": 7,
        "lineCount": 6
    },
    "treeRulePointList": [
        {
            "ruleKey": "userGender",
            "ruleDesc": "ç”¨æˆ·æ€§åˆ«[ç”·/å¥³]"
        },
        {
            "ruleKey": "userAge",
            "ruleDesc": "ç”¨æˆ·å¹´é¾„"
        }
    ]
}
```

![å¾®ä¿¡å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ & æŸ¥è¯¢è§„åˆ™æ ‘ä¿¡æ¯](https://bugstack.cn/assets/images/pic-content/2019/10/DDD-02-2.png)

**è§„åˆ™æ ‘è¡Œä¸ºä¿¡æ¯å†³ç­–**
æµ‹è¯•æ¥å£ï¼šhttp://localhost:8080/api/tree/decisionRuleTree
è¯·æ±‚å‚æ•°ï¼š{"treeId":10001}

```java
{
    "userId": "fuzhengwei",
    "treeId": 10001,
    "nodeId": 112,
    "nodeValue": "æœå®B",
    "success": true
}
```

![å¾®ä¿¡å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ & è§„åˆ™æ ‘è¡Œä¸ºä¿¡æ¯å†³ç­–](https://bugstack.cn/assets/images/pic-content/2019/10/DDD-02-3.png)

```java
  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v2.0.5.RELEASE)

2019-10-19 18:22:05.672  INFO 13820 --- [           main] org.itstack.demo.DDDApplication          : Starting DDDApplication on fuzhengwei-PC with PID 13820 (E:\itstack\itstack.org\itstack-demo-ddd-02\target\classes started by fuzhengwei in E:\itstack\itstack.org\itstack-demo-ddd-02)
2019-10-19 18:22:05.675  INFO 13820 --- [           main] org.itstack.demo.DDDApplication          : No active profile set, falling back to default profiles: default
2019-10-19 18:22:05.952  INFO 13820 --- [           main] ConfigServletWebServerApplicationContext : Refreshing org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@3c4297f: startup date [Sat Oct 19 18:22:05 CST 2019]; root of context hierarchy
2019-10-19 18:22:07.756  INFO 13820 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2019-10-19 18:22:07.870  INFO 13820 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2019-10-19 18:22:07.870  INFO 13820 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/8.5.34
2019-10-19 18:22:07.896  INFO 13820 --- [ost-startStop-1] o.a.catalina.core.AprLifecycleListener   : The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: [D:\Program Files Java\Java\jdk1.8.0_162\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\ProgramData\Oracle\Java\javapath;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;D:\Program Files Java\SlikSvn\bin;D:\Program Files Java\MySQL Server 5.1\bin;D:\Program Files Java\TortoiseGit\bin;D:\Program Files\nodejs\;D:\Program Files Java\Java\jdk1.6.0_24\bin;D:\Program Files Java\apache-maven-3.2.3\bin;C:\Users\fuzhengwei\AppData\Roaming\npm;D:\Program Files Java\Git\cmd;;.]
2019-10-19 18:22:08.040  INFO 13820 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2019-10-19 18:22:08.040  INFO 13820 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 2088 ms
2019-10-19 18:22:08.102  INFO 13820 --- [ost-startStop-1] o.s.b.w.servlet.ServletRegistrationBean  : Servlet dispatcherServlet mapped to [/]
2019-10-19 18:22:08.126  INFO 13820 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'characterEncodingFilter' to: [/*]
2019-10-19 18:22:08.127  INFO 13820 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
2019-10-19 18:22:08.127  INFO 13820 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'httpPutFormContentFilter' to: [/*]
2019-10-19 18:22:08.127  INFO 13820 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'requestContextFilter' to: [/*]
2019-10-19 18:22:09.118  INFO 13820 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2019-10-19 18:22:09.383  INFO 13820 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : Looking for @ControllerAdvice: org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@3c4297f: startup date [Sat Oct 19 18:22:05 CST 2019]; root of context hierarchy
2019-10-19 18:22:10.261  INFO 13820 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "{[/api/tree/decisionRuleTree],methods=[POST]}" onto public org.springframework.http.ResponseEntity org.itstack.demo.interfaces.DDDController.decisionRuleTree(org.itstack.demo.interfaces.dto.DecisionMatterDTO)
2019-10-19 18:22:10.263  INFO 13820 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "{[/api/tree/queryTreeSummaryInfo],methods=[POST]}" onto public org.springframework.http.ResponseEntity org.itstack.demo.interfaces.DDDController.queryTreeSummaryInfo(org.itstack.demo.interfaces.dto.TreeDTO)
2019-10-19 18:22:10.272  INFO 13820 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
2019-10-19 18:22:10.274  INFO 13820 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
2019-10-19 18:22:10.309  INFO 13820 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2019-10-19 18:22:10.309  INFO 13820 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2019-10-19 18:22:16.272  INFO 13820 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Registering beans for JMX exposure on startup
2019-10-19 18:22:16.273  INFO 13820 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Bean with name 'dataSource' has been autodetected for JMX exposure
2019-10-19 18:22:16.279  INFO 13820 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Located MBean 'dataSource': registering with JMX server as MBean [com.zaxxer.hikari:name=dataSource,type=HikariDataSource]
2019-10-19 18:22:16.375  INFO 13820 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2019-10-19 18:22:16.381  INFO 13820 --- [           main] org.itstack.demo.DDDApplication          : Started DDDApplication in 11.458 seconds (JVM running for 20.584)
2019-10-19 18:22:31.336  INFO 13820 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring FrameworkServlet 'dispatcherServlet'
2019-10-19 18:22:31.336  INFO 13820 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : FrameworkServlet 'dispatcherServlet': initialization started
2019-10-19 18:22:31.372  INFO 13820 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : FrameworkServlet 'dispatcherServlet': initialization completed in 36 ms
2019-10-19 18:22:32.427  INFO 13820 --- [nio-8080-exec-1] o.itstack.demo.interfaces.DDDController  : è§„åˆ™æ ‘è¡Œä¸ºä¿¡æ¯å†³ç­–10001Begin reqï¼š{"treeId":10001,"userId":"fuzhengwei","valMap":{"gender":"man","age":"25"}}
2019-10-19 18:22:32.508  INFO 13820 --- [nio-8080-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2019-10-19 18:22:32.956  INFO 13820 --- [nio-8080-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2019-10-19 18:22:33.028  INFO 13820 --- [nio-8080-exec-1] o.i.d.d.rule.service.engine.EngineBase   : æ ‘å¼•æ“=>Teståˆ†ç±»è§„åˆ™æ ‘ userIdï¼šfuzhengwei treeIdï¼š10001 treeNodeï¼š11 ruleKeyï¼šuserGender matterValueï¼šman
2019-10-19 18:22:33.028  INFO 13820 --- [nio-8080-exec-1] o.i.d.d.rule.service.engine.EngineBase   : æ ‘å¼•æ“=>Teståˆ†ç±»è§„åˆ™æ ‘ userIdï¼šfuzhengwei treeIdï¼š10001 treeNodeï¼š112 ruleKeyï¼šuserAge matterValueï¼š25
2019-10-19 18:22:33.039  INFO 13820 --- [nio-8080-exec-1] o.itstack.demo.interfaces.DDDController  : è§„åˆ™æ ‘è¡Œä¸ºä¿¡æ¯å†³ç­–10001End resï¼š{"treeId":10001,"nodeValue":"æœå®B","success":true,"nodeId":112,"userId":"fuzhengwei"}
2019-10-19 18:23:36.989  INFO 13820 --- [nio-8080-exec-5] o.itstack.demo.interfaces.DDDController  : æŸ¥è¯¢è§„åˆ™æ ‘ä¿¡æ¯10001Begin reqï¼š{"treeId":10001}
2019-10-19 18:23:37.006  INFO 13820 --- [nio-8080-exec-5] o.itstack.demo.interfaces.DDDController  : æŸ¥è¯¢è§„åˆ™æ ‘ä¿¡æ¯10001End resï¼š{"treeInfo":{"treeId":10001,"treeName":"è´­ç‰©åˆ†ç±»è§„åˆ™æ ‘","treeDesc":"ç”¨äºåˆ†ç±»ä¸åŒç±»å‹ç”¨æˆ·å¯è´­ç‰©èŒƒå›´","nodeCount":7,"lineCount":6},"treeRulePointList":[{"ruleDesc":"ç”¨æˆ·æ€§åˆ«[ç”·/å¥³]","ruleKey":"userGender"},{"ruleDesc":"ç”¨æˆ·å¹´é¾„","ruleKey":"userAge"}]}

```

## ç»¼ä¸Šæ€»ç»“
- **ä»¥ä¸Šæ¨¡æ‹Ÿè´­ç‰©åœºæ™¯ä¸‹çš„è§„åˆ™å¤„ç†æŠ½è±¡ä¸ºæ ‘å†³ç­–å¼•æ“ï¼Œä»¥è¾¾åˆ°ç‹¬ç«‹é¢†åŸŸæœåŠ¡ã€‚å¦å¤–å†³ç­–æœåŠ¡å¯ä»¥ä½¿ç”¨[drools](http://www.drools.org/)ï¼Œä»»ä½•æŠ½è±¡å¹¶ä¸ä¸€å®šæ°¸è¿œä½¿ç”¨ï¼Œä¸è¦æ‹˜æ³¥äºä¸€ç§å½¢å¼**
- **ä¸€äº›å¤§å‹æ¶æ„è®¾è®¡å¾€å¾€ä¸æ˜¯æ¢ä¸€ä¸ªè®¾è®¡æ¨¡å‹å°±èƒ½å½»åº•æå‡æ•ˆç‡ï¼Œè¿˜æ˜¯éœ€è¦äººå‘˜æ•´ä½“ç´ è´¨ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸æ–­åŸ¹å…»çš„è¿‡ç¨‹**
- **é¢†åŸŸé©±åŠ¨è®¾è®¡çš„æ€æƒ³å¹¶ä¸åªæ˜¯æ•™ä¼šç¨‹åºçŒ¿å†™ä»£ç ï¼Œä¹Ÿæ˜¯éç¨‹åºå‘˜ä»¥å¤–çš„æ‰€æœ‰äº’è”ç½‘äººå‘˜éƒ½é€‚åˆå­¦ä¹ çš„å†…å®¹**
- **å®¶é‡Œä½çš„èˆ’é€‚ä¸èˆ’é€‚ï¼Œå¹¶ä¸ä¸€å®šå–å†³äºä¸‰å±…æˆ–è€…å››å±…ï¼Œå¤§éƒ¨åˆ†è¿˜æ˜¯ä¾èµ–äºæ€ä¹ˆå¯¹æ ¼å±€çš„å¸ƒç½®ã€‚äº‹å¿…èº¬äº²ã€äº²åŠ›äº²ä¸ºçš„ç²¾ç›Šæ±‚ç²¾ä¹‹è·¯ï¼Œç»ˆç©¶ä¼šè®©ä½ è®¾è®¡å‡ºæ›´åŠ åˆç†çš„ä»£ç **

å¾®ä¿¡æœç´¢ã€Œ**bugstackè™«æ´æ ˆ**ã€å…¬ä¼—å·ï¼Œå…³æ³¨åå›å¤ã€Œ**DDDè½åœ°æ¡ˆä¾‹**ã€è·å–æœ¬æ–‡æºç &æ›´å¤šåŸåˆ›ä¸“é¢˜æ¡ˆä¾‹ï¼æ­¤å¤–æ¨èä½ ä¸€ä¸ªå¯ä»¥ä¸Šæ‰‹å®è·µçš„DDDé¡¹ç›®ï¼Œçœ‹çœ‹å¦‚ä½•ä»æµç¨‹ä¸­æç‚¼é¢†åŸŸè®¾è®¡ä»£ç å®ç°ï¼Œåœ¨åº”ç”¨å±‚ã€é¢†åŸŸå±‚ä»¥åŠåŸºç¡€å±‚çš„ä»“å‚¨å®ç°æ˜¯å¦‚ä½•å®Œæˆå¼€å‘å’Œè°ƒç”¨çš„ï¼Œé¡¹ç›®åœ°å€ï¼š[https://t.zsxq.com/jAi2nUf](https://t.zsxq.com/jAi2nUf)
