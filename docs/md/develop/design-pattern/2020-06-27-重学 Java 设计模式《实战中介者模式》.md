---
layout: post
category: itstack-demo-design
title: é‡å­¦ Java è®¾è®¡æ¨¡å¼ï¼šå®æˆ˜ä¸­ä»‹è€…æ¨¡å¼ã€ŒæŒ‰ç…§MybatisåŸç†æ‰‹å†™ORMæ¡†æ¶ï¼Œç»™JDBCæ–¹å¼æ“ä½œæ•°æ®åº“å¢åŠ ä¸­ä»‹è€…åœºæ™¯ã€
tagline: by å°å‚…å“¥
tag: [itstack-demo-design]
excerpt: åŒé¾„äººçš„å·®è·æ˜¯ä»ä»€ä¹ˆæ—¶å€™æ‹‰å¼€çš„ï¼ŸåŒæ ·çš„å¹¼å„¿å›­ã€åŒæ ·çš„å°å­¦ã€ä¸€æ ·çš„ä¹¦æœ¬ã€ä¸€æ ·çš„è¯¾å ‚ï¼Œæœ‰äººå­¦ä¹ å¥½ã€æœ‰äººå­¦ä¹ å·®ã€‚è€Œè¿™æœ€ç»ˆçš„å·®è·å°±ä»æœ€å¼€å§‹å¼€å§‹çš„ï¼Œä»Šå¤©æ˜¯ä»€ä¹ˆæ ·çš„ä½ ï¼Œäººç”Ÿå°±æ˜¯ä»€ä¹ˆæ ·çš„ä½ ã€‚
lock: need
---

# é‡å­¦ Java è®¾è®¡æ¨¡å¼ï¼šå®æˆ˜ä¸­ä»‹è€…æ¨¡å¼ã€ŒæŒ‰ç…§MybatisåŸç†æ‰‹å†™ORMæ¡†æ¶ï¼Œç»™JDBCæ–¹å¼æ“ä½œæ•°æ®åº“å¢åŠ ä¸­ä»‹è€…åœºæ™¯ã€

ä½œè€…ï¼šå°å‚…å“¥
<br/>åšå®¢ï¼š[https://bugstack.cn](https://bugstack.cn)

>æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„

<iframe id="B-Video" src="//player.bilibili.com/player.html?aid=811259799&bvid=BV1F34y1Y75j&cid=711553610&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="480"> </iframe>

## ä¸€ã€å‰è¨€

`åŒé¾„äººçš„å·®è·æ˜¯ä»ä»€ä¹ˆæ—¶å€™æ‹‰å¼€çš„`

åŒæ ·çš„å¹¼å„¿å›­ã€åŒæ ·çš„å°å­¦ã€ä¸€æ ·çš„ä¹¦æœ¬ã€ä¸€æ ·çš„è¯¾å ‚ï¼Œæœ‰äººå­¦ä¹ å¥½ã€æœ‰äººå­¦ä¹ å·®ã€‚ä¸åªæ˜¯ä¸Šå­¦ï¼Œå‡ ä¹äººç”Ÿå¤„å¤„éƒ½æ˜¯èµ›é“ï¼Œå‘ä»¤æªå“èµ·çš„æ—¶åˆ»ï¼Œä¹Ÿå°±æŠŠäººç”Ÿçš„å·®è·æ‹‰å¼€ã€‚ç¼–ç¨‹å¼€å‘è¿™æ¡è·¯ä¹Ÿæ˜¯å¾ˆé•¿å¾ˆå®½ï¼Œæœ‰äººè·‘å¾—å¿«æœ‰äººè·‘å¾—æ…¢ã€‚é‚£ä¹ˆä½ æ˜¯å¦æƒ³èµ·è¿‡ï¼Œè¿™ä¸€ç‚¹ç‚¹çš„å·®è·åˆ°é¥ä¸å¯åŠçš„è·ç¦»ï¼Œæ˜¯ä»å“ªä¸€å¤©å¼€å§‹çš„ã€‚æ‘¸æ‘¸è‚šå­çš„è‚‰ï¼Œçœ‹çœ‹è¿œå¤„çš„è·¯ï¼Œåˆ«äººè®²çš„æ˜¯`æ•…äº‹`ï¼Œä½ æƒ³èµ·çš„éƒ½æ˜¯`äº‹æ•…`ã€‚

`æ€æƒ³æ²¡æœ‰äº§å“é«˜æ‰å†™å‡ºä¸€ç‰‡çš„ifelse`

å½“ä½ æ‰¿æ¥ä¸€ä¸ªéœ€æ±‚çš„æ—¶å€™ï¼Œæ¯”å¦‚ï¼›äº¤æ˜“ã€è®¢å•ã€è¥é”€ã€ä¿é™©ç­‰å„ç±»åœºæ™¯ã€‚å¦‚æœä½ ä¸ç†Ÿæ‚‰è¿™ä¸ªåœºæ™¯ä¸‹çš„ä¸šåŠ¡æ¨¡å¼ï¼Œä»¥åŠå°†æ¥çš„æ‹“å±•æ–¹å‘ï¼Œé‚£ä¹ˆå¾ˆéš¾è®¾è®¡å‡ºè‰¯å¥½å¯æ‰©å±•çš„ç³»ç»Ÿã€‚å†åŠ ä¸Šäº§å“åŠŸèƒ½åˆå»ºï¼Œè¯´è€æ¿è¦çš„æ€¥ï¼Œå°½å¿«ä¸Šçº¿ã€‚ä½œä¸ºç¨‹åºå‘˜çš„ä½ æ›´æ²¡æœ‰æ—¶é—´æ€è€ƒï¼Œæ•´ä½“ä¸€çœ‹ç°åœ¨çš„éœ€æ±‚ä¹Ÿä¸éš¾ï¼Œç›´æ¥ä¸Šæ‰‹å¼€å¹²(`ä¸€ä¸ªæ–¹æ³•ä¸¤ä¸ªifè¯­å¥`)ï¼Œè¿™æ ·ç¡®å®æ»¡è¶³äº†å½“å‰éœ€æ±‚ã€‚ä½†è€æ¿çš„æƒ³æ³•å¤šå‘€ï¼Œäº§å“ä¹Ÿè·Ÿç€å˜åŒ–å¿«ï¼Œåˆ°ä½ è¿™å°±æ˜¯æ”¹æ”¹æ”¹ï¼ŒåŠ åŠ åŠ ã€‚å½“ç„¶ä½ ä¹Ÿä¸å®¢æ°”ï¼Œå›é¦–æå°±æ˜¯1024ä¸ªifè¯­å¥ï¼

`æ—¥ç§¯æœˆç´¯çš„æŠ€æœ¯æ²‰æ·€æ˜¯ä¸ºäº†åšç§¯è–„å‘`

ç²—ç•¥çš„ä¼°ç®—è¿‡ï¼Œå¦‚æœä»ä¸Šå¤§å­¦å¼€å§‹æ¯å¤©å†™`200`è¡Œï¼Œä¸€ä¸ªæœˆæ˜¯`6000`è¡Œï¼Œä¸€å¹´ç®—10ä¸ªæœˆè¯ï¼Œå°±æ˜¯6ä¸‡è¡Œï¼Œç¬¬ä¸‰å¹´å‡ºå»å®ä¹ çš„æ˜¯æ—¶å€™å°±æœ‰`20`ä¸‡è¡Œçš„ä»£ç é‡ã€‚å¦‚æœä½ èƒ½åšåˆ°è¿™ä¸€ç‚¹ï¼Œæ‰¾å·¥ä½œéš¾ï¼Ÿæœ‰æ—¶å€™å¾ˆå¤šäº‹æƒ…å°±æ˜¯é æ—¶é—´ç§¯ç´¯å‡ºæ¥çš„ï¼Œæƒ³èµ°æ·å¾„æœ‰æ—¶å€™çœŸçš„æ²¡æœ‰ã€‚ä½ çš„æŠ€æœ¯æ°´å¹³ã€ä½ çš„ä¸šåŠ¡èƒ½åŠ›ã€ä½ èº«ä¸Šçš„è‚‰ï¼Œéƒ½æ˜¯ä¸€ç‚¹ç‚¹ç§¯ç´¯ä¸‹æ¥çš„ï¼Œä¸è¦æµªè´¹çœ‹ä¼¼å¾ˆçŸ­çš„æ—¶é—´ï¼Œä¸€å¹´å¹´åšæŒä¸‹æ¥ï¼Œç•™ä¸‹å°åˆ»é’æ˜¥çš„ç—•è¿¹ï¼Œå¤šç»™è‡ªå·±æ­¦è£…ä¸Šä¸€äº›èƒ½åŠ›ã€‚

## äºŒã€å¼€å‘ç¯å¢ƒ

1. JDK 1.8
2. Idea + Maven
3. mysql 5.1.20
4. æ¶‰åŠå·¥ç¨‹ä¸€ä¸ªï¼Œå¯ä»¥é€šè¿‡å…³æ³¨**å…¬ä¼—å·**ï¼š[`bugstackè™«æ´æ ˆ`](https://bugstack.cn/assets/images/qrcode.png)ï¼Œå›å¤`æºç ä¸‹è½½`è·å–(æ‰“å¼€è·å–çš„é“¾æ¥ï¼Œæ‰¾åˆ°åºå·18)

| å·¥ç¨‹                     | æè¿°                                         |
| ------------------------ | --------------------------------- |
| itstack-demo-design-16-01 | ä½¿ç”¨JDBCæ–¹å¼è¿æ¥æ•°æ®åº“ |
| itstack-demo-design-16-02 | æ‰‹å†™ORMæ¡†æ¶æ“ä½œæ•°æ®åº“ |

## ä¸‰ã€ä¸­ä»‹è€…æ¨¡å¼ä»‹ç»

![ä¸­ä»‹è€…æ¨¡å¼ï¼Œå›¾ç‰‡æ¥è‡ª refactoringguru.cn](https://bugstack.cn/assets/images/2020/itstack-demo-design-16-01.png)

ä¸­ä»‹è€…æ¨¡å¼è¦è§£å†³çš„å°±æ˜¯å¤æ‚åŠŸèƒ½åº”ç”¨ä¹‹é—´çš„é‡å¤è°ƒç”¨ï¼Œåœ¨è¿™ä¸­é—´æ·»åŠ ä¸€å±‚ä¸­ä»‹è€…åŒ…è£…æœåŠ¡ï¼Œå¯¹å¤–æä¾›ç®€å•ã€é€šç”¨ã€æ˜“æ‰©å±•çš„æœåŠ¡èƒ½åŠ›ã€‚

è¿™æ ·çš„è®¾è®¡æ¨¡å¼å‡ ä¹åœ¨æˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»å’Œå®é™…ä¸šåŠ¡å¼€å‘ä¸­éƒ½ä¼šè§åˆ°ï¼Œä¾‹å¦‚ï¼›é£æœºğŸ›¬é™è½æœ‰å°å§å§åœ¨å¡”å°å–Šè¯ã€æ— è®ºå“ªä¸ªæ–¹å‘æ¥çš„å€™è½¦éƒ½ä»ç«™å°ä¸Šä¸‹ã€å…¬å¸çš„ç³»ç»Ÿä¸­æœ‰ä¸€ä¸ªä¸­å°ä¸“é—¨ä¸ºä½ åŒ…è£…æ‰€æœ‰æ¥å£å’Œæä¾›ç»Ÿä¸€çš„æœåŠ¡ç­‰ç­‰ï¼Œè¿™äº›éƒ½è¿ç”¨äº†ä¸­ä»‹è€…æ¨¡å¼ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä½ ç”¨åˆ°çš„ä¸€äº›ä¸­é—´ä»¶ï¼Œä»–ä»¬åŒ…è£…äº†åº•å±‚å¤šç§æ•°æ®åº“çš„å·®å¼‚åŒ–ï¼Œæä¾›éå¸¸ç®€å•çš„æ–¹å¼è¿›è¡Œä½¿ç”¨ã€‚

## å››ã€æ¡ˆä¾‹åœºæ™¯æ¨¡æ‹Ÿ

![åœºæ™¯æ¨¡æ‹Ÿï¼›æ¨¡ä»¿Mybatisæ‰‹å†™ORMæ¡†æ¶](https://bugstack.cn/assets/images/2020/itstack-demo-design-16-02.png)

**åœ¨æœ¬æ¡ˆä¾‹ä¸­æˆ‘ä»¬é€šè¿‡æ¨¡ä»¿Mybatisæ‰‹å†™ORMæ¡†æ¶ï¼Œé€šè¿‡è¿™æ ·æ“ä½œæ•°æ®åº“å­¦ä¹ ä¸­ä»‹è€…è¿ç”¨åœºæ™¯**

é™¤äº†è¿™æ ·çš„ä¸­é—´ä»¶å±‚ä½¿ç”¨åœºæ™¯å¤–ï¼Œå¯¹äºä¸€äº›å¤–éƒ¨æ¥å£ï¼Œä¾‹å¦‚Nç§å¥–å“æœåŠ¡ï¼Œå¯ä»¥ç”±ä¸­å°ç³»ç»Ÿè¿›è¡Œç»Ÿä¸€åŒ…è£…å¯¹å¤–æä¾›æœåŠ¡èƒ½åŠ›ã€‚ä¹Ÿæ˜¯ä¸­ä»‹è€…æ¨¡å¼çš„ä¸€ç§æ€æƒ³ä½“ç°ã€‚

åœ¨æœ¬æ¡ˆä¾‹ä¸­æˆ‘ä»¬ä¼šæŠŠjdbcå±‚è¿›è¡ŒåŒ…è£…ï¼Œè®©ç”¨æˆ·åœ¨ä½¿ç”¨æ•°æ®åº“æœåŠ¡çš„æ—¶å€™ï¼Œå¯ä»¥å’Œä½¿ç”¨mybatisä¸€æ ·ç®€å•æ–¹ä¾¿ï¼Œé€šè¿‡è¿™æ ·çš„æºç æ–¹å¼å­¦ä¹ ä¸­ä»‹è€…æ¨¡å¼ï¼Œä¹Ÿæ–¹ä¾¿å¯¹æºç çŸ¥è¯†çš„æ‹“å±•å­¦ä¹ ï¼Œå¢å¼ºçŸ¥è¯†æ ˆã€‚

## äº”ã€ç”¨ä¸€å¨å¨ä»£ç å®ç°

`è¿™æ˜¯ä¸€ç§å…³äºæ•°æ®åº“æ“ä½œæœ€åˆçš„æ–¹å¼`

åŸºæœ¬ä¸Šæ¯ä¸€ä¸ªå­¦ä¹ å¼€å‘çš„äººéƒ½å­¦ä¹ è¿‡ç›´æ¥ä½¿ç”¨jdbcæ–¹å¼è¿æ¥æ•°æ®åº“ï¼Œè¿›è¡ŒCRUDæ“ä½œã€‚ä»¥ä¸‹çš„ä¾‹å­å¯ä»¥å½“åšå›å¿†ã€‚

### 1. å·¥ç¨‹ç»“æ„

```java
itstack-demo-design-16-01
â””â”€â”€ src
    â””â”€â”€ main
        â””â”€â”€ java
            â””â”€â”€ org.itstack.demo.design
                â””â”€â”€ JDBCUtil.java
```

- è¿™é‡Œçš„ç±»æ¯”è¾ƒç®€å•åªåŒ…æ‹¬äº†ä¸€ä¸ªæ•°æ®åº“æ“ä½œç±»ã€‚

### 2. ä»£ç å®ç°

```java
public class JDBCUtil {

    private static Logger logger = LoggerFactory.getLogger(JDBCUtil.class);

    public static final String URL = "jdbc:mysql://127.0.0.1:3306/itstack-demo-design";
    public static final String USER = "root";
    public static final String PASSWORD = "123456";

    public static void main(String[] args) throws Exception {
        //1. åŠ è½½é©±åŠ¨ç¨‹åº
        Class.forName("com.mysql.jdbc.Driver");
        //2. è·å¾—æ•°æ®åº“è¿æ¥
        Connection conn = DriverManager.getConnection(URL, USER, PASSWORD);
        //3. æ“ä½œæ•°æ®åº“
        Statement stmt = conn.createStatement();
        ResultSet resultSet = stmt.executeQuery("SELECT id, name, age, createTime, updateTime FROM user");
        //4. å¦‚æœæœ‰æ•°æ® resultSet.next() è¿”å›true
        while (resultSet.next()) {
            logger.info("æµ‹è¯•ç»“æœ å§“åï¼š{} å¹´é¾„ï¼š{}", resultSet.getString("name"),resultSet.getInt("age"));
        }
    }

}
```

- ä»¥ä¸Šæ˜¯ä½¿ç”¨JDBCçš„æ–¹å¼è¿›è¡Œç›´æ¥æ“ä½œæ•°æ®åº“ï¼Œå‡ ä¹å¤§å®¶éƒ½ä½¿ç”¨è¿‡è¿™æ ·çš„æ–¹å¼ã€‚

### 3. æµ‹è¯•ç»“æœ

```java
15:38:10.919 [main] INFO  org.itstack.demo.design.JDBCUtil - æµ‹è¯•ç»“æœ å§“åï¼šæ°´æ°´ å¹´é¾„ï¼š18
15:38:10.922 [main] INFO  org.itstack.demo.design.JDBCUtil - æµ‹è¯•ç»“æœ å§“åï¼šè±†è±† å¹´é¾„ï¼š18
15:38:10.922 [main] INFO  org.itstack.demo.design.JDBCUtil - æµ‹è¯•ç»“æœ å§“åï¼šèŠ±èŠ± å¹´é¾„ï¼š19

Process finished with exit code 0
```

- ä»æµ‹è¯•ç»“æœå¯ä»¥çœ‹åˆ°è¿™é‡Œå·²ç»æŸ¥è¯¢åˆ°äº†æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚åªä¸è¿‡å¦‚æœåœ¨å…¨éƒ¨çš„ä¸šåŠ¡å¼€å‘ä¸­éƒ½è¿™æ ·å®ç°ï¼Œä¼šéå¸¸çš„éº»çƒ¦ã€‚

## å…­ã€ä¸­ä»‹æ¨¡å¼å¼€å‘ORMæ¡†æ¶

`æ¥ä¸‹æ¥å°±ä½¿ç”¨ä¸­ä»‹æ¨¡å¼çš„æ€æƒ³å®Œæˆæ¨¡ä»¿Mybatisçš„ORMæ¡†æ¶å¼€å‘~

### 1. å·¥ç¨‹ç»“æ„

```java
itstack-demo-design-16-02
â””â”€â”€ src
    â”œâ”€â”€ main
    â”‚   â”œâ”€â”€ java
    â”‚   â”‚   â””â”€â”€ org.itstack.demo.design
    â”‚   â”‚       â”œâ”€â”€ dao
    â”‚   â”‚       â”‚	â”œâ”€â”€ ISchool.java
    â”‚   â”‚       â”‚	â””â”€â”€ IUserDao.java
    â”‚   â”‚       â”œâ”€â”€ mediator
    â”‚   â”‚       â”‚	â”œâ”€â”€ Configuration.java
    â”‚   â”‚       â”‚	â”œâ”€â”€ DefaultSqlSession.java
    â”‚   â”‚       â”‚	â”œâ”€â”€ DefaultSqlSessionFactory.java
    â”‚   â”‚       â”‚	â”œâ”€â”€ Resources.java
    â”‚   â”‚       â”‚	â”œâ”€â”€ SqlSession.java
    â”‚   â”‚       â”‚	â”œâ”€â”€ SqlSessionFactory.java
    â”‚   â”‚       â”‚	â”œâ”€â”€ SqlSessionFactoryBuilder.java
    â”‚   â”‚       â”‚	â””â”€â”€ XNode.java
    â”‚   â”‚       â””â”€â”€ po
    â”‚   â”‚         	â”œâ”€â”€ School.java
    â”‚   â”‚         	â””â”€â”€ User.java
    â”‚   â””â”€â”€ resources
    â”‚       â”œâ”€â”€ mapper
    â”‚       â”‚   â”œâ”€â”€ School_Mapper.xml
    â”‚       â”‚   â””â”€â”€ User_Mapper.xml
    â”‚       â””â”€â”€ mybatis-config-datasource.xml
    â””â”€â”€ test
         â””â”€â”€ java
             â””â”€â”€ org.itstack.demo.design.test
                 â””â”€â”€ ApiTest.java
```

**ä¸­ä»‹è€…æ¨¡å¼æ¨¡å‹ç»“æ„**     

![ä¸­ä»‹è€…æ¨¡å¼æ¨¡å‹ç»“æ„](https://bugstack.cn/assets/images/2020/itstack-demo-design-16-03.png)

- ä»¥ä¸Šæ˜¯å¯¹ORMæ¡†æ¶å®ç°çš„æ ¸å¿ƒç±»ï¼ŒåŒ…æ‹¬äº†ï¼›åŠ è½½é…ç½®æ–‡ä»¶ã€å¯¹xmlè§£æã€è·å–æ•°æ®åº“sessionã€æ“ä½œæ•°æ®åº“ä»¥åŠç»“æœè¿”å›ã€‚
- å·¦ä¸Šæ˜¯å¯¹æ•°æ®åº“çš„å®šä¹‰å’Œå¤„ç†ï¼ŒåŸºæœ¬åŒ…æ‹¬æˆ‘ä»¬å¸¸ç”¨çš„æ–¹æ³•ï¼›`<T> T selectOne`ã€`<T> List<T> selectList`ç­‰ã€‚
- å³ä¾§è“è‰²éƒ¨åˆ†æ˜¯å¯¹æ•°æ®åº“é…ç½®çš„å¼€å¯sessionçš„å·¥å‚å¤„ç†ç±»ï¼Œè¿™é‡Œçš„å·¥å‚ä¼šæ“ä½œ`DefaultSqlSession`
- ä¹‹åæ˜¯çº¢è‰²åœ°æ–¹çš„`SqlSessionFactoryBuilder`ï¼Œè¿™ä¸ªç±»æ˜¯å¯¹æ•°æ®åº“æ“ä½œçš„æ ¸å¿ƒç±»ï¼›å¤„ç†å·¥å‚ã€è§£ææ–‡ä»¶ã€æ‹¿åˆ°sessionç­‰ã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬å°±åˆ†åˆ«ä»‹ç»å„ä¸ªç±»çš„åŠŸèƒ½å®ç°è¿‡ç¨‹ã€‚

### 2. ä»£ç å®ç°

#### 2.1 å®šä¹‰SqlSessionæ¥å£

```java
public interface SqlSession {

    <T> T selectOne(String statement);

    <T> T selectOne(String statement, Object parameter);

    <T> List<T> selectList(String statement);

    <T> List<T> selectList(String statement, Object parameter);

    void close();
}
```      

- è¿™é‡Œå®šä¹‰äº†å¯¹æ•°æ®åº“æ“ä½œçš„æŸ¥è¯¢æ¥å£ï¼Œåˆ†ä¸ºæŸ¥è¯¢ä¸€ä¸ªç»“æœå’ŒæŸ¥è¯¢å¤šä¸ªç»“æœï¼ŒåŒæ—¶åŒ…æ‹¬æœ‰å‚æ•°å’Œæ²¡æœ‰å‚æ•°çš„æ–¹æ³•ã€‚

#### 2.2 SqlSessionå…·ä½“å®ç°ç±»

```java
public class DefaultSqlSession implements SqlSession {

    private Connection connection;
    private Map<String, XNode> mapperElement;

    public DefaultSqlSession(Connection connection, Map<String, XNode> mapperElement) {
        this.connection = connection;
        this.mapperElement = mapperElement;
    }

    @Override
    public <T> T selectOne(String statement) {
        try {
            XNode xNode = mapperElement.get(statement);
            PreparedStatement preparedStatement = connection.prepareStatement(xNode.getSql());
            ResultSet resultSet = preparedStatement.executeQuery();
            List<T> objects = resultSet2Obj(resultSet, Class.forName(xNode.getResultType()));
            return objects.get(0);
        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }

    @Override
    public <T> List<T> selectList(String statement) {
        XNode xNode = mapperElement.get(statement);
        try {
            PreparedStatement preparedStatement = connection.prepareStatement(xNode.getSql());
            ResultSet resultSet = preparedStatement.executeQuery();
            return resultSet2Obj(resultSet, Class.forName(xNode.getResultType()));
        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }

    // ...

    private <T> List<T> resultSet2Obj(ResultSet resultSet, Class<?> clazz) {
        List<T> list = new ArrayList<>();
        try {
            ResultSetMetaData metaData = resultSet.getMetaData();
            int columnCount = metaData.getColumnCount();
            // æ¯æ¬¡éå†è¡Œå€¼
            while (resultSet.next()) {
                T obj = (T) clazz.newInstance();
                for (int i = 1; i <= columnCount; i++) {
                    Object value = resultSet.getObject(i);
                    String columnName = metaData.getColumnName(i);
                    String setMethod = "set" + columnName.substring(0, 1).toUpperCase() + columnName.substring(1);
                    Method method;
                    if (value instanceof Timestamp) {
                        method = clazz.getMethod(setMethod, Date.class);
                    } else {
                        method = clazz.getMethod(setMethod, value.getClass());
                    }
                    method.invoke(obj, value);
                }
                list.add(obj);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        return list;
    }

    @Override
    public void close() {
        if (null == connection) return;
        try {
            connection.close();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}
```    

- è¿™é‡ŒåŒ…æ‹¬äº†æ¥å£å®šä¹‰çš„æ–¹æ³•å®ç°ï¼Œä¹Ÿå°±æ˜¯åŒ…è£…äº†jdbcå±‚ã€‚
- é€šè¿‡è¿™æ ·çš„åŒ…è£…å¯ä»¥è®©å¯¹æ•°æ®åº“çš„jdbcæ“ä½œéšè—èµ·æ¥ï¼Œå¤–éƒ¨è°ƒç”¨çš„æ—¶å€™å¯¹å…¥å‚ã€å‡ºå‚éƒ½æœ‰å†…éƒ¨è¿›è¡Œå¤„ç†ã€‚

#### 2.3 å®šä¹‰SqlSessionFactoryæ¥å£

```java
public interface SqlSessionFactory {

    SqlSession openSession();

}
```    

- å¼€å¯ä¸€ä¸ª`SqlSession`ï¼Œ è¿™å‡ ä¹æ˜¯å¤§å®¶åœ¨å¹³æ—¶çš„ä½¿ç”¨ä¸­éƒ½éœ€è¦è¿›è¡Œæ“ä½œçš„å†…å®¹ã€‚è™½ç„¶ä½ çœ‹ä¸è§ï¼Œä½†æ˜¯å½“ä½ æœ‰æ•°æ®åº“æ“ä½œçš„æ—¶å€™éƒ½ä¼šè·å–æ¯ä¸€æ¬¡æ‰§è¡Œçš„`SqlSession`ã€‚

#### 2.4 SqlSessionFactoryå…·ä½“å®ç°ç±»

```java
public class DefaultSqlSessionFactory implements SqlSessionFactory {

    private final Configuration configuration;

    public DefaultSqlSessionFactory(Configuration configuration) {
        this.configuration = configuration;
    }

    @Override
    public SqlSession openSession() {
        return new DefaultSqlSession(configuration.connection, configuration.mapperElement);
    }

}
```   

- `DefaultSqlSessionFactory`ï¼Œæ˜¯ä½¿ç”¨mybatisæœ€å¸¸ç”¨çš„ç±»ï¼Œè¿™é‡Œæˆ‘ä»¬ç®€å•çš„å®ç°äº†ä¸€ä¸ªç‰ˆæœ¬ã€‚
- è™½ç„¶æ˜¯ç®€å•çš„ç‰ˆæœ¬ï¼Œä½†æ˜¯åŒ…æ‹¬äº†æœ€åŸºæœ¬çš„æ ¸å¿ƒæ€è·¯ã€‚å½“å¼€å¯`SqlSession`æ—¶ä¼šè¿›è¡Œè¿”å›ä¸€ä¸ª`DefaultSqlSession`
- è¿™ä¸ªæ„é€ å‡½æ•°ä¸­å‘ä¸‹ä¼ é€’äº†`Configuration`é…ç½®æ–‡ä»¶ï¼Œåœ¨è¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­åŒ…æ‹¬ï¼›`Connection connection`ã€`Map<String, String> dataSource`ã€`Map<String, XNode> mapperElement`ã€‚å¦‚æœæœ‰ä½ é˜…è¯»è¿‡Mybatisæºç ï¼Œå¯¹è¿™ä¸ªå°±ä¸ä¼šé™Œç”Ÿã€‚

#### 2.5 SqlSessionFactoryBuilderå®ç°

```java
public class SqlSessionFactoryBuilder {

    public DefaultSqlSessionFactory build(Reader reader) {
        SAXReader saxReader = new SAXReader();
        try {
            saxReader.setEntityResolver(new XMLMapperEntityResolver());
            Document document = saxReader.read(new InputSource(reader));
            Configuration configuration = parseConfiguration(document.getRootElement());
            return new DefaultSqlSessionFactory(configuration);
        } catch (DocumentException e) {
            e.printStackTrace();
        }
        return null;
    }

    private Configuration parseConfiguration(Element root) {
        Configuration configuration = new Configuration();
        configuration.setDataSource(dataSource(root.selectNodes("//dataSource")));
        configuration.setConnection(connection(configuration.dataSource));
        configuration.setMapperElement(mapperElement(root.selectNodes("mappers")));
        return configuration;
    }

    // è·å–æ•°æ®æºé…ç½®ä¿¡æ¯
    private Map<String, String> dataSource(List<Element> list) {
        Map<String, String> dataSource = new HashMap<>(4);
        Element element = list.get(0);
        List content = element.content();
        for (Object o : content) {
            Element e = (Element) o;
            String name = e.attributeValue("name");
            String value = e.attributeValue("value");
            dataSource.put(name, value);
        }
        return dataSource;
    }

    private Connection connection(Map<String, String> dataSource) {
        try {
            Class.forName(dataSource.get("driver"));
            return DriverManager.getConnection(dataSource.get("url"), dataSource.get("username"), dataSource.get("password"));
        } catch (ClassNotFoundException | SQLException e) {
            e.printStackTrace();
        }
        return null;
    }

    // è·å–SQLè¯­å¥ä¿¡æ¯
    private Map<String, XNode> mapperElement(List<Element> list) {
        Map<String, XNode> map = new HashMap<>();

        Element element = list.get(0);
        List content = element.content();
        for (Object o : content) {
            Element e = (Element) o;
            String resource = e.attributeValue("resource");

            try {
                Reader reader = Resources.getResourceAsReader(resource);
                SAXReader saxReader = new SAXReader();
                Document document = saxReader.read(new InputSource(reader));
                Element root = document.getRootElement();
                //å‘½åç©ºé—´
                String namespace = root.attributeValue("namespace");

                // SELECT
                List<Element> selectNodes = root.selectNodes("select");
                for (Element node : selectNodes) {
                    String id = node.attributeValue("id");
                    String parameterType = node.attributeValue("parameterType");
                    String resultType = node.attributeValue("resultType");
                    String sql = node.getText();

                    // ? åŒ¹é…
                    Map<Integer, String> parameter = new HashMap<>();
                    Pattern pattern = Pattern.compile("(#\\{(.*?)})");
                    Matcher matcher = pattern.matcher(sql);
                    for (int i = 1; matcher.find(); i++) {
                        String g1 = matcher.group(1);
                        String g2 = matcher.group(2);
                        parameter.put(i, g2);
                        sql = sql.replace(g1, "?");
                    }

                    XNode xNode = new XNode();
                    xNode.setNamespace(namespace);
                    xNode.setId(id);
                    xNode.setParameterType(parameterType);
                    xNode.setResultType(resultType);
                    xNode.setSql(sql);
                    xNode.setParameter(parameter);

                    map.put(namespace + "." + id, xNode);
                }
            } catch (Exception ex) {
                ex.printStackTrace();
            }

        }
        return map;
    }

}
``` 

- åœ¨è¿™ä¸ªç±»ä¸­åŒ…æ‹¬çš„æ ¸å¿ƒæ–¹æ³•æœ‰ï¼›`build(æ„å»ºå®ä¾‹åŒ–å…ƒç´ )`ã€`parseConfiguration(è§£æé…ç½®)`ã€`dataSource(è·å–æ•°æ®åº“é…ç½®)`ã€`connection(Map<String, String> dataSource) (é“¾æ¥æ•°æ®åº“)`ã€`mapperElement (è§£æsqlè¯­å¥)`
- æ¥ä¸‹æ¥æˆ‘ä»¬åˆ†åˆ«ä»‹ç»è¿™æ ·çš„å‡ ä¸ªæ ¸å¿ƒæ–¹æ³•ã€‚

**build(æ„å»ºå®ä¾‹åŒ–å…ƒç´ )**

è¿™ä¸ªç±»ä¸»è¦ç”¨äºåˆ›å»ºè§£æxmlæ–‡ä»¶çš„ç±»ï¼Œä»¥åŠåˆå§‹åŒ–SqlSessionå·¥å‚ç±»`DefaultSqlSessionFactory`ã€‚å¦å¤–éœ€è¦æ³¨æ„è¿™æ®µä»£ç `saxReader.setEntityResolver(new XMLMapperEntityResolver());`ï¼Œæ˜¯ä¸ºäº†ä¿è¯åœ¨ä¸è”ç½‘çš„æ—¶å€™ä¸€æ ·å¯ä»¥è§£æxmlï¼Œå¦åˆ™ä¼šéœ€è¦ä»äº’è”ç½‘è·å–dtdæ–‡ä»¶ã€‚

**parseConfiguration(è§£æé…ç½®)**

æ˜¯å¯¹xmlä¸­çš„å…ƒç´ è¿›è¡Œè·å–ï¼Œè¿™é‡Œä¸»è¦è·å–äº†ï¼›`dataSource`ã€`mappers`ï¼Œè€Œè¿™ä¸¤ä¸ªé…ç½®ä¸€ä¸ªæ˜¯æˆ‘ä»¬æ•°æ®åº“çš„é“¾æ¥ä¿¡æ¯ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯å¯¹æ•°æ®åº“æ“ä½œè¯­å¥çš„è§£æã€‚

**connection(Map<String, String> dataSource) (é“¾æ¥æ•°æ®åº“)**

é“¾æ¥æ•°æ®åº“çš„åœ°æ–¹å’Œæˆ‘ä»¬å¸¸è§çš„æ–¹å¼æ˜¯ä¸€æ ·çš„ï¼›`Class.forName(dataSource.get("driver"));`ï¼Œä½†æ˜¯è¿™æ ·åŒ…è£…ä»¥åå¤–éƒ¨æ˜¯ä¸éœ€è¦çŸ¥é“å…·ä½“çš„æ“ä½œã€‚åŒæ—¶å½“æˆ‘ä»¬éœ€è¦é“¾æ¥å¤šå¥—æ•°æ®åº“çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯å¯ä»¥åœ¨è¿™é‡Œæ‰©å±•ã€‚

**mapperElement (è§£æsqlè¯­å¥)**

è¿™éƒ¨åˆ†ä»£ç å—å†…å®¹ç›¸å¯¹æ¥è¯´æ¯”è¾ƒé•¿ï¼Œä½†æ˜¯æ ¸å¿ƒçš„ç‚¹å°±æ˜¯ä¸ºäº†è§£æxmlä¸­çš„sqlè¯­å¥é…ç½®ã€‚åœ¨æˆ‘ä»¬å¹³å¸¸çš„ä½¿ç”¨ä¸­åŸºæœ¬éƒ½ä¼šé…ç½®ä¸€äº›sqlè¯­å¥ï¼Œä¹Ÿæœ‰ä¸€äº›å…¥å‚çš„å ä½ç¬¦ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„æ–¹å¼è¿›è¡Œè§£ææ“ä½œã€‚

è§£æå®Œæˆçš„sqlè¯­å¥å°±æœ‰äº†ä¸€ä¸ªåç§°å’Œsqlçš„æ˜ å°„å…³ç³»ï¼Œå½“æˆ‘ä»¬è¿›è¡Œæ•°æ®åº“æ“ä½œçš„æ—¶å€™ï¼Œè¿™ä¸ªç»„ä»¶å°±å¯ä»¥é€šè¿‡æ˜ å°„å…³ç³»è·å–åˆ°å¯¹åº”sqlè¯­å¥è¿›è¡Œæ“ä½œã€‚

### 3. æµ‹è¯•éªŒè¯

åœ¨æµ‹è¯•ä¹‹å‰éœ€è¦å¯¼å…¥sqlè¯­å¥åˆ°æ•°æ®åº“ä¸­;
- åº“åï¼š`itstack-demo-design`
- è¡¨åï¼š`user`ã€`school`

```java
CREATE TABLE school ( id bigint NOT NULL AUTO_INCREMENT, name varchar(64), address varchar(256), createTime datetime, updateTime datetime, PRIMARY KEY (id) ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
insert into school (id, name, address, createTime, updateTime) values (1, 'åŒ—äº¬å¤§å­¦', 'åŒ—äº¬å¸‚æµ·æ·€åŒºé¢å’Œå›­è·¯5å·', '2019-10-18 13:35:57', '2019-10-18 13:35:57');
insert into school (id, name, address, createTime, updateTime) values (2, 'å—å¼€å¤§å­¦', 'ä¸­å›½å¤©æ´¥å¸‚å—å¼€åŒºå«æ´¥è·¯94å·', '2019-10-18 13:35:57', '2019-10-18 13:35:57');
insert into school (id, name, address, createTime, updateTime) values (3, 'åŒæµå¤§å­¦', 'ä¸Šæµ·å¸‚å½°æ­¦è·¯1å·åŒæµå¤§å¦Aæ¥¼7æ¥¼7åŒº', '2019-10-18 13:35:57', '2019-10-18 13:35:57');
CREATE TABLE user ( id bigint(11) NOT NULL AUTO_INCREMENT, name varchar(32), age int(4), address varchar(128), entryTime datetime, remark varchar(64), createTime datetime, updateTime datetime, status int(4) DEFAULT '0', dateTime varchar(64), PRIMARY KEY (id), INDEX idx_name (name) ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
insert into user (id, name, age, address, entryTime, remark, createTime, updateTime, status, dateTime) values (1, 'æ°´æ°´', 18, 'å‰æ—çœæ¦†æ ‘å¸‚é»‘æ—é•‡å°¹å®¶æ‘5ç»„', '2019-12-22 00:00:00', 'æ— ', '2019-12-22 00:00:00', '2019-12-22 00:00:00', 0, '20200309');
insert into user (id, name, age, address, entryTime, remark, createTime, updateTime, status, dateTime) values (2, 'è±†è±†', 18, 'è¾½å®çœå¤§è¿å¸‚æ¸…æ²³æ¹¾å¸é©¬é“407è·¯', '2019-12-22 00:00:00', 'æ— ', '2019-12-22 00:00:00', '2019-12-22 00:00:00', 1, null);
insert into user (id, name, age, address, entryTime, remark, createTime, updateTime, status, dateTime) values (3, 'èŠ±èŠ±', 19, 'è¾½å®çœå¤§è¿å¸‚æ¸…æ²³æ¹¾å¸é©¬é“407è·¯', '2019-12-22 00:00:00', 'æ— ', '2019-12-22 00:00:00', '2019-12-22 00:00:00', 0, '20200310');
```

#### 3.1 åˆ›å»ºæ•°æ®åº“å¯¹è±¡ç±»

**ç”¨æˆ·ç±»**

```java
public class User {

    private Long id;
    private String name;
    private Integer age;
    private Date createTime;
    private Date updateTime;
    
    // ... get/set
}
```      

**å­¦æ ¡ç±»**

```java
public class School {

    private Long id;
    private String name;
    private String address;
    private Date createTime;
    private Date updateTime;  
  
    // ... get/set
}
```

- è¿™ä¸¤ä¸ªç±»éƒ½éå¸¸ç®€å•ï¼Œå°±æ˜¯åŸºæœ¬çš„æ•°æ®åº“ä¿¡æ¯ã€‚

#### 3.2 åˆ›å»ºDAOåŒ…

**ç”¨æˆ·Dao**

```java
public interface IUserDao {

     User queryUserInfoById(Long id);

}
```

**å­¦æ ¡Dao**

```java
public interface ISchoolDao {

    School querySchoolInfoById(Long treeId);

}
```

#### 3.3 ORMé…ç½®æ–‡ä»¶

**é“¾æ¥é…ç½®**

```xml 
<configuration>
    <environments default="development">
        <environment id="development">
            <transactionManager type="JDBC"/>
            <dataSource type="POOLED">
                <property name="driver" value="com.mysql.jdbc.Driver"/>
                <property name="url" value="jdbc:mysql://127.0.0.1:3306/itstack_demo_design?useUnicode=true"/>
                <property name="username" value="root"/>
                <property name="password" value="123456"/>
            </dataSource>
        </environment>
    </environments>

    <mappers>
        <mapper resource="mapper/User_Mapper.xml"/>
        <mapper resource="mapper/School_Mapper.xml"/>
    </mappers>

</configuration>
``` 

- è¿™ä¸ªé…ç½®ä¸æˆ‘ä»¬å¹³å¸¸ä½¿ç”¨çš„mybatisåŸºæœ¬æ˜¯ä¸€æ ·çš„ï¼ŒåŒ…æ‹¬äº†æ•°æ®åº“çš„è¿æ¥æ± ä¿¡æ¯ä»¥åŠéœ€è¦å¼•å…¥çš„mapperæ˜ å°„æ–‡ä»¶ã€‚

**æ“ä½œé…ç½®(ç”¨æˆ·)**

```xml
<mapper namespace="org.itstack.demo.design.dao.IUserDao">

    <select id="queryUserInfoById" parameterType="java.lang.Long" resultType="org.itstack.demo.design.po.User">
        SELECT id, name, age, createTime, updateTime
        FROM user
        where id = #{id}
    </select>

    <select id="queryUserList" parameterType="org.itstack.demo.design.po.User" resultType="org.itstack.demo.design.po.User">
        SELECT id, name, age, createTime, updateTime
        FROM user
        where age = #{age}
    </select>

</mapper>
```

**æ“ä½œé…ç½®(å­¦æ ¡)**

```xml
<mapper namespace="org.itstack.demo.design.dao.ISchoolDao">

    <select id="querySchoolInfoById" resultType="org.itstack.demo.design.po.School">
        SELECT id, name, address, createTime, updateTime
        FROM school
        where id = #{id}
    </select>

</mapper>
```

#### 3.4 å•ä¸ªç»“æœæŸ¥è¯¢æµ‹è¯•

```java 
@Test
public void test_queryUserInfoById() {
    String resource = "mybatis-config-datasource.xml";
    Reader reader;
    try {
        reader = Resources.getResourceAsReader(resource);
        SqlSessionFactory sqlMapper = new SqlSessionFactoryBuilder().build(reader);
        SqlSession session = sqlMapper.openSession();
        try {
            User user = session.selectOne("org.itstack.demo.design.dao.IUserDao.queryUserInfoById", 1L);
            logger.info("æµ‹è¯•ç»“æœï¼š{}", JSON.toJSONString(user));
        } finally {
            session.close();
            reader.close();
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
}
```

- è¿™é‡Œçš„ä½¿ç”¨æ–¹å¼å’Œ`Mybatis`æ˜¯ä¸€æ ·çš„ï¼Œéƒ½åŒ…æ‹¬äº†ï¼›èµ„æºåŠ è½½å’Œè§£æã€`SqlSession`å·¥å‚æ„å»ºã€å¼€å¯`SqlSession`ä»¥åŠæœ€åæ‰§è¡ŒæŸ¥è¯¢æ“ä½œ`selectOne`

**æµ‹è¯•ç»“æœ**

```java
16:56:51.831 [main] INFO  org.itstack.demo.design.demo.ApiTest - æµ‹è¯•ç»“æœï¼š{"age":18,"createTime":1576944000000,"id":1,"name":"æ°´æ°´","updateTime":1576944000000}

Process finished with exit code 0
```

- ä»ç»“æœä¸Šçœ‹å·²ç»æ»¡è¶³äº†æˆ‘ä»¬çš„æŸ¥è¯¢éœ€æ±‚ã€‚

#### 3.5 é›†åˆç»“æœæŸ¥è¯¢æµ‹è¯•

```java
@Test
public void test_queryUserList() {
    String resource = "mybatis-config-datasource.xml";
    Reader reader;
    try {
        reader = Resources.getResourceAsReader(resource);
        SqlSessionFactory sqlMapper = new SqlSessionFactoryBuilder().build(reader);
        SqlSession session = sqlMapper.openSession();
        try {
            User req = new User();
            req.setAge(18);
            List<User> userList = session.selectList("org.itstack.demo.design.dao.IUserDao.queryUserList", req);
            logger.info("æµ‹è¯•ç»“æœï¼š{}", JSON.toJSONString(userList));
        } finally {
            session.close();
            reader.close();
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
}
```    

- è¿™ä¸ªæµ‹è¯•å†…å®¹ä¸ä»¥ä¸Šåªæ˜¯æŸ¥è¯¢æ–¹æ³•æœ‰æ‰€ä¸åŒï¼›`session.selectList`ï¼Œæ˜¯æŸ¥è¯¢ä¸€ä¸ªé›†åˆç»“æœã€‚

**æµ‹è¯•ç»“æœ**

```java
16:58:13.963 [main] INFO  org.itstack.demo.design.demo.ApiTest - æµ‹è¯•ç»“æœï¼š[{"age":18,"createTime":1576944000000,"id":1,"name":"æ°´æ°´","updateTime":1576944000000},{"age":18,"createTime":1576944000000,"id":2,"name":"è±†è±†","updateTime":1576944000000}]

Process finished with exit code 0
```  

- æµ‹è¯•éªŒè¯é›†åˆçš„ç»“æœä¹Ÿæ˜¯æ­£å¸¸çš„ï¼Œç›®å‰ä½ç½®æµ‹è¯•å…¨éƒ¨é€šè¿‡ã€‚

## ä¸ƒã€æ€»ç»“

- ä»¥ä¸Šé€šè¿‡ä¸­ä»‹è€…æ¨¡å¼çš„è®¾è®¡æ€æƒ³æˆ‘ä»¬æ‰‹å†™äº†ä¸€ä¸ªORMæ¡†æ¶ï¼Œéšå»äº†å¯¹æ•°æ®åº“æ“ä½œçš„å¤æ‚åº¦ï¼Œè®©å¤–éƒ¨çš„è°ƒç”¨æ–¹å¯ä»¥éå¸¸ç®€å•çš„è¿›è¡Œæ“ä½œæ•°æ®åº“ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¬å¹³å¸¸ä½¿ç”¨çš„`Mybatis`çš„åŸå‹ï¼Œåœ¨æˆ‘ä»¬æ—¥å¸¸çš„å¼€å‘ä½¿ç”¨ä¸­ï¼Œåªéœ€è¦æŒ‰ç…§é…ç½®å³å¯éå¸¸ç®€å•çš„æ“ä½œæ•°æ®åº“ã€‚
- é™¤äº†ä»¥ä¸Šè¿™ç§ç»„ä»¶æ¨¡å¼çš„å¼€å‘å¤–ï¼Œè¿˜æœ‰æœåŠ¡æ¥å£çš„åŒ…è£…ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸­ä»‹è€…æ¨¡å¼æ¥å®ç°ã€‚æ¯”å¦‚ä½ ä»¬å…¬å¸æœ‰å¾ˆå¤šçš„å¥–å“æ¥å£éœ€è¦åœ¨è¥é”€æ´»åŠ¨ä¸­å¯¹æ¥ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠè¿™äº›å¥–å“æ¥å£ç»Ÿä¸€æ”¶åˆ°ä¸­å°å¼€å‘ä¸€ä¸ªå¥–å“ä¸­å¿ƒï¼Œå¯¹å¤–æä¾›æœåŠ¡ã€‚è¿™æ ·å°±ä¸éœ€è¦æ¯ä¸€ä¸ªéœ€è¦å¯¹æ¥å¥–å“çš„æ¥å£ï¼Œéƒ½å»æ‰¾å…·ä½“çš„æä¾›è€…ï¼Œè€Œæ˜¯æ‰¾ä¸­å°æœåŠ¡å³å¯ã€‚
- åœ¨ä¸Šè¿°çš„å®ç°å’Œæµ‹è¯•ä½¿ç”¨ä¸­å¯ä»¥çœ‹åˆ°ï¼Œè¿™ç§æ¨¡å¼çš„è®¾è®¡æ»¡è¶³äº†ï¼›`å•ä¸€èŒè´£`å’Œ`å¼€é—­åŸåˆ™`ï¼Œä¹Ÿå°±ç¬¦åˆäº†`è¿ªç±³ç‰¹åŸåˆ™`ï¼Œå³è¶Šå°‘äººçŸ¥é“è¶Šå¥½ã€‚å¤–éƒ¨çš„äººåªéœ€è¦æŒ‰ç…§éœ€æ±‚è¿›è¡Œè°ƒç”¨ï¼Œä¸éœ€è¦çŸ¥é“å…·ä½“çš„æ˜¯å¦‚ä½•å®ç°çš„ï¼Œå¤æ‚çš„ä¸€é¢å·²ç»æœ‰ç»„ä»¶åˆä½œæœåŠ¡å¹³å°å¤„ç†ã€‚
