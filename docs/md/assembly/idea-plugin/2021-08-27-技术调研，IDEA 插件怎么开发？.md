---
layout: post
category: itstack-ark-middleware
title: æŠ€æœ¯è°ƒç ”ï¼ŒIDEA æ’ä»¶æ€ä¹ˆå¼€å‘ã€Œè„šæ‰‹æ¶ã€ä½ä»£ç å¯è§†åŒ–ç¼–æ’ã€æ¥å£ç”Ÿæˆæµ‹è¯•ã€ï¼Ÿ
tagline: by å°å‚…å“¥
tag: [java,itstack-ark-middleware]
excerpt: CRUD è„šæ‰‹æ¶ã€å¯è§†åŒ–ä½ä»£ç ç¼–æ’ã€æ‘¸é±¼èŠå¤©çœ‹ä¹¦æ’ä»¶ç­‰ç­‰ï¼Œéƒ½å¯ä»¥åœ¨ IDEA æ’ä»¶ä¸­å¼€å‘ï¼Œç”¨å¥½äº†å¯ä»¥éå¸¸å¤§çš„æå‡ç ”å‘èƒ½æ•ˆã€‚åœ¨ IDEA å®˜ç½‘æ–‡æ¡£ä»…æä¾›äº†ä¸¤ç§æ„å»º IDEA æ’ä»¶å·¥ç¨‹çš„æ–¹æ³•ï¼Œä½†æ›´æ¨è Gradle æ–¹å¼ï¼Œè¿™æ ·å¯ä»¥æ»¡è¶³ä½ å¯¹åç»­å…¶ä»–åŠŸèƒ½ç»„ä»¶çš„ä¾¿æ·å¼•å…¥ï¼Œä»¥åŠåšå…¶ä»–å†…å®¹çš„æ‰©å±•ã€‚
lock: need
---

ä½œè€…ï¼šå°å‚…å“¥
<br/>åšå®¢ï¼š[https://bugstack.cn](https://bugstack.cn)
<br/>åŸæ–‡ï¼š[https://mp.weixin.qq.com/s/ckbu4ej4P2fEA8D_5cNUpw](https://mp.weixin.qq.com/s/ckbu4ej4P2fEA8D_5cNUpw)

>æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„

## ä¸€ã€å‰è¨€

`ä¸è¸©äº›å‘ï¼Œæ ¹æœ¬ä¸æ˜¯æˆç†Ÿçš„ç å†œï¼`

ä½ è§‰å¾—è‚¯å¾·åŸºå…¨å®¶æ¡¶æ˜¯ä»€ä¹ˆï¼Ÿä¸€å®¶äººä¸€èµ·åƒçš„æ¡¶å—ï¼Œå°±é‚£ä¹ˆä¸€ç‚¹ç‚¹ï¼Ÿä¸æ˜¯ï¼Œè‚¯å¾·åŸºå…¨å®¶æ¡¶è¯´çš„æ˜¯ï¼Œé¸¡çš„å…¨å®¶æ¡¶ï¼

å¬åˆ°è¿™ä¸ªæ•…äº‹å°±åƒæœ‰æ—¶å€™æˆ‘å› ä¸ºéœ€è¦è§£å†³æŸäº›é—®é¢˜å»`æœç´¢`ã€`æŠ˜è…¾`ã€`éªŒè¯`ã€`æ’é™¤`çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œå› ä¸ºæ–¹å‘ä¸å¯¹ï¼Œæ‰€ä»¥åŠªåŠ›ä¹Ÿå°±ç™½è´¹ã€‚åªèƒ½ä¸€æ¬¡æ¬¡åœ¨ä¼—å¤šçš„èµ„æ–™ã€æ–‡æ¡£ã€æºç ä¸­ä¸€ç‚¹ç‚¹æ‰¾åˆ°å¹¶ç»„åˆå‡ºé€‚åˆè‡ªå·±çš„é—®é¢˜åœºæ™¯çš„æŠ€æœ¯å¤„ç†æ‰‹æ®µã€‚

ä½†è¿™ä¸ªè¿‡ç¨‹æœ‰æ—¶å€™åˆæ˜¯å¿…é¡»ç»å†çš„ï¼Œå¾ˆå°‘æœ‰æ—¶å€™èƒ½ä¸€æ¬¡å°±æ‰¾åˆ°æ­£ç¡®çš„ç­”æ¡ˆæˆ–è€…äººï¼Œå“ªæ€•å¼€å§‹å°±æ‰¾åˆ°äº†ï¼Œä¹Ÿä¼šå†å»æ’æŸ¥ä¸‹å…¶ä»–çš„èµ„æ–™ï¼Œçœ‹çœ‹è¿˜æœ‰æ²¡æœ‰æ›´å¥½çš„ã€‚*æ˜¯ä¸ï¼Œè¿™å°±æ˜¯ä½ å§ï¼Ÿ*

## äºŒã€æŠ›å‡ºé—®é¢˜

`æˆ‘åˆè¦å†²IDEAæ’ä»¶å¼€å‘äº†ï¼`

åœ¨ç ”ç©¶å­—èŠ‚ç æ’æ¡©çš„ç›¸å…³æŠ€æœ¯åï¼ŒğŸ¤”è€ƒè™‘ç€é™¤äº†é€šå¸¸çš„ç”¨åœ¨ä»£ç ä¸Šçº¿åçš„éå…¥ä¾µå¼ç›‘æ§å¤–ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥ç”¨äºç ”å‘åœ¨å¼€å‘é˜¶æ®µå¯¹ç³»ç»Ÿæ¥å£çš„æå–å‘¢ï¼Ÿ

å¸¦ç€è¿™ä¸ªä»è„‘è¢‹ä¸­å†’å‡ºçš„æƒ³æ³•ï¼Œæƒ³åˆ°å¦‚æœè¦å¤„ç†è¿™ä¸ªäº‹æƒ…ï¼Œæœ€æ ¸å¿ƒçš„é—®é¢˜å°±æ˜¯å¼€å‘ä¸€æ¬¾IDEAæ’ä»¶+å­—èŠ‚ç æ’æ¡©èƒ½åŠ›ï¼Œåœ¨ä»£ç è¿è¡Œæ—¶å¯¹è¿è¡Œæ–¹æ³•å¢å¼ºï¼Œæå–ç›¸å…³çš„å¿…è¦ä¿¡æ¯ã€‚åˆ«è¯´æ¡ˆä¾‹è¿˜çœŸåšå‡ºæ¥äº†ï¼Œå¦‚ä¸‹ï¼š

![](https://bugstack.cn/assets/images/middleware/middleware-5-1.png)

- æ¡ˆä¾‹åœ°å€ï¼š[åŸºäºIDEAæ’ä»¶å¼€å‘å’Œå­—èŠ‚ç æ’æ¡©æŠ€æœ¯ï¼Œå®ç°ç ”å‘äº¤ä»˜è´¨é‡è‡ªåŠ¨åˆ†æ](https://bugstack.cn/framework/2021/02/04/%E5%9F%BA%E4%BA%8EIDEA%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E5%92%8C%E5%AD%97%E8%8A%82%E7%A0%81%E6%8F%92%E6%A1%A9%E6%8A%80%E6%9C%AF-%E5%AE%9E%E7%8E%B0%E7%A0%94%E5%8F%91%E4%BA%A4%E4%BB%98%E8%B4%A8%E9%87%8F%E8%87%AA%E5%8A%A8%E5%88%86%E6%9E%90.html)
- åç»­é—®é¢˜ï¼šå…¶å®å®ç°åˆ°è¿™é‡Œè¿˜åªèƒ½ç®—æ˜¯ä¸€ä¸ªæ¡ˆä¾‹ï¼Œå¯¹äº IDEA æ’ä»¶å¼€å‘èƒ½åŠ›å¹¶æ²¡æœ‰å®Œå…¨å¼„é€ï¼Œæ¯”å¦‚è¿™ä¸ª IDEA æ’ä»¶éœ€è¦åšä¸€äº›åŸºç¡€é…ç½®ï¼Œé‚£ä¹ˆåœ¨å“ªé‡Œæ‰“å¼€å‘¢ï¼Ÿè¿˜æœ‰å®æ—¶ç›‘æ§å¹¶äº§ç”Ÿçš„æ¥å£ä¿¡æ¯èƒ½åœ¨ IDEA ç•Œé¢å³ä¾§å±•ç¤ºå‡ºæ¥æˆ–è€…æ”¯æŒå¯¼å‡ºå—ï¼Ÿå¦‚æœæˆ‘å†æœ‰ä¸€äº›é›†åˆ IDEA æ’ä»¶å¼€å‘çš„èƒ½åŠ›åšçš„å…¶ä»–çš„åŠŸèƒ½å¼•å…¥å’‹åŠå‘¢ï¼Ÿè¿™é‡Œç”¨åˆ°äº†å“ªäº›æŠ€æœ¯å‘¢ï¼Ÿç­‰ç­‰ï¼Œè¿™äº›é—®é¢˜éƒ½éœ€è¦å»ä¸€ä¸€è§£å†³æ‰ï¼Œæ‰èƒ½å®Œå®Œæ•´æ•´çš„å¼€å‘ä¸€ä¸ªå¯ç”¨çš„ IDEA æ’ä»¶ï¼Œä¸ºæ­¤ï¼Œéœ€è¦åšæ›´æ·±å…¥çš„èµ„æ–™æ•´ç†å’Œå®è·µéªŒè¯ã€‚

## ä¸‰ã€å¼€å‘æ’ä»¶æ¶‰åŠçš„é—®é¢˜

**é—®é¢˜æ±‡æ€»**ï¼šå¼€å‘ä¸€ä¸ª IDEA æ’ä»¶åŸºæœ¬è¦æ¶‰åŠåˆ°çš„é—®é¢˜è¿‡ç¨‹å¦‚ä¸‹ï¼š

![](https://bugstack.cn/assets/images/middleware/middleware-5-2.png)

- **å¼€å‘æ–¹å¼**ï¼šåœ¨å®˜ç½‘çš„æè¿°ä¸­ï¼Œåˆ›å»ºIDEAæ’ä»¶å·¥ç¨‹çš„æ–¹å¼æœ‰ä¸¤ç§åˆ†åˆ«æ˜¯ï¼ŒIntelliJ Platform Plugin æ¨¡ç‰ˆåˆ›å»ºå’Œ Gradle æ„å»ºæ–¹å¼ã€‚
- **æ¡†æ¶å…¥å£**ï¼šä¸€ä¸ª IDEA æ’ä»¶å¼€å‘å®Œï¼Œè¦è€ƒè™‘æŠŠå®ƒåµŒå…¥åˆ°å“ªï¼Œæ¯”å¦‚æ˜¯ä» IDEA çª—ä½“çš„ Editã€Tools ç­‰è¿›å…¥é…ç½®è¿˜æ˜¯æŠŠçª—ä½“åµŒå…¥åˆ°å·¦ã€å³å·¥å…·æ¡è¿˜æ˜¯IDEAçª—ä½“ä¸‹çš„å¯¹è¯æ¡†ã€‚
- **UI**ï¼šæ€è€ƒçš„æ˜¯çª—ä½“éœ€è¦ç”¨åˆ°ä»€ä¹ˆè¯­è¨€å¼€å‘ï¼Œæ²¡é”™ï¼Œç”¨çš„å°±æ˜¯ Swingã€Awt çš„æŠ€æœ¯èƒ½åŠ›ã€‚
- **API**ï¼šåœ¨ IDEA æ’ä»¶å¼€å‘ä¸­ï¼Œä¸€èˆ¬éƒ½æ˜¯å›´ç»•å·¥ç¨‹è¿›è¡Œçš„ï¼Œé‚£ä¹ˆåŸºæœ¬è¦ä»é€šè¿‡ IDEA æ’ä»¶ JDK å¼€å‘èƒ½åŠ›ä¸­è·å–åˆ°å·¥ç¨‹ä¿¡æ¯ã€ç±»ä¿¡æ¯ã€æ–‡ä»¶ä¿¡æ¯ç­‰ã€‚
- **å¤–éƒ¨åŠŸèƒ½**ï¼šè¿™ä¸€ä¸ªæ˜¯ç”¨äºæŠŠæ’ä»¶èƒ½åŠ›ä¸å¤–éƒ¨ç³»ç»Ÿç»“åˆï¼Œæ¯”å¦‚ä½ æ˜¯éœ€è¦æŠŠæ‹¿åˆ°çš„æ¥å£ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œè¿˜æ˜¯ä»è¿œç¨‹ä¸‹è½½æ–‡ä»¶ç­‰ç­‰ã€‚

## å››ã€å¼€å‘æ’ä»¶çš„ä¸¤ç§é…ç½®

- å®˜æ–¹æ–‡æ¡£ï¼š[https://plugins.jetbrains.com/docs/intellij/disposers.html](https://plugins.jetbrains.com/docs/intellij/disposers.html)
- å®˜æ–¹æ¡ˆä¾‹ï¼š[https://github.com/JetBrains/intellij-sdk-docs](https://github.com/JetBrains/intellij-sdk-docs)

### 1. åŸºç¡€é…ç½®

1. IntelliJ IDEA 2019.3.1 x64
2. JDK éœ€è¦é…ç½® IntelliJ Platform Plugin JDKï¼Œåœ¨ Project Setting ä¸­è®¾ç½®ï¼Œè¿™æ ·æ‰å¯ä»¥æ­£å¸¸å¼€å‘ IDEA æ’ä»¶
3. id 'org.jetbrains.intellij' version '0.6.3'
4. gradle-5.2.1 `ä¸ 2019 IDEA ç‰ˆæœ¬ä¸‹çš„æ’ä»¶å¼€å‘åŒ¹é…`
5. Settings -> Build, Execution,Deloyment -> Build Toolsï¼Œé…ç½® Gradleã€‚Gradle user home = `D:/Program Files (x86)/gradle/gradle-5.2.1/.gradle` User Gradle from =`gradle-wrapper.properties` æˆ–è€… `Specified location` å…·ä½“å¦‚ä¸‹å›¾ï¼š

	![](https://bugstack.cn/assets/images/middleware/middleware-5-3.png)

å¦‚æœä½ æ˜¯ä½¿ç”¨ IDEA New Project é»˜è®¤çš„ IntelliJ Platform Plugin æ–¹å¼ï¼Œå…¶å®åªå…³æ³¨1ã€2ä¸¤æ­¥éª¤å°±å¯ä»¥äº†ï¼Œä½†å¦‚æœä½ éœ€è¦ Gradleï¼Œé‚£ä¹ˆéœ€è¦æ³¨æ„3ã€4ã€5æ­¥éª¤çš„è®¾ç½®ã€‚å½“ç„¶é€šå¸¸ä¹Ÿæ›´æ¨èä½¿ç”¨ Gradle æ¥æ­å»ºå·¥ç¨‹ï¼Œè¿™æ ·ä½ åœ¨éœ€è¦ä¸€äº›é¢å¤–çš„ Jar åŒ…æ—¶å€™ï¼Œåªéœ€è¦åœ¨ Gradle `build.gradle` é…ç½®å³å¯ï¼Œè€Œä¸æ˜¯æŠŠéœ€è¦çš„ Jar åŒ…å¤åˆ¶åˆ°å·¥ç¨‹çš„ lib ä¸‹ã€‚

### 2. é‡åˆ°é—®é¢˜

åœ¨ä½¿ç”¨ Gradle æ„å»ºé¡¹ç›®åï¼Œä½ ä¼šé‡åˆ°å‡ ä¸ªé—®é¢˜ï¼›
1. æå‰ä¸‹è½½å¥½ Gradle 5.2.1 ç‰ˆæœ¬å¹¶é…ç½®ä¸Šï¼Œå¦åˆ™æ„å»ºå·¥ç¨‹è‡ªåŠ¨ä¸‹è½½ä¼šæ¯”è¾ƒæ…¢ [https://gradle.org/next-steps/?version=5.2.1&format=all](https://gradle.org/next-steps/?version=5.2.1&format=all)
2. æ„å»ºå·¥ç¨‹æ—¶å€™æ‹‰å–ç›¸å…³å†…å®¹ï¼Œä¼šæ¯”è¾ƒæ…¢ï¼Œå¦‚æœä½ æœ‰ä»£ç†ä¼šå¥½ä¸€äº›ã€‚
3. ã€éº»çƒ¦çš„é—®é¢˜ã€‘åŸºäº Gradle çš„ IDEA æ’ä»¶å¼€å‘ä¼šåœ¨æ„å»ºè¿‡ç¨‹ä¸­ï¼Œä¼šä¸‹è½½ä¸€ä¸ªåŒ¹é…ç‰ˆæœ¬çš„ IDEA è½¯ä»¶ç”¨äºå¯åŠ¨æµ‹è¯•å¼€å‘æ’ä»¶ï¼Œå‡ ç™¾å…†é‚£ç§zipåŒ… `ideaIC-2019.3.1.zip`ã€‚è¿™ä¸ªæ—¶å€™åŸºæœ¬ä½ ä¼šé‡åˆ°ä¸€ä¸ªå´©æºƒçš„æŠ¥é”™ ` Could not resolve all files for configuration ':detachedConfiguration1'.` å’‹åŠå‘¢ï¼Œå¦‚æœä½ ä¸å«Œå¼ƒéº»çƒ¦å¯ä»¥æ‰‹åŠ¨ä¸‹è½½å¹¶SHA1åŠ å¯†åæŠŠä¸‹è½½çš„æ–‡ä»¶æ”¾åˆ°ç¼“å­˜æ–‡ä»¶å¤¹ä¸­ `.gradle\caches\modules-2\files-2.1` å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š
   - æ‰“å¼€ç³»ç»Ÿç›˜ä¸‹å½“å‰ç”¨æˆ·çš„`.gradle`ç›®å½•ï¼Œè¿›å…¥`.gradle\caches\modules-2\files-2.1`ç›®å½•ï¼Œå³ä¸ºç¼“å­˜æ–‡ä»¶çš„ç›®å½•ã€‚è¿™ä¸ªç›®å½•æ˜¯ä½ çš„æŠ¥é”™æ„å»ºè¿‡ç¨‹ä¸­çš„æŠ¥é”™åœ°å€ï¼Œ`Could not get resource D:\Program Files (x86)\gradle\gradle-5.2.1\.gradle\caches\modules-2\files-2.1\com.jetbrains.intellij.idea\ideaIC\2019.3.1`
   - åŠ å¯†æ–‡ä»¶å¤¹`2dae8e50d4b0508cad2e680b53414f657954f390`ç›®å½•åç§°(ä½ çš„å¯èƒ½ä¸æ˜¯è¿™æ ·çš„)ï¼Œæˆ‘å»ï¼Œè¿™ä¸ªåº”è¯¥æ˜¯[åŠ å¯†](http://msd.misuland.com/pd/4146263708462488226)è¿‡çš„ï¼Œä½†æ˜¯æ˜¯ä»€ä¹ˆåŠ å¯†å‘¢ï¼Ÿ,ç»è¿‡äº†è§£çŸ¥é“äº†è¿™ä¸ªæ˜¯`SHA1`åŠ å¯†ï¼Œä¸”æ˜¯å¯¹æ–‡ä»¶è¿›è¡Œ`SHA1`çš„åŠ å¯†ç”Ÿæˆçš„å”¯ä¸€[å­—ç¬¦ä¸²](http://msd.misuland.com/pd/4146263708462488416)ï¼Œä½†æ˜¯windowsä¸Šæ²¡æœ‰è¿™ä¸ªå‘½ä»¤ï¼Œåœ¨çº¿`SHA1`ä¹Ÿå¤ªéº»çƒ¦äº†ï¼Œè¿˜è¦ä¸Šä¼ æ–‡ä»¶ï¼Œäºæ˜¯æƒ³åˆ°äº†Javaçš„APIï¼Œè¿˜æœ‰å°±æ˜¯é€šè¿‡`git hash`å‘½ä»¤è¡Œæ¥å®ç°ã€‚ æŠŠæˆ‘ä»¬çš„æ–‡ä»¶`ideaIC-2019.3.1.zip`å…ˆä¸´æ—¶æ‹·è´åˆ°è¿™ä¸ªç›®å½•ã€‚è¿è¡Œ`sha1sum.exe ideaIC-2019.3.1.zip`å‘½ä»¤ï¼Œç”Ÿæˆå”¯ä¸€çš„å”¯ä¸€å­—ç¬¦ä¸²ï¼ˆç”¨æ¥æ ¡éªŒæ–‡ä»¶çš„å®Œæ•´æ€§ï¼‰ï¼Œè¿™æ ·å°±æ‹¿åˆ°è¿™ä¸ª`2dae8e50d4b0508cad2e680b53414f657954f390`ç›®å½•å
   - æ¥ä¸‹æ¥åœ¨`2019.3.1`ç›®å½•ä¸‹ï¼Œæ–°å»ºç›®å½•`2dae8e50d4b0508cad2e680b53414f657954f390`ï¼Œå°†`ideaIC-2019.3.1.zip`ç§»åŠ¨è¿›å»å³å¯ã€‚
4. ã€å †æ ˆæº¢å‡ºã€‘åœ¨ Gradle æ„å»ºçš„è¿‡ç¨‹ä¸­ï¼Œæ¶ˆè€—å†…å­˜è¾ƒå¤§ï¼Œå¯èƒ½ä¼šæŠ¥é”™ `Java heap space` æ‰€ä»¥ä¹Ÿå¯ä»¥ åœ¨IDEAé¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œæ–°å»ºæ–‡ä»¶`gradle.properties`ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼Œå˜æ›´gradle Jvmå‚æ•°  `org.gradle.jvmargs=-Xmx2024m -XX:MaxPermSize=512m` åˆ«è¯´è¿˜æŒºå¥½ç”¨ï¼Œç«Ÿç„¶æ„å»ºæˆåŠŸäº†ã€‚

## äº”ã€å†™ä¸ªæµ‹è¯•æ¡ˆä¾‹

### 1. å·¥ç¨‹ç»“æ„

```java
PluginGuide
â”œâ”€â”€ .gradle
â””â”€â”€ src
    â”œâ”€â”€ main
    â”‚   â””â”€â”€ java
    â”‚       â”œâ”€â”€ HiClazz.java
    â”‚       â”œâ”€â”€ MyDumbAwareAction.java
    â”‚       â”œâ”€â”€ MySearchableConfigurable.java
    â”‚       â”œâ”€â”€ MyToolWindowFactory.java    
    â”‚       â””â”€â”€ TestUI.java    
    â””â”€â”€ resources
        â”œâ”€â”€ icons  
        â””â”€â”€ META-INF
            â””â”€â”€ plugin.xml 
```

- HiClazz æ˜¯ç»§æ‰¿ AnAction çš„å®ç°ç±»ï¼Œç”¨äºé™„ç€åˆ° IDEA çš„çª—ä½“ä¸Šï¼Œç‚¹å‡»åæ‰“å¼€å¯¹åº”é¡µé¢
- MyDumbAwareActionã€MyToolWindowFactoryï¼Œé…åˆä½¿ç”¨ï¼Œç”¨äºåœ¨ IDEA æœ€ä¸‹é¢çš„çª—ä½“è®¾ç½®ï¼Œä¸ä½ çœ‹è§çš„æ§åˆ¶å°è¾“å‡ºä¿¡æ¯ä½ç½®ä¸€æ ·ã€‚
- MySearchableConfigurableï¼Œå¯ä»¥ç”¨äº Settings ä¸­é…ç½®çª—ä½“ã€‚
- TestUI æ˜¯åŸºäº Swing å¼€å‘çš„çª—ä½“ï¼ŒéªŒè¯åœ¨ AnAction å®ç°ç±»ä¸­æ‰“å¼€ã€‚
- plugin.xml  æ˜¯æ•´ä¸ª IDEA å’–å•¡çš„é…ç½®æ–‡ä»¶ï¼Œä½ æ‰€æœ‰çš„çª—ä½“éƒ½ä¼šåœ¨è¿™ä¸ªé…ç½®æ–‡ä»¶é‡Œæœ‰æ‰€ä½“ç°ã€‚

### 2. AnAction 

```java
public class HiClazz extends AnAction {

    @Override
    public void actionPerformed(AnActionEvent e) {
        Project project = e.getData(PlatformDataKeys.PROJECT);
        PsiFile psiFile = e.getData(CommonDataKeys.PSI_FILE);
        String classPath = psiFile.getVirtualFile().getPath();
        String title = "Hello World!";
        Messages.showMessageDialog(project, classPath, title, Messages.getInformationIcon());
    }

}
```

- æµ‹è¯•åœ¨ IDEA ä¸­è¯»å–é¼ æ ‡åœç•™åœ¨ç±»æ–‡ä»¶ä¸­çš„ä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ª AnAction é…ç½®åˆ°å„ä¸ª IDEA èœå•ä¸­ã€‚

### 3. MyToolWindowFactory

```java
public class MyToolWindowFactory implements ToolWindowFactory {

    @Override
    public void createToolWindowContent(@NotNull Project project, @NotNull ToolWindow toolWindow) {

        toolWindow.setToHideOnEmptyContent(true);

        class MyPanel extends SimpleToolWindowPanel {

            public MyPanel(boolean vertical) {
                super(vertical);

                DefaultActionGroup group = new DefaultActionGroup();
                group.add(new MyDumbAwareAction("Login1"));
                group.add(new MyDumbAwareAction("Login2"));
                group.add(new MyDumbAwareAction("Login3"));

                ActionToolbar toolbar = ActionManager.getInstance().createActionToolbar("ToolBar", group, false);
                setToolbar(toolbar.getComponent());
            }

        }

        // æ·»åŠ ä¸€ä¸ªé¡µ
        toolWindow.getContentManager().addContent(ContentFactory.SERVICE.getInstance().createContent(new MyPanel(false), "First", false), 0);

    }

}
```

- åœ¨ IDEA çš„æœ€ä¸‹é¢çª—ä½“ä¸­ï¼Œå¦‚æœæƒ³å±•ç¤ºè‡ªå·±çš„çª—ä½“ï¼Œåˆ™éœ€è¦å¼€å‘å¯¹åº”çš„ ToolWindowFactory å®ç°ç±»ï¼Œè¿™æ ·æ‰å¯ä»¥å±•ç¤ºä½ çš„å†…å®¹ã€‚
- è¿™é‡Œçš„æ€æƒ³åŸºæœ¬æ˜¯ Swing æŠ€æœ¯çš„å¼€å‘æ–¹å¼ï¼Œå¦‚æœä½ ä¸ç†Ÿæ‚‰ Swing æœ€è¿™å—å†…å®¹ä¼šæ¯”è¾ƒé™Œç”Ÿã€‚

### 4. plugin.xml

```java
<extensions defaultExtensionNs="com.intellij">
    <!-- Add your extensions here -->
    <toolWindow canCloseContents="true" anchor="bottom"
                id="SmartIM"
                factoryClass="MyToolWindowFactory">
    </toolWindow>
    
    <!-- åœ¨Settingä¸­æ·»åŠ è‡ªå®šä¹‰é…ç½®æ¨¡ç‰ˆ -->
    <projectConfigurable groupId="Other Settings" displayName="My Config" id="thief.id"
                         instance="MySearchableConfigurable"/>
</extensions>

<actions>
    <!-- Add your actions here -->
    <action id="HiId_FileMenu" class="HiClazz" text="HiName">
        <add-to-group group-id="FileMenu" anchor="first"/>
        <add-to-group group-id="MainMenu" anchor="first"/>
        <add-to-group group-id="EditMenu" anchor="first"/>
        <add-to-group group-id="ViewMenu" anchor="first"/>
        <add-to-group group-id="CodeMenu" anchor="first"/>
        <add-to-group group-id="AnalyzeMenu" anchor="first"/>
        <add-to-group group-id="RefactoringMenu" anchor="first"/>
        <add-to-group group-id="BuildMenu" anchor="first"/>
        <add-to-group group-id="RunMenu" anchor="first"/>
        <add-to-group group-id="ToolsMenu" anchor="first"/>
        <add-to-group group-id="WindowMenu" anchor="first"/>
        <add-to-group group-id="HelpMenu" anchor="first"/>
    </action>
    <action id="HiId_EditorPopupMenu" class="HiClazz" text="HiName">
        <add-to-group group-id="EditorPopupMenu" anchor="first"/>
    </action>
    <action id="HiId_MainToolBar" class="HiClazz" text="HiName">
        <add-to-group group-id="MainToolBar" anchor="first"/>
    </action>
</actions>
```

- åœ¨ plugin.xml çš„é…ç½®ä¸­ï¼Œä¸»è¦æ˜¯æŠŠå„ä¸ªåŠŸèƒ½å®ç°çª—ä½“é…ç½®åˆ°å¯¹åº”çš„èœå•ä¸‹ï¼Œæ¯”å¦‚ Tools ä¸‹ã€toolWindow é‡Œç­‰ã€‚

### 5.  æµ‹è¯•ç»“æœ

**å¯åŠ¨è¿è¡Œ**

![](https://bugstack.cn/assets/images/middleware/middleware-5-4.png)

- IDEA æ’ä»¶å¼€å‘è¿è¡Œä¼šåŸºäº Plugin æˆ–è€… Gradle ä¸‹é…ç½®çš„ `::runIde` 

**è¿è¡Œç•Œé¢**

![](https://bugstack.cn/assets/images/middleware/middleware-5-5.png)

- åœ¨ IDEA çš„å„ä¸ªèœå•ä¸­éƒ½å¯ä»¥çœ‹åˆ°æ–°å¢åŠ çš„ HiName æ’ä»¶ï¼Œåœ¨ä½ å®é™…å¼€å‘çš„æ—¶å€™é€‰æ‹©éœ€è¦çš„å†…å®¹è¿›è¡Œé…ç½®å³å¯ã€‚

**è¿è¡Œæ•ˆæœ**

![](https://bugstack.cn/assets/images/middleware/middleware-5-6.png)

- å½“é¼ æ ‡ç‚¹åˆ°ç±»çš„ä¸Šï¼Œåœ¨ç‚¹ HiName å°±å¯ä»¥çœ‹åˆ°å¯¹åº”çš„å·¥ç¨‹ç±»ä¿¡æ¯äº†ã€‚

## å…­ã€æ’ä»¶å¼€å‘èƒ½åšå•¥éƒ½

åœ¨ GitHub ä¸Šæœç´¢ IDEA æ’ä»¶å¼€å‘ï¼Œä¸€å…±æœ‰44é¡µå†…å®¹ï¼Œ[https://github.com/search?p=41&q=idea%E6%8F%92%E4%BB%B6&type=Repositories](https://github.com/search?p=41&q=idea%E6%8F%92%E4%BB%B6&type=Repositories) æ¶‰åŠåˆ°è‡ªåŠ¨åŒ–æµ‹è¯•ã€å·¥ç¨‹è„šæ‰‹æ¶ã€APIç”Ÿæˆã€ç”Ÿæˆæ•°æ®åº“çš„DAOç±»ã€ä¸€äº›å¸¸ç”¨å·¥å…·ï¼Œå½“ç„¶è¿˜æœ‰ä¸€äº›æ¯”è¾ƒæœ‰æ„æ€çš„ï¼Œæ¯”å¦‚ï¼šæ‘¸é±¼çœ‹ä¹¦ã€å¬éƒ­å¾·çº²ç›¸å£°ã€å¾®ä¿¡èŠå¤©ã€å±€åŸŸç½‘èŠå¤©ã€è‹±è¯­ç¿»è¯‘ç­‰ç­‰ã€‚è¿™é‡Œæˆ‘ç»™å¤§å®¶åˆ—ä¸¾å‡ ä¸ªï¼Œå¼€é˜”å¼€é˜”æ€è·¯ã€‚

### 1. å¿«é€Ÿç”Ÿæˆ CRUD å·¥ç¨‹ä»£ç 

![](https://bugstack.cn/assets/images/middleware/middleware-5-7.png)

- **åœ°å€**ï¼š[https://github.com/mars05/crud-intellij-plugin](https://github.com/mars05/crud-intellij-plugin)
- **æè¿°**ï¼šä¸€ä¸ªå¢åˆ æ”¹æŸ¥çš„ideaæ’ä»¶ï¼Œå¯ä»¥æ ¹æ®æ•°æ®åº“è¡¨ç»“æ„ï¼Œå¸®åŠ©æ‚¨å¿«é€Ÿç”Ÿæˆmodelã€daoã€serviceã€controllerç­‰ç›¸å…³ä»£ç ã€‚åŒæ—¶æ”¯æŒMyBatisã€JPAã€MybatisPlusã€‚

### 2. åœ¨ IDEA ä¸­æ‘¸é±¼èŠå¤©

![](https://bugstack.cn/assets/images/middleware/middleware-5-8.png)

- **åœ°å€**ï¼š[https://github.com/Jamling/SmartIM4IntelliJ](https://github.com/Jamling/SmartIM4IntelliJ)
- **æè¿°**ï¼šntelliJ IDEAä¸Šçš„SmartIM(åŸSmartQQ)æ’ä»¶ï¼Œå¯ä»¥åœ¨IDEAä¸­ä½¿ç”¨QQæˆ–å¾®ä¿¡èŠå¤©ã€‚å®‰è£…æˆåŠŸåï¼Œä¼šåœ¨åº•éƒ¨æ å‡ºç°ä¸€ä¸ªSmartIMçš„tabï¼ˆå¦‚æœæ²¡æœ‰åº•éƒ¨æ ï¼Œåˆ™åœ¨èœå•Viewä¸­æŠŠToolButtonså‹¾é€‰ä¸Šï¼‰

### 3. å¯è§†åŒ–æµç¨‹ç¼–æ’

![](https://bugstack.cn/assets/images/middleware/middleware-5-9.png)

- **åœ°å€**ï¼š[https://github.com/alibaba/compileflow](https://github.com/alibaba/compileflow)
- **æè¿°**ï¼š`compileflow Process`å¼•æ“æ˜¯æ·˜å®å·¥ä½œæµ`TBBPM`å¼•æ“ä¹‹ä¸€ï¼Œæ˜¯ä¸“æ³¨äºçº¯å†…å­˜æ‰§è¡Œï¼Œæ— çŠ¶æ€çš„æµç¨‹å¼•æ“ï¼Œé€šè¿‡å°†æµç¨‹æ–‡ä»¶è½¬æ¢ç”Ÿæˆ`java`ä»£ç ç¼–è¯‘æ‰§è¡Œï¼Œç®€æ´é«˜æ•ˆã€‚å½“å‰æ˜¯é˜¿é‡Œä¸šåŠ¡ä¸­å°äº¤æ˜“ç­‰å¤šä¸ªæ ¸å¿ƒç³»ç»Ÿçš„æµç¨‹å¼•æ“ã€‚åœ¨é˜¿é‡Œå·´å·´ä¸­å°è§£å†³æ–¹æ¡ˆä¸­å¹¿æ³›ä½¿ç”¨ï¼Œæ”¯æ’‘äº†å¯¼è´­ã€äº¤æ˜“ã€å±¥çº¦ã€èµ„é‡‘ç­‰å¤šä¸ªä¸šåŠ¡åœºæ™¯ã€‚

## ä¸ƒã€æ€»ç»“

- IDEA å¼€å‘æŠ€æœ¯æ¶‰åŠåˆ°äº†å¯¹ IDEA æ’ä»¶å¼€å‘ API çš„ç†Ÿæ‚‰ä»¥åŠUIç•Œé¢çš„å¼€å‘ï¼Œæ‰€ä»¥å¦‚æœæƒ³å¼€å‘ä¸€æ¬¾ IDEA æ’ä»¶ï¼ŒåŸºæœ¬ç¦»ä¸å¼€å¯¹ Swing çš„ç¼–å†™ï¼Œä¸è¿‡ä¹Ÿä¸éœ€è¦å¤ªå¤æ‚çš„é¡µé¢ï¼Œæ‰€æœ‰è¿™éƒ¨åˆ†æŠ€èƒ½è¿˜å¥½ã€‚
- IDEA å®˜ç½‘æ–‡æ¡£ä»…æä¾›äº†ä¸¤ç§æ„å»º IDEA æ’ä»¶å·¥ç¨‹çš„æ–¹æ³•ï¼Œä½†æ›´æ¨è Gradle æ–¹å¼ï¼Œè¿™æ ·å¯ä»¥æ»¡è¶³ä½ å¯¹åç»­å…¶ä»–åŠŸèƒ½ç»„ä»¶çš„ä¾¿æ·å¼•å…¥ï¼Œä»¥åŠåšå…¶ä»–å†…å®¹çš„æ‰©å±•ã€‚
- IDEA æ’ä»¶å¼€å‘å¯ä»¥å¼€å‘å‡ºå¾ˆå¤šç”¨äºææ•ˆç ”å‘ç¼–ç¨‹çš„æŠ€æœ¯æ’ä»¶ï¼Œä¾‹å¦‚ä¸€äº›ç›‘æ§ã€è„šæ‰‹æ¶ã€æ¥å£APIä»¥åŠè°ƒè¯•ã€æµç¨‹åŒ–ä½ä»£ç ç¼–æ’ç­‰ç­‰ï¼Œæ‰€ä»¥è¿™éƒ¨åˆ†å†…å®¹çš„ä»·å€¼è¿˜æ˜¯è›®å¤§çš„ã€‚

## å…«ã€ç³»åˆ—æ¨è

- [åŸºäºIDEAæ’ä»¶å¼€å‘å’Œå­—èŠ‚ç æ’æ¡©æŠ€æœ¯ï¼Œå®ç°ç ”å‘äº¤ä»˜è´¨é‡è‡ªåŠ¨åˆ†æ](https://bugstack.cn/framework/2021/02/04/%E5%9F%BA%E4%BA%8EIDEA%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E5%92%8C%E5%AD%97%E8%8A%82%E7%A0%81%E6%8F%92%E6%A1%A9%E6%8A%80%E6%9C%AF-%E5%AE%9E%E7%8E%B0%E7%A0%94%E5%8F%91%E4%BA%A4%E4%BB%98%E8%B4%A8%E9%87%8F%E8%87%AA%E5%8A%A8%E5%88%86%E6%9E%90.html)
- [å…³äºä½ä»£ç ç¼–ç¨‹çš„å¯æŒç»­æ€§äº¤ä»˜è®¾è®¡å’Œåˆ†æ](https://bugstack.cn/framework/2021/02/21/%E5%85%B3%E4%BA%8E%E4%BD%8E%E4%BB%A3%E7%A0%81%E7%BC%96%E7%A8%8B%E7%9A%84%E5%8F%AF%E6%8C%81%E7%BB%AD%E6%80%A7%E4%BA%A4%E4%BB%98%E8%AE%BE%E8%AE%A1%E5%92%8C%E5%88%86%E6%9E%90.html)
- [ä¸é‡å¤é€ è½®å­éƒ½æ˜¯éª—å°å­©çš„ï¼Œæ•™ä½ æ‰‹æ’¸ SpringBoot è„šæ‰‹æ¶ï¼](https://bugstack.cn/framework/2021/03/14/%E4%B8%8D%E9%87%8D%E5%A4%8D%E9%80%A0%E8%BD%AE%E5%AD%90%E5%8F%AA%E6%98%AF%E9%AA%97%E5%B0%8F%E5%AD%A9%E5%AD%90%E7%9A%84-%E6%95%99%E4%BD%A0%E6%89%8B%E6%92%B8-SpringBoot-%E8%84%9A%E6%89%8B%E6%9E%B6.html)
- [è°ƒç ”å­—èŠ‚ç æ’æ¡©æŠ€æœ¯ï¼Œç”¨äºç³»ç»Ÿç›‘æ§è®¾è®¡å’Œå®ç°](https://bugstack.cn/framework/2021/07/19/%E8%B0%83%E7%A0%94%E5%AD%97%E8%8A%82%E7%A0%81%E6%8F%92%E6%A1%A9%E6%8A%80%E6%9C%AF-%E7%94%A8%E4%BA%8E%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7%E8%AE%BE%E8%AE%A1%E5%92%8C%E5%AE%9E%E7%8E%B0.html)
- [å°å‚…å“¥ï¼Œä¸€ä¸ªæœ‰â€œå‰¯ä¸šâ€çš„ç å†œï¼](https://bugstack.cn/itstack-code-life/2021/05/26/%E5%B0%8F%E5%82%85%E5%93%A5-%E4%B8%80%E4%B8%AA%E6%9C%89-%E5%89%AF%E4%B8%9A-%E7%9A%84%E7%A0%81%E5%86%9C.html)