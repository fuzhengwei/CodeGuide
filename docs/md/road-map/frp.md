---
title: Frp
lock: need
---

# ç”¨äº‘æœåŠ¡å™¨IPï¼Œæ•™ä½ æ­ä¸€å¥—å†…ç½‘ç©¿é€æœåŠ¡ï¼

ä½œè€…ï¼šå°å‚…å“¥
<br/>åšå®¢ï¼š[https://bugstack.cn](https://bugstack.cn)

> æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„

<iframe id="B-Video" src="//player.bilibili.com/player.html?isOutside=true&aid=113121469400785&bvid=BV1uR4jesE3Z&cid=25830556905&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="480"> </iframe>

å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æŠ€æœ¯UPä¸»å°å‚…å“¥ã€‚

ä½œä¸ºä¸€ä¸ªç ”å‘äººå‘˜ï¼Œæˆ‘ä»¬ç»å¸¸æœ‰è¯‰æ±‚æŠŠæœ¬æœºæ­£åœ¨å¼€å‘é˜¶æ®µçš„åº”ç”¨ï¼Œé€šè¿‡æœ¬åœ°éƒ¨ç½²çš„æ–¹å¼è®©å¤–éƒ¨å…¶ä»–äººè¿›è¡Œè®¿é—®éªŒè¯ã€‚å°¤å…¶æ˜¯ä¸€äº›ç»™è¿œç¨‹è¿œç¨‹å®¢æˆ·æ¼”ç¤ºçš„æ—¶å€™ï¼Œä¹Ÿæ˜¯éå¸¸éœ€è¦è¿™æ ·çš„æœåŠ¡ã€‚ä½†æœ¬æœºå¹¶ä¸æ˜¯å…¬ç½‘IPï¼Œéƒ½æ˜¯å†…ç½‘çš„ï¼Œæ€ä¹ˆæ ·å¤–éƒ¨è®¿é—®å‘¢ï¼Ÿ

<div align="center">
	<img src="https://bugstack.cn/images/roadmap/tutorial/road-map-docker-idea-00.png" width="150px"/>
</div>

**FRP å†…ç½‘ç©¿é€æ˜¯ä»€ä¹ˆï¼Ÿ**

å†…ç½‘ç©¿é€æ˜¯ä¸€ç§æŠ€æœ¯æ‰‹æ®µï¼Œç”¨äºè®¿é—®ä½äºé˜²ç«å¢™æˆ–è·¯ç”±å™¨åé¢çš„æœ¬åœ°ç½‘ç»œï¼ˆå†…ç½‘ï¼‰ä¸­çš„è®¾å¤‡æˆ–æœåŠ¡ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå†…ç½‘ä¸­çš„è®¾å¤‡æ— æ³•ç›´æ¥é€šè¿‡å…¬ç½‘ï¼ˆäº’è”ç½‘ï¼‰è¿›è¡Œè®¿é—®ï¼Œä»è€Œå®ç°éšç§ä¿æŠ¤å’Œå®‰å…¨æ€§ã€‚å†…ç½‘ç©¿é€æŠ€æœ¯çš„ç›®æ ‡æ˜¯çªç ´è¿™ä¸€é™åˆ¶ï¼Œä½¿å¤–éƒ¨ç”¨æˆ·èƒ½å¤Ÿé€šè¿‡äº’è”ç½‘è®¿é—®å†…ç½‘ä¸­çš„æœåŠ¡æˆ–è®¾å¤‡ã€‚

è™½ç„¶å¸‚é¢ä¹Ÿæœ‰ä¸€äº›å†…ç½‘ç©¿é€çš„æœåŠ¡ï¼ŒåŒ…æ‹¬ï¼› `natapp`ã€`coplar`ã€`èŠ±ç”Ÿå£³`ç­‰ï¼Œå¦‚æœä½ ä¸æƒ³æŠ˜è…¾ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ä½†æŠ˜è…¾ä¸€ä¸‹ï¼Œå¾€å¾€ä¼šçœé’±ï¼

## 1. æ­å»ºè„šæœ¬

è¿™é‡Œå°å‚…å“¥ä½¿ç”¨äº† `fatedier/frp` 0.60 ç‰ˆæœ¬è¿›è¡Œæ­å»ºï¼Œæä¾›äº†ç›¸å…³çš„è¿è¡Œè„šæœ¬ã€‚

<div align="center">
	<img src="https://bugstack.cn/images/roadmap/tutorial/road-map-frp-01.png" width="450px"/>
</div>

- åœ°å€ï¼š[https://gitcode.net/KnowledgePlanet/road-map/xfg-dev-tech-frp](https://gitcode.net/KnowledgePlanet/road-map/xfg-dev-tech-frp)
- å®˜ç½‘ï¼š[https://github.com/fatedier/frp](https://github.com/fatedier/frp)

### 1.1 frps - æœåŠ¡ç«¯

```java
# https://github.com/fatedier/frp/blob/dev/conf/frps_full_example.toml
[common]
# ç›‘å¬ç«¯å£
bind_port = 7000
# é¢æ¿ç«¯å£
dashboard_port = 7500
# ç™»å½•é¢æ¿çš„è´¦å·å¯†ç ï¼ˆä¿®æ”¹æˆè‡ªå·±çš„ï¼‰
dashboard_user = admin
dashboard_pwd = admin
# token =
```

- token å¦‚æœè®¾å®šäº†ï¼Œéœ€è¦ä¿æŒå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¸€è‡´ã€‚

```java
# å‘½ä»¤æ‰§è¡Œ docker-compose -f docker-compose.yml up -d
version: '3.9'
services:
  frps:
    image: fatedier/frps:v0.60.0
    hostname: frps
    container_name: frps
    volumes:
      - "./config/frps.toml:/frps.toml"
    command:
      - "-c"
      - "/frps.toml"
    network_mode: "host"
```

- docker compose æŒ‰ç…§è„šæœ¬ï¼Œèµ°çš„æ˜¯ `network_mode: "host"` ä¸éœ€è¦é¢å¤–æŒ‡å®šç«¯å£ã€‚
- ä½ éœ€è¦åœ¨äº‘æœåŠ¡å™¨å¼€æ”¾ 7000ã€7500 ä»¥åŠéœ€è¦æ˜ å°„å‡ºå»çš„ç«¯å£ã€‚æ¯”å¦‚å®¢æˆ·ç«¯é…ç½®äº† 8080ã€9001 ä¹Ÿéœ€è¦åœ¨äº‘æœåŠ¡å™¨å¼€æ”¾ç«¯å£ï¼Œè¿™æ ·æ‰èƒ½è®¿é—®è¿›æ¥ã€‚
- å®˜ç½‘é…ç½®ï¼š[https://github.com/fatedier/frp/blob/dev/conf/frps_full_example.toml](https://github.com/fatedier/frp/blob/dev/conf/frps_full_example.toml) - è¿™é‡Œæœ‰å¾ˆå…¨çš„é…ç½®å¯ä»¥å‚è€ƒã€‚

### 1.2 frpc - å®¢æˆ·ç«¯

```java
# æœåŠ¡ç«¯åœ°å€ https://github.com/fatedier/frp/blob/dev/conf/frpc_full_example.toml
serverAddr = "117.72.37.243"
# æœåŠ¡ç«¯é…ç½®çš„bindPort
serverPort = 7000
# token =

[[proxies]]
# ä»£ç†åº”ç”¨åç§°ï¼Œæ ¹æ®è‡ªå·±éœ€è¦è¿›è¡Œé…ç½®
name = "xfg-dev-tech-01"
# ä»£ç†ç±»å‹ æœ‰tcp\udp\stcp\p2p
type = "tcp"
# å®¢æˆ·ç«¯ä»£ç†åº”ç”¨IP
localIP = "127.0.0.1"
# å®¢æˆ·ç«¯ä»£ç†åº”ç”¨ç«¯å£
localPort = 8080
# æœåŠ¡ç«¯åå‘ä»£ç†ç«¯å£ï¼›æä¾›ç»™å¤–éƒ¨è®¿é—®
remotePort = 8080

[[proxies]]
# ä»£ç†åº”ç”¨åç§°ï¼Œæ ¹æ®è‡ªå·±éœ€è¦è¿›è¡Œé…ç½®
name = "xfg-dev-tech-02"
# ä»£ç†ç±»å‹ æœ‰tcp\udp\stcp\p2p
type = "tcp"
# å®¢æˆ·ç«¯ä»£ç†åº”ç”¨IP
localIP = "127.0.0.1"
# å®¢æˆ·ç«¯ä»£ç†åº”ç”¨ç«¯å£
localPort = 9001
# æœåŠ¡ç«¯åå‘ä»£ç†ç«¯å£ï¼›æä¾›ç»™å¤–éƒ¨è®¿é—®
remotePort = 9001
```

- `localPort = 8080` æ˜¯æœ¬åœ°åº”ç”¨çš„ç«¯å£ã€‚
- `remotePort = 8080` æ˜¯è¿œç¨‹æœåŠ¡å™¨è¦æš´æ¼å‡ºå»çš„ç«¯å£ï¼Œè¿™ä¸ªç«¯å£ä½ å¯ä»¥æŒ‰éœ€è°ƒæ•´ã€‚

```java
# å‘½ä»¤æ‰§è¡Œ docker-compose -f docker-compose.yml up -d
version: '3.9'
services:
  frpc:
    image: fatedier/frpc:v0.60.0
    hostname: frpc
    container_name: frpc
    volumes:
      - "./config/frpc.toml:/frpc.toml"
    command:
      - "-c"
      - "/frpc.toml"
    network_mode: "host"
```

- docker compose å®‰è£…ï¼ŒåŒæ ·éœ€è¦æŒ‡å®š `network_mode: "host"`

## 2. æ‰§è¡Œå®‰è£…

æ­å»ºFRPå†…ç½‘ç©¿é€éœ€è¦ä¸€å°äº‘æœåŠ¡å™¨ï¼Œå…¶å®ä¸»è¦ç”¨çš„å°±æ˜¯å®ƒçš„å…¬ç½‘IPã€‚ä¸è¿‡ç°åœ¨çš„äº‘æœåŠ¡å™¨éƒ½éå¸¸ä¾¿å®œï¼Œ36å…ƒå°±å¯ä»¥è´­ä¹°1å¹´ï¼Œè¿˜èƒ½æŠ½å–äº¬è±†ã€‚æŠ˜ç®—ä¸‹æ¥ä¹Ÿå°±26å…ƒ1å¹´äº†ï¼

<div align="center">
	<img src="https://bugstack.cn/images/roadmap/tutorial/road-map-frp-02.png" width="250px"/>
</div>

- ä¸“å±ä»·ï¼š[http://618.gaga.plus/](http://618.gaga.plus/)
- äº‘æœåŠ¡å™¨ä½¿ç”¨ï¼š[https://bugstack.cn/md/road-map/docker.html](https://bugstack.cn/md/road-map/docker.html) - å·²å½•åˆ¶äº†ç›¸å…³ Dockerã€Portainer ç¯å¢ƒå®‰è£…ï¼Œä½ å¯ä»¥ç›´æ¥å¯¹ç…§æ“ä½œã€‚

### 2.1 frps - äº‘æœåŠ¡å™¨å®‰è£…

#### 2.1.1 ä¸Šä¼ æ–‡ä»¶

<div align="center">
	<img src="https://bugstack.cn/images/roadmap/tutorial/road-map-frp-03.png" width="750px"/>
</div>


#### 2.1.2 æ‰§è¡Œè„šæœ¬

```java
[root@lavm-aqhgp9nber frps]# docker-compose -f docker-compose.yml up -d
[+] Running 1/1
 âœ” Container frps  Started   
```

<div align="center">
	<img src="https://bugstack.cn/images/roadmap/tutorial/road-map-frp-04.png" width="750px"/>
</div>

ä½ å¯ä»¥è¿›å…¥ğŸ“ƒæŸ¥çœ‹å¯åŠ¨æ—¥å¿—ï¼›


```java
WARNING: ini format is deprecated and the support will be removed in the future, please use yaml/json/toml format instead!
2024-09-08 09:51:50.581 [I] [frps/root.go:105] frps uses config file: /frps.toml
2024-09-08 09:51:50.674 [I] [server/service.go:237] frps tcp listen on 0.0.0.0:7000
2024-09-08 09:51:50.674 [I] [frps/root.go:114] frps started successfully
2024-09-08 09:51:50.674 [I] [server/service.go:351] dashboard listen on 0.0.0.0:7500
2024-09-08 09:51:52.429 [I] [server/service.go:576] [cd9f610f66475f3a] client login info: ip [223.72.84.77:10816] version [0.60.0] hostname [] os [linux] arch [amd64]
2024-09-08 09:51:52.447 [I] [proxy/tcp.go:82] [cd9f610f66475f3a] [xfg-dev-tech-02] tcp proxy listen port [9001]
2024-09-08 09:51:52.448 [I] [server/control.go:399] [cd9f610f66475f3a] new proxy [xfg-dev-tech-02] type [tcp] success
2024-09-08 09:51:52.448 [I] [proxy/tcp.go:82] [cd9f610f66475f3a] [xfg-dev-tech-01] tcp proxy listen port [8080]
2024-09-08 09:51:52.448 [I] [server/control.go:399] [cd9f610f66475f3a] new proxy [xfg-dev-tech-01] type [tcp] success
```

#### 2.1.3 å¼€æ”¾ç«¯å£

<div align="center">
	<img src="https://bugstack.cn/images/roadmap/tutorial/road-map-frp-05.png" width="750px"/>
</div>

- è¿›å…¥äº‘æœåŠ¡å™¨é˜²ç«å¢™ï¼Œå¼€æ”¾è®¿é—®ç«¯å£ã€‚

### 2.2 frpc - æœ¬åœ°å®‰è£…å®¢æˆ·ç«¯

#### 2.2.1 æ‰§è¡Œè„šæœ¬

<div align="center">
	<img src="https://bugstack.cn/images/roadmap/tutorial/road-map-frp-06.png" width="650px"/>
</div>

- æ³¨æ„ frpc.toml æ˜¯é…ç½®æœåŠ¡å™¨çš„ipå’Œæœ¬æœºåº”ç”¨çš„ipä¿¡æ¯ã€‚ä½ éœ€è¦ä¿®æ”¹ serverAddr çš„ IP åœ°å€ï¼Œä¸ºä½ çš„æœåŠ¡å™¨å…¬ç½‘ IP åœ°å€ã€‚
- å¦‚æœä½ çš„ IntelliJ IDEA å¸¦æœ‰ç»¿è‰²ç®­å¤´ï¼Œä¸”æœ¬æœºä¹Ÿå®‰è£…äº† Docker é‚£ä¹ˆå¯ä»¥ç›´æ¥å®‰è£… frpc å®¢æˆ·ç«¯ã€‚

#### 2.2.2 å®¢æˆ·ç«¯æ—¥å¿—

<div align="center">
	<img src="https://bugstack.cn/images/roadmap/tutorial/road-map-frp-07.png" width="650px"/>
</div>

```java
2024-09-08 10:00:16.472 [I] [sub/root.go:142] start frpc service for config file [/frpc.toml]
2024-09-08 10:00:16.473 [I] [client/service.go:295] try to connect to server...
2024-09-08 10:00:16.533 [I] [client/service.go:287] [adab2679b41d410f] login to server success, get run id [adab2679b41d410f]
2024-09-08 10:00:16.534 [I] [proxy/proxy_manager.go:173] [adab2679b41d410f] proxy added: [xfg-dev-tech-01 xfg-dev-tech-02]
2024-09-08 10:00:16.550 [I] [client/control.go:168] [adab2679b41d410f] [xfg-dev-tech-01] start proxy success
2024-09-08 10:00:16.550 [I] [client/control.go:168] [adab2679b41d410f] [xfg-dev-tech-02] start proxy success
```

#### 2.2.3 æœåŠ¡ç«¯æ—¥å¿—

<div align="center">
	<img src="https://bugstack.cn/images/roadmap/tutorial/road-map-frp-04.png" width="850px"/>
</div>

<div align="center">
	<img src="https://bugstack.cn/images/roadmap/tutorial/road-map-frp-08.png" width="850px"/>
</div>

- å®¢æˆ·ç«¯å¯åŠ¨åï¼Œä½ å¯ä»¥è¿›å…¥åˆ°æœåŠ¡ç«¯ frps æŸ¥çœ‹æ—¥å¿—ï¼Œè¿™ä¸ªæ—¶å€™ä¼šæ³¨å†Œè¿›æ¥å®¢æˆ·ç«¯ä¿¡æ¯ã€‚

**ä½ è¿˜å¯ä»¥è¿›å…¥ frp ç®¡ç†åå°æŸ¥çœ‹**

åœ°å€ï¼š[http://117.72.37.243:7500/static/#/](http://117.72.37.243:7500/static/#/) - ä¿®æ”¹ä¸ºä½ çš„æœåŠ¡å™¨ipè¿›è¡Œè®¿é—®ã€‚

<div align="center">
	<img src="https://bugstack.cn/images/roadmap/tutorial/road-map-frp-09.png" width="950px"/>
</div>

- è¿™é‡Œä¹Ÿå¯ä»¥çœ‹åˆ°ä½ æ³¨å†Œä¸Šæ¥çš„å„é¡¹ä¿¡æ¯ã€‚

## 3. æµ‹è¯•éªŒè¯

### 3.1 éƒ¨ç½²åº”ç”¨

åœ¨å·¥ç¨‹ä¸­æä¾›äº† xfg-dev-tech-app çš„åº”ç”¨ï¼Œä½ å¯ä»¥æœ¬åœ°æ‰§è¡Œ docker è„šæœ¬è¿›è¡Œé•œåƒæ„å»ºå’Œéƒ¨ç½²ã€‚

<div align="center">
	<img src="https://bugstack.cn/images/roadmap/tutorial/road-map-frp-10.png" width="950px"/>
</div>

<div align="center">
	<img src="https://bugstack.cn/images/roadmap/tutorial/road-map-frp-11.png" width="950px"/>
</div>

- å¦‚å›¾ï¼Œæ‰§è¡Œ1ã€2ã€3æ­¥éª¤ï¼Œæ‰“åŒ…ã€æ„å»ºå’Œéƒ¨ç½²åº”ç”¨ã€‚

### 3.2 è®¿é—®éªŒè¯

#### 3.2.1 æœ¬åœ°è®¿é—®

åœ°å€ï¼š[http://127.0.0.1:8080/api/test](http://127.0.0.1:8080/api/test)

<div align="center">
	<img src="https://bugstack.cn/images/roadmap/tutorial/road-map-frp-12.png" width="550px"/>
</div>

#### 3.2.2 ç©¿é€è®¿é—®

åœ°å€ï¼š[http://117.72.37.243:8080/api/test](http://117.72.37.243:8080/api/test)

## 4. åŒç±»äº§å“

- [EasyTier ä¸€ä¸ªç®€å•ã€å®‰å…¨ã€å»ä¸­å¿ƒåŒ–çš„å†…ç½‘ç©¿é€ VPN ç»„ç½‘æ–¹æ¡ˆ](https://www.easytier.top/)

<div align="center">
	<img src="https://bugstack.cn/images/roadmap/tutorial/road-map-frp-13.png" width="550px"/>
</div>

