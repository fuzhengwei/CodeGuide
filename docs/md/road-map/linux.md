---
title: Linux
lock: need
---

# æˆ‘æŠŠäº‘æœåŠ¡å™¨ï¼Œæ­å»ºæˆå¼€å‘ç¯å¢ƒä½¿ç”¨ï¼

ä½œè€…ï¼šå°å‚…å“¥
<br/>åšå®¢ï¼š[https://bugstack.cn](https://bugstack.cn)

> æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„

<iframe id="B-Video" src="//player.bilibili.com/player.html?aid=1602599690&bvid=BV1fm421E7oT&cid=1490208913&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" height="480"> </iframe>

åœ¨å‡ å¹´å‰åˆšå…¥æ‰‹ Mac ç”µè„‘çš„æ—¶å€™ï¼Œæœ‰ä¸å°‘ä¼™ä¼´é—®è¿‡æˆ‘ï¼Œè¿™ç”µè„‘æœ‰ä»€ä¹ˆä¼˜åŠ¿å—ï¼Ÿåˆä¸èƒ½æ‰“æ¸¸æˆï¼æ˜¯å‘€ï¼Œèƒ½æƒ³åˆ°çš„å°±æ˜¯æ²¡æœ‰å¹¿å‘Šã€APPå®‰è£…ç®€å•ã€UIé£æ ¼ç»†è…»ã€‚ä½†è¿™äº›å’Œ Windows ç”µè„‘å¥½åƒä¹Ÿæ²¡æœ‰å¤ªå¤§çš„å·®åˆ«ï¼Œå„æœ‰æ‰€å¥½ç½¢äº†ã€‚è€Œä¸”åŒç­‰é…ç½® Mac è¿˜è¦è´µä¸å°‘ã€‚

<div align="center">
    <img src="https://bugstack.cn/images/roadmap/tutorial/road-map-linux-01.gif" width="200px">
</div>

ä½†ç›´åˆ°æ·±å…¥ç¼–ç¨‹å¼€å‘ä»¥åï¼Œä¸€ä¼šæåç«¯ã€ä¸€äº›å†™å‰ç«¯ã€ä¸€ä¼šå®‰è£…Dockerç¯å¢ƒã€‚Mac ç”µè„‘æ˜¯çœŸçš„å¥½ç”¨ï¼Œä½ å·²ç»å†™äº†ä¸€å¤©çš„ä»£ç äº†ï¼ŒWindows ä¼™ä¼´è¿˜åœ¨é€‚é…ç¯å¢ƒã€‚æˆ‘è§‰å¾—ç›´åˆ°è¿™ä¼šå®ƒçš„ä¼˜åŠ¿æ‰ä½“ç°å‡ºæ¥ï¼Œå› ä¸º Mac == äº‘æœåŠ¡å™¨ï¼ˆLinuxï¼‰ï¼

é‚£ä¹ˆæœ¬æ–‡ï¼Œå°±æ˜¯ä¸ºäº† Windows ä¼™ä¼´æ‰€å†™ï¼Œæä¾›ä¸€å¥—éå¸¸å®¹æ˜“çš„ï¼Œåœ¨äº‘æœåŠ¡å™¨å°±èƒ½æ­å»ºå‡ºæ¥çš„å¼€å‘ç¯å¢ƒå’Œæ„å»ºå‰åç«¯é¡¹ç›®çš„æ–¹æ¡ˆã€‚è®©å¤§å®¶å¯ä»¥å°‘ä¸€äº›æŠ˜è…¾å°±èƒ½å¿«é€Ÿå¯åŠ¨å¼€å‘ï¼Œå®Œæˆé¡¹ç›®çš„æ„å»ºå’Œéƒ¨ç½²æ“ä½œã€‚â€”â€” å…¶å®ä½ æ—©æ™šä¹Ÿéœ€è¦ä½¿ç”¨Linuxç¯å¢ƒï¼

æœ¬æ–‡æ¶‰åŠçš„å·¥ç¨‹ï¼›

- xfg-dev-tech-linuxï¼š[https://gitcode.net/KnowledgePlanet/road-map/xfg-dev-tech-linux](https://gitcode.net/KnowledgePlanet/road-map/xfg-dev-tech-linux)
- äº‘æœåŠ¡å™¨é…ç½®è¦æ±‚ï¼š2c2g [https://yun.xfg.plus](https://yun.xfg.plus)
- å·¥ç¨‹æä¾›äº†gitã€ javaã€mavenã€redisã€mysql çš„ç¯å¢ƒå®‰è£…ï¼Œå¯ä»¥è®©æœ¬åœ°è¿æ¥äº‘æœåŠ¡å™¨çš„é…ç½®ï¼Œä¹Ÿå¯ä»¥åœ¨äº‘æœåŠ¡å™¨æ‹‰å–é¡¹ç›®è¿›è¡Œæ„å»ºæ“ä½œã€‚

>æ–‡æœ«æœ‰åŠ å…¥å­¦ä¹ æ–¹å¼ï¼Œæä¾›äº†8ä¸ªJavaå®æˆ˜é¡¹ç›®ï¼Œéå¸¸æœ‰ä¸œè¥¿å¯ä»¥å­¦ï¼

## ä¸€ã€å·¥ç¨‹è¯´æ˜

åœ¨æŠ˜è…¾å·¥ç¨‹ä¸­æä¾›äº†å¼€å‘å¿…å¤‡çš„ç¯å¢ƒå®‰è£…ï¼Œå¯ä»¥é€šè¿‡æ‰§è¡Œè„šæœ¬çš„æ–¹å¼å®‰è£…å’Œå¸è½½ Javaã€Maven ä»¥åŠé€šè¿‡ Docker Compose å®‰è£… Redisã€MySQLã€‚

<div align="center">
    <img src="https://bugstack.cn/images/roadmap/tutorial/road-map-linux-02.png" width="450px">
</div>

- é¦–å…ˆï¼Œç¡®ä¿ä½ çš„ Linux å·²å®‰è£…äº† Docker + Composeã€Portainer â€”â€” è¿™éƒ¨åˆ†å†…å®¹åœ¨å°å‚…å“¥çš„Javaç®€æ˜æ•™ç¨‹ä¸­ä»¥åŠæä¾›ã€‚https://bugstack.cn/md/road-map/road-map.html
- javaã€maven æ‰§è¡Œè„šæœ¬å³å¯ï¼Œæ‰§è¡Œå‰å¯ä»¥å…ˆé€šè¿‡ chmod +x install-java.sh é™„ä¸Šæ‰§è¡Œæƒé™ï¼ˆå…¶ä»–shæ–‡ä»¶ç±»ä¼¼ï¼‰
- docker-compose-environment.yml æ˜¯è´Ÿè´£å®‰è£… mysqlã€redis çš„ï¼Œäº‘æœåŠ¡å™¨å®‰è£…åè¦é…ç½®ç«¯å£å¼€æ”¾ï¼Œè¿™æ ·æœ¬åœ°æ‰èƒ½è®¿é—®ã€‚mysql çš„å¯†ç æ³¨æ„è¦è®¾ç½®çš„å¤æ‚ä¸€äº›ã€‚
- ä½ å¯ä»¥æŠŠè‡ªå·±çš„é¡¹ç›®çš„sqlåˆ›å»ºåº“è¡¨è¯­å¥ï¼Œæ”¾åˆ° mysql/sql çš„æ–‡ä»¶å¤¹ä¸‹ã€‚

## äºŒã€ç¯å¢ƒå®‰è£…

æ¨èä½¿ç”¨ [termius](https://termius.com/) å·¥å…·è¿æ¥ä½ çš„äº‘æœåŠ¡ï¼Œè¿™ä¸ªå·¥å…·è‡ªå¸¦ SFPT å¯ä»¥æ–¹ä¾¿çš„ä¸Šä¼ æ–‡ä»¶ã€‚

æŠŠ dev-ops æ–‡ä»¶å¤¹ä¸Šä¼ åˆ°äº‘æœåŠ¡å™¨ä¸Šã€‚

<div align="center">
    <img src="https://bugstack.cn/images/roadmap/tutorial/road-map-linux-03.png" width="750px">
</div>

åœ¨ä½ æŠŠ xfg-dev-tech-linux å…‹éš†åˆ°æœ¬åœ°ä»¥åï¼ŒæŠŠ dev-ops æ•´ä¸ªæ–‡ä»¶å¤¹ä¸Šä¼ åˆ°äº‘æœåŠ¡å™¨çš„æ ¹ç›®å½•å³å¯ã€‚ä¹‹åå°±å¯ä»¥æ‰§è¡Œä¸‹é¢çš„ç¯å¢ƒå®‰è£…æ“ä½œäº†ã€‚

å¸¸ç”¨å‘½ä»¤ï¼›
- `rm -rf ...` åˆ æ‰æ–‡ä»¶å¤¹ã€‚å®‰è£…çš„æ–‡ä»¶ä¼šè¿›å…¥ `/user/local/java`ã€`/user/local/maven`ï¼Œå¯ä»¥è¿›å…¥ååˆ æ‰æ—§ç‰ˆçš„æ–‡ä»¶ã€‚
- `cat /etc/profile` æŸ¥çœ‹é…ç½®æ–‡ä»¶
- `vim /etc/profile` è¿›å…¥åè¾“å…¥ i åå¼€å§‹ç¼–è¾‘ï¼Œç¼–è¾‘åç‚¹å‡» esc ä¹‹åè¾“å…¥ :wq é€€å‡ºã€‚å¦‚æœä½ æœ‰å®‰è£…å¤šæ¬¡ï¼Œä½†è¿™é‡Œ Javaã€Maven é…ç½®æœ‰å¤šä»½ï¼Œå¯ä»¥åˆ æ‰ã€‚ 
- `git clone https://xxx.git` æ£€å‡ºé¡¹ç›®
- `git branch` åˆ—å‡ºé¡¹ç›®åˆ†æ”¯
- `git checkout master` æ£€å‡º master åˆ†æ”¯

### 1. å®‰è£… Git

```java
sudo yum install git
```

å®‰è£…åé€šè¿‡ `git --version` æŸ¥çœ‹ç‰ˆæœ¬

### 2. å®‰è£… Java JDK

```java
cd /dev-ops/java
chmod +x install-java.sh
./install-java.sh
```

<div align="center">
    <img src="https://bugstack.cn/images/roadmap/tutorial/road-map-linux-05.png" width="650px">
</div>

- éªŒè¯ï¼š`java -version` æ­¤æ—¶ä¼šè¾“å‡º Java çš„ç‰ˆæœ¬ã€‚
- æç¤ºï¼šå¦‚æœæœªè¾“å‡º javaï¼Œå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œ `source /etc/profile`
- å¸è½½ï¼šå¦‚æœä¸éœ€è¦ Java ç¯å¢ƒäº†ï¼Œå¯ä»¥åŒæ ·æ–¹å¼æ‰§è¡Œ `./remove-java.sh`

### 3. å®‰è£… Maven

```java
cd /dev-ops/maven
chmod +x install-maven.sh
./install-maven.sh
```

<div align="center">
    <img src="https://bugstack.cn/images/roadmap/tutorial/road-map-linux-06.png" width="650px">
</div>

- éªŒè¯ï¼š`mvn -version` æ­¤æ—¶ä¼šè¾“å‡º maven çš„ç‰ˆæœ¬ã€‚
- æç¤ºï¼šå¦‚æœæœªè¾“å‡º Mavenï¼Œå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œ `source /etc/profile`
- å¸è½½ï¼šå¦‚æœä¸éœ€è¦ Maven ç¯å¢ƒäº†ï¼Œå¯ä»¥åŒæ ·æ–¹å¼æ‰§è¡Œ `./remove-maven.sh`

### 4. å®‰è£… MySQLã€Redis

```java
cd /dev-ops
docker-compose -f docker-compose-environment.yml up -d
```

<div align="center">
    <img src="https://bugstack.cn/images/roadmap/tutorial/road-map-linux-04.png" width="950px">
</div>

- è®¿é—®ï¼š[http://117.72.37.243:9000/#!/2/docker/containers](http://117.72.37.243:9000/#!/2/docker/containers) - è®¿é—®ä½ çš„ Portainerï¼Œå°±å¯ä»¥çœ‹è§å®‰è£…å†…å®¹äº†ã€‚
- 13306ã€16379ã€8081ã€8899ï¼Œè¿™å‡ ä¸ªç«¯å£ï¼Œéœ€è¦åœ¨äº‘æœåŠ¡å™¨æ‰“å¼€ã€‚
- å®é™…è‡ªå·±ä½¿ç”¨çš„æ—¶å€™ï¼ŒMySQL æ•°æ®åº“çš„å¯†ç å¯ä»¥é…ç½®çš„æ›´å¼ºä¸€äº›ã€‚

## ä¸‰ã€é¡¹ç›®æ„å»º

ä»¥ä¸Šè¿™äº›ç¯å¢ƒçš„å®‰è£…å°±å¯ä»¥æ”¯æ’‘æˆ‘ä»¬éƒ¨ç½²é¡¹ç›®äº†ï¼Œè¿™é‡Œä»¥å°å‚…å“¥æœ€è¿‘å¸¦ç€å¤§å®¶åšçš„å¤§è¥é”€å¹³å°é¡¹ç›®ï¼ˆå‰åç«¯ï¼‰è¿›è¡Œæ‰“åŒ…æ„å»ºä¸¾ä¾‹ã€‚

å¼€å§‹æ‰§è¡Œä¹‹å‰è¿›å…¥åˆ° /dev-ops é€šè¿‡å‘½ä»¤åˆ›å»º github æ–‡ä»¶å¤¹ `mkdir github`ï¼Œåç»­æŠŠé¡¹ç›®æ£€å‡ºåˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ã€‚

### 1. åç«¯æ„å»º

#### 1.1 å…‹éš†é¡¹ç›®

```java
[root@lavm-aqhgp9nber dev-ops]# cd github/
[root@lavm-aqhgp9nber github]# ls
[root@lavm-aqhgp9nber github]# git clone https://gitcode.net/KnowledgePlanet/big-market/big-market.git
Cloning into 'big-market'...
Username for 'https://gitcode.net': Yao__Shun__Yu
Password for 'https://Yao__Shun__Yu@gitcode.net': 
remote: Enumerating objects: 424, done.
remote: Counting objects: 100% (424/424), done.
remote: Compressing objects: 100% (222/222), done.
remote: Total 1494 (delta 113), reused 283 (delta 71), pack-reused 1070
Receiving objects: 100% (1494/1494), 229.88 KiB | 0 bytes/s, done.
Resolving deltas: 100% (418/418), done.
```

- git clone é¡¹ç›®ï¼Œéœ€è¦è¾“å…¥ä½ çš„è´¦å·å¯†ç ã€‚ä¹Ÿå¯ä»¥é…ç½® ssh ç§˜é’¥æ–¹å¼ï¼Œå°±ä¸ç”¨è¾“å…¥è´¦å·å¯†ç äº†ã€‚

#### 1.2 æ„å»ºé¡¹ç›®

```java
[root@lavm-aqhgp9nber big-market]# cd /dev-ops/
[root@lavm-aqhgp9nber dev-ops]# ls
docker-compose-app.yml  docker-compose-environment.yml  github  java  maven  mysql  redis
[root@lavm-aqhgp9nber dev-ops]# cd github/
[root@lavm-aqhgp9nber github]# ls
big-market
[root@lavm-aqhgp9nber github]# cd big-market/
[root@lavm-aqhgp9nber big-market]# ls
big-market-api  big-market-domain          big-market-trigger  docs     README.md
big-market-app  big-market-infrastructure  big-market-types    pom.xml
[root@lavm-aqhgp9nber big-market]# mvn clean install
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO] 
[INFO] big-market                                                         [pom]
[INFO] big-market-types                                                   [jar]
[INFO] big-market-domain                                                  [jar]
[INFO] big-market-api                                                     [jar]
[INFO] big-market-trigger                                                 [jar]
[INFO] big-market-infrastructure                                          [jar]
[INFO] big-market-app                                                     [jar]
[INFO] 
[INFO] -----------------------< cn.bugstack:big-market >-----------------------
[INFO] Building big-market 1.0-SNAPSHOT                                   [1/7]
[INFO] Reactor Summary for big-market 1.0-SNAPSHOT:
[INFO] 
[INFO] big-market ......................................... SUCCESS [  0.594 s]
[INFO] big-market-types ................................... SUCCESS [  4.069 s]
[INFO] big-market-domain .................................. SUCCESS [  2.759 s]
[INFO] big-market-api ..................................... SUCCESS [  0.775 s]
[INFO] big-market-trigger ................................. SUCCESS [  3.834 s]
[INFO] big-market-infrastructure .......................... SUCCESS [  2.423 s]
[INFO] big-market-app ..................................... SUCCESS [  3.730 s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  18.696 s
[INFO] Finished at: 2024-03-31T13:22:04+08:00
[INFO] ------------------------------------------------------------------------
```

- é€šè¿‡ `mvn clean install` å‘½ä»¤å…ˆæ„å»ºé¡¹ç›®ã€‚

#### 1.3 æ‰“åŒ…é•œåƒ

```java
[root@lavm-aqhgp9nber big-market]# cd big-market-app/
[root@lavm-aqhgp9nber big-market-app]# ls
build.sh  Dockerfile  pom.xml  src  target
[root@lavm-aqhgp9nber big-market-app]# chmod +x build.sh 
[root@lavm-aqhgp9nber big-market-app]# ./build.sh 
[+] Building 2.1s (8/8) FINISHED                                               docker:default
 => [internal] load build definition from Dockerfile                                     0.0s
 => => transferring dockerfile: 372B                                                     0.0s
 => [internal] load metadata for docker.io/library/openjdk:8-jre-slim                    0.0s
 => [internal] load .dockerignore                                                        0.0s
 => => transferring context: 2B                                                          0.0s
 => [1/3] FROM docker.io/library/openjdk:8-jre-slim                                      0.0s
 => [internal] load build context                                                        0.5s
 => => transferring context: 64.71MB                                                     0.5s
 => CACHED [2/3] RUN ln -snf /usr/share/zoneinfo/PRC /etc/localtime && echo PRC > /etc/  0.0s
 => [3/3] ADD target/big-market-app.jar /big-market-app.jar                              1.2s
 => exporting to image                                                                   0.3s
 => => exporting layers                                                                  0.3s
 => => writing image sha256:aee0181546cccf3e6677aa8de6fae13d87c4cf812f0871a994c2ba1eaca  0.0s
 => => naming to docker.io/fuzhengwei/big-market-app:1.0                                 0.0s
```

- ç°åœ¨å¯ä»¥çœ‹åˆ° `fuzhengwei/big-market-app:1.0`  çš„é•œåƒå·²ç»æ‰“åŒ…å‡ºæ¥æ¥äº†ã€‚

### 2. å‰ç«¯æ„å»º

#### 2.1 å…‹éš†é¡¹ç›®

```java
[root@lavm-aqhgp9nber big-market-app]# cd /dev-ops/github/
[root@lavm-aqhgp9nber github]# ls
big-market
[root@lavm-aqhgp9nber github]# git clone https://gitcode.net/KnowledgePlanet/big-market/big-market-front.git
Cloning into 'big-market-front'...
Username for 'https://gitcode.net': Yao__Shun__Yu
Password for 'https://Yao__Shun__Yu@gitcode.net': 
remote: Enumerating objects: 93, done.
remote: Counting objects: 100% (93/93), done.
remote: Compressing objects: 100% (49/49), done.
remote: Total 93 (delta 33), reused 87 (delta 31), pack-reused 0
Unpacking objects: 100% (93/93), done.
```

- git clone é¡¹ç›®ï¼Œéœ€è¦è¾“å…¥ä½ çš„è´¦å·å¯†ç ã€‚ä¹Ÿå¯ä»¥é…ç½® ssh ç§˜é’¥æ–¹å¼ï¼Œå°±ä¸ç”¨è¾“å…¥è´¦å·å¯†ç äº†ã€‚

#### 2.2 æ‰“åŒ…é•œåƒ

```java
[root@lavm-aqhgp9nber github]# cd big-market-front/
[root@lavm-aqhgp9nber big-market-front]# ls
next.config.js  package-lock.json  public     src                 tsconfig.json
package.json    postcss.config.js  README.md  tailwind.config.ts
[root@lavm-aqhgp9nber big-market-front]# ll
total 328
-rw-r--r-- 1 root root     92 Mar 31 13:26 next.config.js
-rw-r--r-- 1 root root    587 Mar 31 13:26 package.json
-rw-r--r-- 1 root root 299024 Mar 31 13:26 package-lock.json
-rw-r--r-- 1 root root     82 Mar 31 13:26 postcss.config.js
drwxr-xr-x 2 root root   4096 Mar 31 13:26 public
-rw-r--r-- 1 root root   1383 Mar 31 13:26 README.md
drwxr-xr-x 3 root root   4096 Mar 31 13:26 src
-rw-r--r-- 1 root root    507 Mar 31 13:26 tailwind.config.ts
-rw-r--r-- 1 root root    599 Mar 31 13:26 tsconfig.json
[root@lavm-aqhgp9nber big-market-front]# git branch
* 240211-xfg-init-project
[root@lavm-aqhgp9nber big-market-front]# git checkout main
Branch main set up to track remote branch main from origin.
Switched to a new branch 'main'
[root@lavm-aqhgp9nber big-market-front]# ls
build.sh    next.config.js  package-lock.json  public     src                 tsconfig.json
Dockerfile  package.json    postcss.config.js  README.md  tailwind.config.ts
[root@lavm-aqhgp9nber big-market-front]# chmod +x build.sh 
[root@lavm-aqhgp9nber big-market-front]# ls
build.sh    next.config.js  package-lock.json  public     src                 tsconfig.json
Dockerfile  package.json    postcss.config.js  README.md  tailwind.config.ts
[root@lavm-aqhgp9nber big-market-front]# ./build.sh 
 => [internal] load build definition from Dockerfile                                     0.0s
 => => transferring dockerfile: 697B                                                     0.0s
 => [internal] load metadata for docker.io/library/node:18-alpine                       37.0s
 => [internal] load .dockerignore                                                        0.0s
 => => transferring context: 2B                                                          0.0s
 => [internal] load build context                                                        0.1s
 => => transferring context: 599.89kB                                                    0.1s
 => [base 1/1] FROM docker.io/library/node:18-alpine@sha256:c698ffe060d198dcc6647be78e  63.1s
 => => resolve docker.io/library/node:18-alpine@sha256:c698ffe060d198dcc6647be78ea16833  0.0s
 => => sha256:2694e4502e2414f1f0ecb8d3216bd3dd8fdd19fc9edeef31ac653b 39.81MB / 39.81MB  60.7s
 => => sha256:f8ecf2fb4bd9a228128a2638a8bd59e1a2b1348019ff7d4ea6de2431 2.34MB / 2.34MB  16.8s
 => => sha256:d3da4a73e4df700cd719baa5e2d175a2cda03f72b893c73a4c7063ae89685 450B / 450B  0.3s
 => => sha256:c698ffe060d198dcc6647be78ea1683363f12d5d507dc5ec9855f1c55 1.43kB / 1.43kB  0.0s
 => => sha256:62ce0df0c57930a42a9f6025b33f165c73217159dcf7681148ecee10c 1.16kB / 1.16kB  0.0s
 => => sha256:ed7d7e5a958009e493ebfa4f476c77dcb03013caa7730a0fef7e6aa3a 7.14kB / 7.14kB  0.0s
 => => extracting sha256:2694e4502e2414f1f0ecb8d3216bd3dd8fdd19fc9edeef31ac653b250fe11e  2.0s
 => => extracting sha256:f8ecf2fb4bd9a228128a2638a8bd59e1a2b1348019ff7d4ea6de2431a76179  0.1s
 => => extracting sha256:d3da4a73e4df700cd719baa5e2d175a2cda03f72b893c73a4c7063ae896855  0.0s
 => [deps 1/5] RUN apk add --no-cache libc6-compat                                     230.3s
 => [builder 1/4] WORKDIR /app                                                           0.7s
 => [deps 2/5] WORKDIR /app                                                              0.0s 
 => [deps 3/5] COPY package.json yarn.lock* package-lock.json* pnpm-lock.yaml* ./        0.1s 
 => [deps 4/5] RUN yarn config set registry 'https://registry.npmmirror.com/'            0.7s 
 => [deps 5/5] RUN yarn install                                                        151.6s 
 => [builder 2/4] COPY --from=deps /app/node_modules ./node_modules                      9.9s 
 => [builder 3/4] COPY . .                                                               0.2s 
 => [builder 4/4] RUN yarn build                                                        47.4s 
 => [runner 2/5] COPY --from=builder /app/public ./public                                0.1s 
 => [runner 3/5] COPY --from=builder /app/.next/standalone ./                            0.5s 
 => [runner 4/5] COPY --from=builder /app/.next/static ./.next/static                    0.1s 
 => [runner 5/5] COPY --from=builder /app/.next/server ./.next/server                    0.1s 
 => exporting to image                                                                   0.4s 
 => => exporting layers                                                                  0.4s 
 => => writing image sha256:cdaae841aad5a14c8e8befbdab54827a4005a42bbe7904b9b0291e46342  0.0s
 => => naming to docker.io/fuzhengwei/big-market-front-app:1.4                           0.0s
```

- æ£€å‡ºé¡¹ç›®åï¼Œæ²¡æœ‰çœ‹åˆ° Dockerfile æ–‡ä»¶ï¼Œæ‰€ä»¥æ‰§è¡Œäº† git branch æ£€æŸ¥å½“å‰åˆ†æ”¯ã€‚ä¹‹åæ‰§è¡Œ git checkout main åˆ‡æ¢åˆ° main åˆ†æ”¯ä¸Šã€‚
- æ¥ä¸‹æ¥ç»™ build.sh åŠ ä¸Šæƒé™ï¼Œåæ‰§è¡Œæ„å»ºè„šæœ¬ã€‚

```java
sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json <<-'EOF'
{
  "registry-mirrors": [
    "https://h1log1d5.mirror.aliyuncs.com",
    "http://docker.mirrors.ustc.edu.cn",
    "http://hub-mirror.c.163.com"
   ]
}
EOF
sudo systemctl daemon-reload
sudo systemctl restart docker
```

- å¦‚æœæ„å»ºå¤±è´¥ï¼Œæç¤º `https://registry-1.docker.io/v2/: net/http: request canceled` å¯ä»¥å®‰è£…ä¸‹é•œåƒã€‚

## å››ã€é¡¹ç›®éƒ¨ç½²

å®Œæˆç¬¬3æ­¥ä»¥åï¼Œä½ çš„é•œåƒæ–‡ä»¶å°±å·²ç»åœ¨äº‘æœåŠ¡ä¸Šäº†ã€‚æŒ‰ç…§ä½ è‡ªå·±çš„é¡¹ç›®è¿›è¡Œdocker compose ç¼–å†™ï¼Œéƒ¨ç½²å°±å¯ä»¥äº†ã€‚å¦‚æœä½ å­¦ä¹ äº†å°å‚…å“¥æ˜Ÿçƒã€Œç å†œä¼šé”ã€çš„å¤§è¥é”€å®æˆ˜é¡¹ç›®ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ–‡ä»¶è¿›è¡Œéƒ¨ç½²ã€‚

```java
version: '3.8'
# å‘½ä»¤æ‰§è¡Œ docker-compose -f docker-compose-app.yml up -d
services:
  big-market-app:
    image: fuzhengwei/big-market-app:1.0
    container_name: big-market-app
    restart: always
    ports:
      - "8091:8091"
    environment:
      - TZ=PRC
      - SERVER_PORT=8091
      - APP_CONFIG_API_VERSION=v1
      - APP_CONFIG_CROSS_ORIGIN=*
      - SPRING_DATASOURCE_USERNAME=root
      - SPRING_DATASOURCE_PASSWORD=123456
      - SPRING_DATASOURCE_URL=jdbc:mysql://mysql:3306/big_market?serverTimezone=UTC&characterEncoding=utf8&autoReconnect=true&serverTimezone=Asia/Shanghai
      - SPRING_DATASOURCE_DRIVER_CLASS_NAME=com.mysql.cj.jdbc.Driver
      - SPRING_HIKARI_POOL_NAME=Retail_HikariCP
      - REDIS_SDK_CONFIG_HOST=redis
      - REDIS_SDK_CONFIG_PORT=6379
    volumes:
      - ./log:/data/log
    networks:
      - my-network
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
  big-market-front-app:
    container_name: big-market-front-app
    image: fuzhengwei/big-market-front-app:1.4
    restart: always
    networks:
      - my-network
    ports:
      - 3000:3000
    environment:
      - PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
    healthcheck:
      test: [ "CMD", "wget", "--spider", "-q", "http://0.0.0.0:3000/" ]
      interval: 1m
      timeout: 10s
      retries: 3

networks:
  my-network:
    driver: bridge
```

æ‰§è¡Œï¼›`docker-compose -f docker-compose-app.yml up -d` è„šæœ¬å³å¯å®Œæˆéƒ¨ç½²ã€‚

## äº”ã€é¡¹ç›®å­¦ä¹ 

å°å‚…å“¥æ˜¯æŠŠæ˜Ÿçƒã€Œ**ç å†œä¼šé”**ã€å½“æˆäº’è”ç½‘å…¬å¸ä¸­ä¸€ä¸ªäº‹ä¸šç¾¤ï¼Œæ‰€éœ€è¦å¼€å‘çš„æŠ€æœ¯é¡¹ç›®æ¥è¿›è¡Œæ„å»ºã€‚æ‰€ä»¥åœ¨å°å‚…å“¥çš„æ˜Ÿçƒæ—¢å¯ä»¥å­¦ä¹ ä¸šåŠ¡é¡¹ç›®ï¼Œè¿˜å¯ä»¥æŒæ¡æŠ€æœ¯ç»„ä»¶é¡¹ç›®ã€‚åŒæ—¶ä¸ºäº†å¤§å®¶æ›´å¥½çš„è¡¥å……é¡¹ç›®å­¦ä¹ ä¸­æ¬ ç¼ºçš„æŠ€æœ¯ç‚¹ã€‚å°å‚…å“¥è¿˜æŠŠå„é¡¹æŠ€æœ¯æ ˆæ‹†æˆç‹¬ç«‹çš„æ¡ˆä¾‹åˆ†äº«ç»™å¤§å®¶ã€‚

> ğŸ§§æ˜Ÿçƒã€Œç å†œä¼šé”ã€çš„çŸ¥è¯†ä½“é‡æ˜¯éå¸¸æˆä½“ç³»çš„ï¼Œä¹Ÿéå¸¸å…¨é¢ã€‚åŠ å…¥è¿™æ ·ä¸€ä¸ªæ˜Ÿçƒï¼Œä½ çš„æŠ€æœ¯å°±å¯ä»¥ç¨³æ­¥æå‡äº†ï¼é¡¹ç›®é¢„è§ˆåœ°å€ï¼šhttps://gaga.plus

