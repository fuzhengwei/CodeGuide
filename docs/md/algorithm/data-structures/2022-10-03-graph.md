---
title: å›¾ Graph
lock: need
---

# å›¾ Graph

ä½œè€…ï¼šå°å‚…å“¥
<br/>åšå®¢ï¼š[https://bugstack.cn](https://bugstack.cn)

> æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„

## ä¸€ã€å‰è¨€

`å›¾çš„å†å²`

Leonhard Euler äº1736 å¹´å‘è¡¨çš„[å…³äºæŸ¯å°¼æ–¯å ¡ä¸ƒæ¡¥](https://en.wikipedia.org/wiki/Seven_Bridges_of_K%C3%B6nigsberg)çš„è®ºæ–‡è¢«è®¤ä¸ºæ˜¯å›¾è®ºå²ä¸Šçš„ç¬¬ä¸€ç¯‡è®ºæ–‡ã€‚è¿™ç¯‡è®ºæ–‡ï¼Œä»¥åŠèŒƒå¾·è’™å¾·å†™çš„å…³äºéª‘å£«é—®é¢˜çš„è®ºæ–‡ï¼Œéƒ½æ˜¯åœ¨è±å¸ƒå°¼èŒ¨å‘èµ·çš„åˆ†æä½ç½®ä¸Šè¿›è¡Œçš„ã€‚æ¬§æ‹‰å…¬å¼æ¶‰åŠå‡¸å¤šé¢ä½“çš„è¾¹æ•°ã€é¡¶ç‚¹æ•°å’Œé¢æ•°ï¼Œç”± Cauchy å’ŒL'Huilier ç ”ç©¶å’Œæ¨å¹¿ï¼Œå®ƒä»£è¡¨äº†ç§°ä¸ºæ‹“æ‰‘çš„æ•°å­¦åˆ†æ”¯çš„å¼€å§‹ã€‚

1860 å¹´å’Œ 1930 å¹´æ‹“æ‰‘å­¦çš„è‡ªä¸»å‘å±•é€šè¿‡ Jordanã€Kuratowski å’Œ Whitney çš„è‘—ä½œä½¿å›¾è®ºå¾—ä»¥å‘å±•ã€‚å›¾è®ºå’Œ[æ‹“æ‰‘å­¦](https://en.wikipedia.org/wiki/Topology)å…±åŒå‘å±•çš„å¦ä¸€ä¸ªé‡è¦å› ç´ æ¥è‡ªç°ä»£ä»£æ•°æŠ€æœ¯çš„ä½¿ç”¨ã€‚è¿™ç§ç”¨é€”çš„ç¬¬ä¸€ä¸ªä¾‹å­æ¥è‡ªç‰©ç†å­¦å®¶å¤æ–¯å¡”å¤«Â·åŸºå°”éœå¤«çš„å·¥ä½œï¼Œä»–åœ¨ 1845 å¹´å‘è¡¨äº†ä»–çš„åŸºå°”éœå¤«ç”µè·¯å®šå¾‹ï¼Œç”¨äºè®¡ç®—ç”µè·¯ä¸­çš„ç”µå‹å’Œç”µæµã€‚

## äºŒã€å›¾çš„æ•°æ®ç»“æ„

å›¾ï¼ˆGraphï¼‰ç»“æ„æ˜¯ä¸€ç§æ¯”æ ‘ç»“æ„å¤æ‚çš„éçº¿æ€§çš„æ•°æ®ç»“æ„ï¼Œå›¾åœ¨å®é™…ç”Ÿæ´»ä¸­çš„ä¾‹å­éå¸¸å¤šï¼Œæ¯”å¦‚ï¼›åœ°é“çº¿è·¯ç½‘ã€å¾®ä¿¡å¥½å‹å…³ç³»é“¾ã€è®¡ç®—æœºä¸­çš„çŠ¶æ€æ‰§è¡Œç­‰ï¼Œéƒ½å¯ä»¥æŠ½è±¡æˆå›¾çš„ç»“æ„ã€‚

å›¾ï¼ˆGraphï¼‰æ˜¯ç”±é¡¶ç‚¹çš„æœ‰ç©·éç©ºé›†åˆå’Œé¡¶ç‚¹ä¹‹é—´è¾¹çš„é›†åˆç»„æˆï¼Œé€šå¸¸è¡¨ç¤ºä¸ºï¼šG(V,E) = ã€Gè¡¨ç¤ºå›¾ã€Vè¡¨ç¤ºé¡¶ç‚¹ä¸ªæ•°ã€Eè¡¨ç¤ºè¾¹çš„ä¸ªæ•°ã€‘ã€‚å›¾çš„æ•°æ®ç»“æ„æ˜¯å¤šå¯¹å¤šå…³ç³»ï¼Œå°±åƒä½ çš„å¾®ä¿¡å¥½å‹å¯èƒ½ä¹Ÿæ˜¯æˆ‘çš„å¾®ä¿¡å¥½å‹ï¼Œä¸”ç›¸äº’äº¤å‰å¯¹åº”ã€‚ä¸ä¹‹å¯¹åº”çš„æ˜¯æ ‘ï¼Œæ ‘æ˜¯1å¯¹å¤šå…³ç³»ï¼Œæ‰€ä»¥æ ‘ä¹Ÿæ˜¯ä¸€ç§ç‰¹æ®Šçš„æ²¡æœ‰é—­ç¯çš„å›¾ã€‚

æŒ‰ç…§å›¾**æ˜¯å¦æœ‰æ–¹å‘**å’Œ**æ˜¯å¦æœ‰æƒé‡**å¯ä»¥åˆ†ä¸ºä¸€ä¸‹4ç±»ç»„åˆï¼›

|                             U/U                              |                             U/W                              |                             D/U                              |                             D/W                              |
| :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
| ![](https://bugstack.cn/images/article/algorithm/graph-01.png) | ![](https://bugstack.cn/images/article/algorithm/graph-02.png) | ![](https://bugstack.cn/images/article/algorithm/graph-03.png) | ![](https://bugstack.cn/images/article/algorithm/graph-04.png) |
|                        æ— å‘å›¾&æ— æƒé‡                         |                        æ— å‘å›¾&æœ‰æƒé‡                         |                        æœ‰å‘å›¾&æ— æƒé‡                         |                        æœ‰å‘å›¾&æœ‰æƒé‡                         |

- é¡¶ç‚¹ï¼šå›¾ä¸­çš„ä»»æ„èŠ‚ç‚¹éƒ½ç®—ä½œé¡¶ç‚¹ï¼Œå›¾ä¸­ä»»æ„ä¸¤ä¸ªé¡¶ç‚¹é—´éƒ½å¯èƒ½å­˜åœ¨è¿æ¥ï¼Œå¦‚æœæ²¡æœ‰é¡¶ç‚¹é—´æ²¡æœ‰è¿çº¿åˆ™ç§°ä¸ºç©ºå›¾ã€‚
- æ— å‘å›¾ï¼šå›¾ä¸­ä»»æ„ä¸¤ä¸ªé¡¶ç‚¹é—´éƒ½æ²¡æœ‰æŒ‡å‘ï¼Œåˆ™ç§°è¿™æ ·çš„å›¾ä¸ºæ— å‘å›¾ã€‚
- æœ‰å‘å›¾ï¼šå›¾ä¸­ä»»æ„ä¸¤ä¸ªé¡¶ç‚¹é—´éƒ½æœ‰æŒ‡å‘è¾¹ï¼Œåˆ™ç§°è¿™æ ·çš„å›¾ä¸ºæœ‰å‘å›¾ã€‚
- æ— æƒé‡ï¼šå›¾ä¸­ä»»æ„ä¸¤ä¸ªé¡¶ç‚¹é—´çš„è¿çº¿ï¼Œæ²¡æœ‰æƒé‡å€¼ï¼Œåˆ™æ— æƒé‡ã€‚
- æœ‰æƒé‡ï¼šå›¾ä¸­ä»»æ„ä¸¤ä¸ªé¡¶ç‚¹é—´çš„è¿çº¿ï¼ŒåŒ…å«æƒé‡å€¼ï¼Œåˆ™æœ‰æƒé‡ã€‚

## ä¸‰ã€å›¾çš„ç»“æ„å®ç°

å›¾çš„ç»“æ„å®ç°å¯ä»¥åŸºäºæ•°ç»„ã€é“¾è¡¨å’Œçº¢é»‘æ ‘å®ç°ï¼Œä¹Ÿå› æ­¤å°†ä½¿ç”¨æ•°ç»„å®ç°çš„å›¾ç§°ä¸ºé‚»æ¥çŸ©é˜µï¼Œé“¾è¡¨å’Œçº¢é»‘æ ‘å®ç°çš„å›¾ç§°ä¸ºé‚»æ¥è¡¨ã€‚

```java
// å›¾çš„é¡¶ç‚¹æ•°
protected int v;
// å›¾çš„è¾¹ä¸ªæ•°
protected int e;

// å›¾çš„çŸ©é˜µã€æ•°ç»„ã€‘
protected int[][] table;
// å›¾çš„çŸ©é˜µã€é“¾è¡¨ã€‘
protected LinkedList<Integer[]>[] table;
// å›¾çš„çŸ©é˜µã€çº¢é»‘æ ‘ã€‘
private TreeSet<Integer>[] table;
```

å›¾çš„æ•°æ®å­˜æ”¾å¯ä»¥ä½¿ç”¨ int æ•°ç»„ã€LinkedList é“¾è¡¨ã€TreeSet çº¢é»‘æ ‘ç­‰æ–¹å¼å­˜å‚¨ã€‚

- æºç åœ°å€ï¼š[https://github.com/fuzhengwei/java-algorithms](https://github.com/fuzhengwei/java-algorithms)
- æœ¬ç« æºç ï¼š[https://github.com/fuzhengwei/java-algorithms/tree/main/data-structures/src/main/java/graph](https://github.com/fuzhengwei/java-algorithms/tree/main/data-structures/src/main/java/graph)
- åŠ¨ç”»æ¼”ç¤ºï¼š[https://visualgo.net/zh/graphds](https://visualgo.net/zh/graphds)â€”â€” å›¾ç»“æ„åˆæ¬¡ç†è§£è¿˜æ˜¯æ¯”è¾ƒå›°éš¾çš„ï¼Œå¯ä»¥ç»“åˆå­¦ä¹ å†…å®¹çš„åŒæ—¶åšä¸€äº›åŠ¨ç”»æ¼”ç¤ºã€‚

### 1. é‚»æ¥çŸ©é˜µã€æ•°ç»„ã€‘

#### 1.1 æ— å‘å›¾&æ— æƒé‡

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/graph-05.png?raw=true" width="750px">
</div>

```java
// å›¾çš„é¡¶ç‚¹æ•°
protected int v;
// å›¾çš„è¾¹ä¸ªæ•°
protected int e;
// å›¾çš„çŸ©é˜µ
protected int[][] table;

// å¯¹ç§°æ’å…¥ï¼Œæ— æ–¹å‘ï¼Œæ— æƒé‡
public void insert(int x, int y) {
    table[x][y] = 1;
    table[y][x] = 1;
}
```

- é‚»æ¥çŸ©é˜µé€šè¿‡æ•°ç»„å­˜æ”¾å…ƒç´ ï¼Œä¼šæœ‰ä¸€äº›æµªè´¹ç©ºé—´ï¼Œæ‰€æœ‰çš„ç©ºé—´éƒ½ä¼šå¡«æ»¡ã€‚
- åœ¨æ’å…¥å…ƒç´ çš„æ—¶å€™ï¼Œå¯¹ç§°æ’å…¥èŠ‚ç‚¹ã€‚ä¾‹å¦‚ï¼š0â†’1ã€1â†’0ï¼Œä¸¤ä¸ªæ–¹å‘éƒ½æ’å…¥å…ƒç´ ã€‚

#### 1.2 æœ‰å‘å›¾&æœ‰æƒé‡

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/graph-06.png?raw=true" width="750px">
</div>

```java
// å›¾çš„é¡¶ç‚¹æ•°
protected int v;
// å›¾çš„è¾¹ä¸ªæ•°
protected int e;
// å›¾çš„çŸ©é˜µ
protected int[][] table;

// å¯¹ç§°æ’å…¥ï¼Œæ— æ–¹å‘ï¼Œæ— æƒé‡
public void insert(int x, int y, int weight) {
    table[x][y] = weight;
}
```

- é‚»æ¥çŸ©é˜µé€šè¿‡æ•°ç»„å­˜æ”¾å…ƒç´ ï¼Œä¼šæœ‰ä¸€äº›æµªè´¹ç©ºé—´ï¼Œæ‰€æœ‰çš„ç©ºé—´éƒ½ä¼šå¡«æ»¡ã€‚
- åœ¨æ’å…¥å…ƒç´ çš„æ—¶å€™ï¼Œæ’å…¥å•å‘èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹å€¼ä¸ºæƒé‡å€¼ã€‚ä¾‹å¦‚ï¼š0â†’2ï¼Œæƒé‡å€¼æ˜¯4ã€‚

### 2. é‚»æ¥è¡¨ã€é“¾è¡¨ã€‘

#### 1.1 æ— å‘å›¾&æ— æƒé‡

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/graph-07.png?raw=true" width="750px">
</div>

```java
// å›¾çš„é¡¶ç‚¹æ•°
protected int v;
// å›¾çš„è¾¹ä¸ªæ•°
protected int e;
// å›¾çš„çŸ©é˜µ
protected LinkedList<Integer[]>[] table;

// å¯¹ç§°æ’å…¥ï¼Œæ— æ–¹å‘ï¼Œæ— æƒé‡
public void insert(int x, int y) {
    table[x].add(new Integer[]{y});
    table[y].add(new Integer[]{x});
}
```

- é€šè¿‡æ•°ç»„+é“¾è¡¨çš„å®ç°æ–¹å¼å¯ä»¥å‡å°‘éå¿…è¦çš„å…ƒç´ å­˜å‚¨ï¼Œæ›´åŠ èŠ‚çœç©ºé—´ã€‚
- å…¶å®æ’å…¥å…ƒç´ çš„è¿‡ç¨‹å’Œæ•°ç»„ç±»ä¼¼ï¼Œæ— å‘æ— æƒé‡ç›´æ¥å¯¹ç§°æ’å…¥å…ƒç´ å³å¯ã€‚

#### 1.2 æœ‰å‘å›¾&æœ‰æƒé‡

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/graph-08.png?raw=true" width="750px">
</div>

```java
// å›¾çš„é¡¶ç‚¹æ•°
protected int v;
// å›¾çš„è¾¹ä¸ªæ•°
protected int e;
// å›¾çš„çŸ©é˜µ
protected LinkedList<Integer[]>[] table;

// å¯¹ç§°æ’å…¥ï¼Œæœ‰æ–¹å‘ï¼Œæœ‰æƒé‡
public void insert(int x, int y, int weight) {
    table[x].add(new Integer[]{y, weight});
}
```

- é€šè¿‡æ•°ç»„+é“¾è¡¨çš„å®ç°æ–¹å¼å¯ä»¥å‡å°‘éå¿…è¦çš„å…ƒç´ å­˜å‚¨ï¼Œæ›´åŠ èŠ‚çœç©ºé—´ã€‚
- å…¶å®æ’å…¥å…ƒç´ çš„è¿‡ç¨‹å’Œæ•°ç»„ç±»ä¼¼ï¼Œæœ‰æ–¹å‘æœ‰æƒé‡åˆ™åªæ’å…¥å•ä¸ªæŒ‡å‘ï¼Œå¹¶éœ€è¦é€šè¿‡æ•°ç»„æˆ–è€…å¯¹è±¡çš„æ–¹å¼è®°å½•æƒé‡å€¼ã€‚

### 3. éå†

å›¾çš„æœ€ç»ˆå®ç°æ˜¯é€šè¿‡ TreeSet çº¢é»‘æ ‘çš„æ–¹å¼ï¼Œè¿™æ ·å³èŠ‚çœç©ºé—´ï¼Œåˆèƒ½æé«˜å…ƒç´ çš„ç´¢å¼•å’Œéå†æ•ˆç‡ã€‚

```java
// å›¾çš„é¡¶ç‚¹æ•°
private int v;
// å›¾çš„è¾¹ä¸ªæ•°
private int e;
// å›¾çš„çŸ©é˜µ
private TreeSet<Integer>[] table;
```

#### 3.1 æ— å‘å›¾&æœ‰å‘å›¾

|                            æ— å‘å›¾                            |                            æœ‰å‘å›¾                            |
| :----------------------------------------------------------: | :----------------------------------------------------------: |
| ![](https://bugstack.cn/images/article/algorithm/graph-09.png) | ![](https://bugstack.cn/images/article/algorithm/graph-10.png) |
|         å¯¹ç§°æ’å…¥ï¼štable[x].add(y); table[y].add(x);          |                  å•å‘æ’å…¥ï¼štable[x].add(y);                  |

#### 3.2 å¹¿åº¦éå†&æ·±åº¦éå†


|                             U/U                              |                             U/U                              |                             D/U                              |                             D/U                              |
| :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
| ![](https://bugstack.cn/images/article/algorithm/graph-11.png) | ![](https://bugstack.cn/images/article/algorithm/graph-12.png) | ![](https://bugstack.cn/images/article/algorithm/graph-13.png) | ![](https://bugstack.cn/images/article/algorithm/graph-14.png) |
|                           æ·±åº¦éå†                           |                           å¹¿åº¦éå†                           |                           æ·±åº¦éå†                           |                           å¹¿åº¦éå†                           |

é€šè¿‡å››ä¸ªå›¾çš„çš„å¯¹æ¯”ï¼Œå¯ä»¥çœ‹åˆ°ï¼›
1. æ·±åº¦éå†ï¼Œä¸æ–­åœ°å‘ä¸‹æ¢æµ‹ã€‚å¹¿åº¦éå†æ¨ªè¡Œæ¢æµ‹ã€‚
2. å½“æœ‰æƒé‡æ—¶å€™ï¼Œåˆ™æ·±åº¦å’Œå¹¿åº¦ä¼šæŒ‰ç…§æƒé‡è¿›è¡Œé€‰æ‹©ä¼˜å…ˆéå†çš„é¡ºåºã€‚

```java
public void bfs(int s) {
    Queue<Integer> queue = new LinkedList<>();
    visited[s] = true;
    queue.add(s);
    while (!queue.isEmpty()) {
        int v = queue.remove();
        order.add(v);
        for (int w : G.adj(v)) {
            if (!visited[w]) {
                queue.add(w);
                visited[w] = true;
            }
        }
    }
}

private void dfs(int v) {
    visited[v] = true;
    // æ·±åº¦ä¼˜å…ˆï¼Œå‰åºéå†
    pre.add(v);
    for (int w : graph.adj(v)) {
        if (!visited[w]) {
            dfs(w);
        }
    }
    // æ·±åº¦ä¼˜å…ˆï¼Œååºéå†
    post.add(v);
}
```

## å››ã€å›¾å®ç°æµ‹è¯•

### 1. é‚»æ¥çŸ©é˜µ

```java
@Test
public void test_U_U() {
    AdjacencyMatrixArray.U_U matrix = new AdjacencyMatrixArray.U_U(6, 9);
    matrix.insert(0, 1);
    matrix.insert(0, 3);
    matrix.insert(0, 2);
    matrix.insert(0, 4);
    matrix.insert(1, 4);
    matrix.insert(2, 4);
    matrix.insert(2, 5);
    matrix.insert(3, 5);
    System.out.println(matrix);
}
```

- åœ¨å•å…ƒæµ‹è¯•ä¸­å…±æä¾›äº†UUã€UWã€DUã€DWå››ç§æƒ…å†µï¼Œè¯»è€…å¯è‡ªè¡ŒéªŒè¯ã€‚

```java
å›¾é…ç½®ï¼šV = 6, E = 9
---------------------------
  | 0 | 1 | 2 | 3 | 4 | 5 | 
â›â›â›â›â›â›â›â›â›â›â›â›â›â›â›â›
0 | 0 | 1 | 1 | 1 | 1 | 0 | 
---------------------------
1 | 1 | 0 | 0 | 0 | 1 | 0 | 
---------------------------
2 | 1 | 0 | 0 | 0 | 1 | 1 | 
---------------------------
3 | 1 | 0 | 0 | 0 | 0 | 1 | 
---------------------------
4 | 1 | 1 | 1 | 0 | 0 | 0 | 
---------------------------
5 | 0 | 0 | 1 | 1 | 0 | 0 | 
---------------------------
```

- é€šè¿‡æµ‹è¯•ç»“æœå¯ä»¥çœ‹åˆ°ä¸€ä¸ªé‚»æ¥çŸ©é˜µæ— å‘å›¾ä¸”æ— æƒé‡çš„å­˜æ”¾ç»“æœã€‚

### 2. é‚»æ¥é“¾è¡¨

```java
@Test
public void test_D_W() {
    AdjacencyMatrixList.D_W matrix = new AdjacencyMatrixList.D_W(6, 9);
    matrix.insert(0, 1, 1);
    matrix.insert(0, 3, 2);
    matrix.insert(0, 2, 3);
    matrix.insert(0, 4, 5);
    matrix.insert(1, 4, 1);
    matrix.insert(2, 4, 3);
    matrix.insert(2, 5, 7);
    matrix.insert(3, 5, 4);
    System.out.println(matrix);
}
```

- åœ¨å•å…ƒæµ‹è¯•ä¸­å…±æä¾›äº†UUã€UWã€DUã€DWå››ç§æƒ…å†µï¼Œè¯»è€…å¯è‡ªè¡ŒéªŒè¯ã€‚

**æµ‹è¯•ç»“æœ**

```java
å›¾é…ç½®ï¼šV = 6, E = 9
---------------------------
0 | â†’ [1,1] â†’ [3,2] â†’ [2,3] â†’ [4,5]
---------------------------
1 | â†’ [4,1]
---------------------------
2 | â†’ [4,3] â†’ [5,7]
---------------------------
3 | â†’ [5,4]
---------------------------
4 |
---------------------------
5 |
---------------------------
```

- é€šè¿‡æµ‹è¯•ç»“æœå¯ä»¥çœ‹åˆ°é‚»æ¥é“¾è¡¨åœ¨å¯¹å›¾å…ƒç´ çš„å­˜å‚¨ä¸Šï¼Œéå¸¸èŠ‚çœç©ºé—´ï¼Œå¹¶è®°å½•äº†æƒé‡å€¼ã€‚

## äº”ã€å¸¸è§é¢è¯•é¢˜

- å›¾çš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ
- å›¾æœ‰çš„åˆ†ç±»ï¼Ÿ
- å›¾æ€ä¹ˆå­˜æ”¾æƒé‡å€¼ï¼Ÿ
- å›¾çš„å¹¿åº¦éå†
- å›¾çš„æ·±åº¦éå†