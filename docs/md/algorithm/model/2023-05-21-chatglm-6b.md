---
title: ChatGLM-6B å¼€æºåŒè¯­å¯¹è¯è¯­è¨€æ¨¡å‹
lock: need
---

# ã€éƒ¨ç½²æ•™ç¨‹ã€‘ChatGLM-6B å¼€æºåŒè¯­å¯¹è¯è¯­è¨€æ¨¡å‹

ä½œè€…ï¼šå°å‚…å“¥
<br/>åšå®¢ï¼š[https://bugstack.cn](https://bugstack.cn)

> æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„

[ChatGLM-6B](https://github.com/THUDM/ChatGLM-6B) å¼€æºåŒè¯­å¯¹è¯è¯­è¨€æ¨¡å‹ï¼Œå¤ªç‰›çš®äº†ï¼æˆ‘è¦èƒ½åšä¸€ä¸ªè¿™ä¸ªæ°´å¹³çš„ä¸œè¥¿ï¼Œæˆ‘å°±AIåˆ›ä¸šï¼Œèèµ„ã€èµšé’±ã€å‘è´¢ï¼Œèººå¹³å»ï¼å“ˆå“ˆå“ˆï¼â€”â€” çœŸå¥½ï¼Œçœ‹åˆ°è¿™æ ·ä¸€ä¸ªä¸œè¥¿ï¼Œæ„Ÿè§‰çœ‹åˆ°äº†å›½å†… AI çš„å¸Œæœ›ï¼æ„Ÿè°¢æ¸…å ChatGLM å›¢é˜Ÿã€‚

![](https://bugstack.cn/images/article/algorithm/model/model-3-01.png)

ChatGLM-6B æ˜¯æ¸…åå¼€æºçš„ä¸€ä¸ªå°å‹å¯¹è¯æ¨¡å‹ï¼Œè®©å¤§å®¶å¯ä»¥åœ¨è‡ªå·±éƒ¨ç½²èµ·æ¥è·‘ä¸€è·‘çœ‹çœ‹æ•ˆæœã€‚ä½†å¯¹äºæœ¬èº«ä¸æ˜¯ä»äº‹æ­¤ç±»å·¥ä½œçš„å…¶ä»–ç ”å‘ä¼™ä¼´æ¥è¯´ï¼Œéƒ¨ç½²è¿™ä¸ªä¸œè¥¿å¤šåŠéƒ½ä¼šå¡åœ¨ç¯å¢ƒä¸Šã€‚æ‰€ä»¥å°å‚…å“¥åœ¨`æœ¬åœ°/äº‘æœåŠ¡`éƒ¨ç½²ä½“éªŒåï¼ŒæŠŠç›¸å…³ç»éªŒåˆ†äº«ä¸‹ï¼Œè®©æœ‰éœ€è¦çš„ä¼™ä¼´ä¹Ÿå¯ä»¥å°å°é²œã€‚

## ä¸€ã€æ¨¡å‹ç®€è¿°

ChatGLM å‚è€ƒäº† ChatGPT çš„è®¾è®¡æ€è·¯ï¼Œåœ¨åƒäº¿åŸºåº§æ¨¡å‹ GLM-130B ä¸­æ³¨å…¥äº†ä»£ç é¢„è®­ç»ƒï¼Œé€šè¿‡æœ‰ç›‘ç£å¾®è°ƒï¼ˆSupervised Fine-Tuningï¼‰ç­‰æŠ€æœ¯å®ç°äººç±»æ„å›¾å¯¹é½ã€‚2022å¹´11æœˆï¼Œæ–¯å¦ç¦å¤§å­¦å¤§æ¨¡å‹ä¸­å¿ƒå¯¹å…¨çƒ30ä¸ªä¸»æµå¤§æ¨¡å‹è¿›è¡Œäº†å…¨æ–¹ä½çš„è¯„æµ‹ï¼Œ**GLM-130B æ˜¯äºšæ´²å”¯ä¸€å…¥é€‰çš„å¤§æ¨¡å‹ğŸ‘ğŸ»**ã€‚

![](https://bugstack.cn/images/article/algorithm/model/model-3-02.png)

åŒæ—¶ ChatGLM å›¢é˜Ÿä¸ºä¸ç¤¾åŒºä¸€èµ·æ›´å¥½åœ°æ¨åŠ¨å¤§æ¨¡å‹æŠ€æœ¯çš„å‘å±•ï¼Œæ¸…åå¼€æºäº† ChatGLM-6B æ¨¡å‹ã€‚å®ƒæ˜¯ä¸€ä¸ªåˆå…·ä¸­æ–‡é—®ç­”å’Œå¯¹è¯åŠŸèƒ½çš„å°å‹æ¨¡å‹ï¼Œå¯ä»¥è®©å¤§å®¶å³ä½¿åœ¨æœ¬åœ°å’Œä¸€äº›å°å‹çš„æœåŠ¡å™¨ä¸Šå°±å¯ä»¥éƒ¨ç½²ä½“éªŒã€‚

- æºç ï¼š[https://github.com/THUDM/ChatGLM-6B](https://github.com/THUDM/ChatGLM-6B) - è¿™é‡Œæœ‰æœ€æ–°æ›´æ–°çš„å†…å®¹å’Œéƒ¨ç½²è¯´æ˜
- ç¤¾åŒºï¼š[https://chatglm.cn/blog](https://chatglm.cn/blog) - è¿™é‡Œæœ‰æ›´å…¨é¢çš„ä»‹ç»ä¿¡æ¯

## äºŒã€åŸºç¡€ç¯å¢ƒ

### 1. æœåŠ¡é…ç½®

ChatGLM-6B è™½ç„¶å·²ç»æ˜¯å¾ˆæ¸©é¦¨æä¾›çš„ï¼Œèƒ½æœ€ä½³æ”¯æŒå¯¹è¯çš„æœ€å°æ¨¡å‹äº†ï¼Œä½†å®é™…éƒ¨ç½²çš„æ—¶å€™ä»éœ€è¦ä¸€ä¸ªä¸å°çš„æœåŠ¡å™¨`32Gå†…å­˜`é…ç½®æˆ–è€…æœ‰è¾ƒå¥½çš„`16G NVIDIA`æ˜¾å¡ã€‚å¯èƒ½å°±æ€•å¤§å®¶éƒ¨ç½²èµ·æ¥ï¼Œæ‰€ä»¥å®˜ç½‘ä¸Šä¹Ÿæä¾›äº†æ›´ä½æˆæœ¬çš„éƒ¨ç½²æ–¹æ¡ˆï¼ŒINT8å’ŒINT4 æ•°æ®æ¨¡å‹ã€‚æ•´ä½“æ‰€éœ€ç©ºé—´å¦‚ä¸‹ï¼›

| **é‡åŒ–ç­‰çº§**   | **æœ€ä½ GPU æ˜¾å­˜**ï¼ˆæ¨ç†ï¼‰ | **æœ€ä½ GPU æ˜¾å­˜**ï¼ˆé«˜æ•ˆå‚æ•°å¾®è°ƒï¼‰ |
| -------------- | ------------------------- | --------------------------------- |
| FP16ï¼ˆæ— é‡åŒ–ï¼‰ | 13 GB                     | 14 GB                             |
| INT8           | 8 GB                      | 9 GB                              |
| INT4           | 6 GB                      | 7 GB                              |

å°å‚…å“¥è‡ªå·±ä¹Ÿæ˜¯åœ¨ `Mac M1`ã€`è½»é‡äº‘ä¸»æœº`ï¼Œè¿˜æœ‰ä¸€ä¸ªä¸“é—¨ç”¨äºæµ‹è¯•`AIGCçš„æœåŠ¡å™¨`ä¸Šï¼Œéƒ½åšäº†æµ‹è¯•éªŒè¯ï¼Œè¿™æ ·ä¹Ÿèƒ½é¿å…å¤§å®¶èµ°å¼¯è·¯ã€‚å°±åƒæˆ‘åœ¨ä¸€æ¬¾8Gå†…å­˜çš„è½»é‡äº‘ä¸»æœºä¸Šï¼Œéƒ¨ç½² INT4 æ¨¡å‹ï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼›

![](https://bugstack.cn/images/article/algorithm/model/model-3-03.png)

ğŸ˜‚ æ‰€ä»¥åˆ«ä¹°ä¸€äº›é…ç½®ä¸ä½³çš„æœºå™¨ï¼Œå¦åˆ™ä½ æ ¹æœ¬è·‘ä¸èµ·æ¥ï¼Œè¿˜æµªè´¹é’±ã€‚

### 2. å·¥ç¨‹ä»£ç 

![](https://bugstack.cn/images/article/algorithm/model/model-3-04.png)

**æºç **ï¼š[https://github.com/THUDM/ChatGLM-6B](https://github.com/THUDM/ChatGLM-6B) - æ— è®ºä½ ä½¿ç”¨å“ªç§éƒ¨ç½²æ–¹å¼ï¼Œéƒ½éœ€è¦æŠŠä»£ç ä¸‹è½½åˆ°å¯¹åº”çš„æœåŠ¡ä¸Šã€‚

### 3. ç®—æ³•æ¨¡å‹

åœ¨ ChatGLM-6B ä¸­æœ‰ä¸€æ®µä»£ç æ˜¯é…ç½®æ¨¡å‹åœ°å€çš„ï¼Œé™¤äº†è¯´æ˜çš„Macç”µè„‘ï¼Œç†è®ºä¸Šæ¥è¯´å®ƒå¯ä»¥è‡ªåŠ¨ä¸‹è½½ã€‚ä½†è¿™äº›æ¨¡å‹å¤ªå¤§äº†ï¼Œæ‰€ä»¥æœ€å¥½æ˜¯æå‰ä¸‹è½½åˆ°æœ¬åœ°ä½¿ç”¨ã€‚

```python
// web_demo2.py éƒ¨åˆ†ä»£ç 
tokenizer = AutoTokenizer.from_pretrained("/Users/xfg/develop/github/chatglm-6b", trust_remote_code=True)
model = AutoModel.from_pretrained("/Users/xfg/develop/github/chatglm-6b", trust_remote_code=True).half().cuda()
```

![](https://bugstack.cn/images/article/algorithm/model/model-3-05.png)

**å®˜ç½‘**ï¼š[https://huggingface.co/](https://huggingface.co/) - æä¾›æ¨¡å‹ä¸‹è½½ï¼ŒæŒ‰ç…§ä½ çš„éœ€è¦ä¸‹è½½å¯¹åº”çš„æµ‹è¯•æ¨¡å‹åˆ°æœåŠ¡å™¨ä¸Šï¼›
- chatglm-6bï¼š[https://huggingface.co/THUDM/chatglm-6b/tree/main](https://huggingface.co/THUDM/chatglm-6b/tree/main) 
- chatglm-6b-int4ï¼š[https://huggingface.co/THUDM/chatglm-6b-int4/tree/main](https://huggingface.co/THUDM/chatglm-6b-int4/tree/main)
- chatglm-6b-int8ï¼š[https://huggingface.co/THUDM/chatglm-6b-int8/tree/main](https://huggingface.co/THUDM/chatglm-6b-int8/tree/main)
- visualglm-6bï¼š[https://huggingface.co/THUDM/visualglm-6b/tree/main](https://huggingface.co/THUDM/visualglm-6b/tree/main) - ç”¨äºå›¾å½¢è¯†åˆ«çš„æ¨¡å‹ï¼Œåœ¨é•œåƒä¸­è¿˜æ²¡æœ‰ã€‚

é•œåƒï¼š[https://cloud.tsinghua.edu.cn/d/674208019e314311ab5c/?p=%2F&mode=list](https://cloud.tsinghua.edu.cn/d/674208019e314311ab5c/?p=%2F&mode=list) - é•œåƒçš„ä¸‹è½½é€Ÿåº¦æ¯”è¾ƒå¿«ã€‚**æ³¨æ„**ï¼šé•œåƒä¸­æ²¡æœ‰åŸºç¡€çš„å†…å®¹ï¼Œéœ€è¦ä»å®˜ç½‘ä¸‹è½½ã€‚
- chatglm-6bï¼š[https://cloud.tsinghua.edu.cn/d/674208019e314311ab5c/?p=%2Fchatglm-6b&mode=list](https://cloud.tsinghua.edu.cn/d/674208019e314311ab5c/?p=%2Fchatglm-6b&mode=list)
- chatglm-6b-int4ï¼š[https://cloud.tsinghua.edu.cn/d/674208019e314311ab5c/?p=%2Fchatglm-6b-int4&mode=list](https://cloud.tsinghua.edu.cn/d/674208019e314311ab5c/?p=%2Fchatglm-6b-int4&mode=list)
- chatglm-6b-int8ï¼š[https://cloud.tsinghua.edu.cn/d/674208019e314311ab5c/?p=%2Fchatglm-6b-int8&mode=list](https://cloud.tsinghua.edu.cn/d/674208019e314311ab5c/?p=%2Fchatglm-6b-int8&mode=list)

### 4. è½¯ä»¶ç‰ˆæœ¬

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/model/model-3-06.png?raw=true" width="650px">
</div>

- [macOS 12.3 æˆ–æ›´é«˜ç‰ˆæœ¬](https://developer.apple.com/metal/pytorch/) - [https://developer.apple.com/metal/pytorch](https://developer.apple.com/metal/pytorch)
- Python 3.10.8 æˆ–æ›´é«˜ç‰ˆæœ¬ - å› ä¸ºæœ‰äº›èŠå¤©çš„ç•Œé¢æ¨¡å—ï¼Œéœ€è¦è¿™ä¸ªç‰ˆæœ¬ã€‚

### 5. è½¯ä»¶å¸è½½

```shell
# 1. å¸è½½ python3/python æ³¨æ„å…ˆçœ‹ä¸‹ç‰ˆæœ¬ python -V ç¡®è®¤ä¸‹åç§°æ˜¯ python è¿˜æ˜¯ python3 ä»¥åŠ pip
whereis python3 |xargs rm -frv
rm -rf /usr/local/bin/python3 /usr/local/bin/pip3
# 2. å¸è½½ openssl - å¦‚æœå®‰è£…äº†è€ç‰ˆæœ¬çš„pythonï¼Œåˆå®‰è£…æ–°çš„ï¼Œå¯èƒ½éœ€è¦å¸è½½ ssl é‡æ–°å®‰è£…
whereis openssl |xargs rm -frv
```

- å¦‚æœä½ çš„ç”µè„‘æˆ–è€…æœåŠ¡å™¨ä¹‹å‰å·²ç»å®‰è£…äº† python é‚£ä¹ˆå¯ä»¥å…ˆæŠŠå®ƒå¸è½½æ‰ã€‚

## ä¸‰ã€ç¯å¢ƒé…ç½® - æœåŠ¡å™¨ç‰ˆæœ¬

ä»¥èƒ½è¿è¡Œèµ· ChatGLM-6B åªéœ€è¦ä»¥ä¸‹5ä¸ªæ­¥éª¤ï¼›

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/model/model-3-07.png?raw=true" width="650px">
</div>

åªè¦ä½ èƒ½æŒ‰ç…§é¡ºåºï¼Œæ­£ç¡®çš„æ‰§è¡Œè¿™äº›æ­¥éª¤ï¼Œå°±å¯ä»¥è¿è¡Œèµ· ChatGLM-6B æ¨¡å‹ï¼Œæ¥ä¸‹æ¥å°±è·Ÿç€å°å‚…å“¥çš„æ­¥éª¤æ‰§è¡Œå§ã€‚æ³¨æ„å¦‚æœä½ éœ€è¦ç»˜å›¾èƒ½åŠ›ï¼Œå¯ä»¥åœ¨æœ¬æ–‡å­¦ä¹ åã€‚æŒ‰ç…§å®˜ç½‘ä»‹ç»ï¼Œæ›¿æ¢ä¸‹æ¨¡å‹é‡æ–°å¯åŠ¨å³å¯ï¼›[https://github.com/THUDM/ChatGLM-6B](https://github.com/THUDM/ChatGLM-6B) - `[2023/05/17] å‘å¸ƒ` [VisualGLM-6B](https://github.com/THUDM/VisualGLM-6B/) `ä¸€ä¸ªæ”¯æŒå›¾åƒç†è§£çš„å¤šæ¨¡æ€å¯¹è¯è¯­è¨€æ¨¡å‹ã€‚`

### æ­¥éª¤1ï¼šç¯å¢ƒå®‰è£…

#### 1. openssl

```java
# 1. å¸è½½openssl

whereis openssl |xargs rm -frv

# 2. å®˜ç½‘ä¸‹è½½opensslç¼–è¯‘å®‰è£…

wget http://www.openssl.org/source/openssl-1.1.1.tar.gz
tar zxf openssl-1.1.1.tar.gz
cd openssl-1.1.1
./config --prefix=/usr/local/openssl shared zlib
make && make install 

# 3. è®¾ç½®ç¯å¢ƒå˜é‡ LD_LIBRARY_PATH

echo "export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/openssl/lib" >>  /etc/profile
source /etc/profile

# 4. å¸è½½é‡æ–°ç¼–è¯‘å®‰è£…python3

whereis python3 |xargs rm -frv
rm -rf /usr/local/bin/python3 /usr/local/bin/pip3
mkdir /usr/local/python3
./configure --prefix=/usr/local/python3 --enable-optimizations --with-openssl=/usr/local/openssl
make -j8 && make install
```

#### 2. Python 3.10

```java
cd ~

# 1.ä¸‹è½½Pythonå®‰è£…åŒ…
wget https://www.python.org/ftp/python/3.10.8/Python-3.10.8.tgz

# 2.å°†å®‰è£…åŒ…ç§»åŠ¨åˆ°/usr/localæ–‡ä»¶å¤¹ä¸‹
mv Python-3.10.8.tgz /usr/local/

# 3.åœ¨localç›®å½•ä¸‹åˆ›å»ºPython3ç›®å½•
mkdir /usr/local/python3

# 4.è¿›å…¥çš„Pythonå®‰è£…åŒ…å‹ç¼©åŒ…æ‰€åœ¨çš„ç›®å½•
cd /usr/local/

# 5.è§£å‹å®‰è£…åŒ…
tar -xvf Python-3.10.8.tgz

# 6.è¿›å…¥è§£å‹åçš„ç›®å½•
cd /usr/local/Python-3.10.8/

# 7.é…ç½®å®‰è£…ç›®å½•
./configure --prefix=/usr/local/python3

# 8.ç¼–è¯‘æºç 
make

# 9.æ‰§è¡Œæºç å®‰è£…
make install

# 10.åˆ›å»ºè½¯è¿æ¥
ln -s /usr/local/python3/bin/python3 /usr/bin/python3

# 11. æµ‹è¯•
python3 -V
```

#### 3. å®‰è£…pip3

```java
cd ~

# 1.ä¸‹è½½
wget https://bootstrap.pypa.io/get-pip.py

# 2.å®‰è£…ï¼›æ³¨æ„å’±ä»¬å®‰è£…äº† python3 æ‰€ä»¥æ˜¯ pyhton3 get-pip.py
python3 get-pip.py
  
# 3.æŸ¥æ‰¾pipå®‰è£…è·¯å¾„
find / -name pip
  
# 4.å°†pipæ·»åŠ åˆ°ç³»ç»Ÿå‘½ä»¤
ln -s  /usr/local/python/bin/pip /usr/bin/pip  
  
# 5.æµ‹è¯•
pip -V
  
# 6.æ›´æ¢æºï¼Œå¦‚æœä¸æ›´æ¢é‚£ä¹ˆä½¿ç”¨ pip ä¸‹è½½è½¯ä»¶ä¼šå¾ˆæ…¢
pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
pip config set install.trusted-host mirrors.aliyun.com
pip config list
  
# pipå›½å†…é•œåƒæºï¼š

# é˜¿é‡Œäº‘â€ƒhttp://mirrors.aliyun.com/pypi/simple/
# ä¸­å›½ç§‘æŠ€å¤§å­¦ â€ƒhttps://pypi.mirrors.ustc.edu.cn/simple/
# è±†ç“£â€ƒhttp://pypi.douban.com/simple
# Pythonå®˜æ–¹â€ƒhttps://pypi.python.org/simple/
# v2exâ€ƒhttp://pypi.v2ex.com/simple/
# ä¸­å›½ç§‘å­¦é™¢ â€ƒhttp://pypi.mirrors.opencas.cn/simple/
# æ¸…åå¤§å­¦â€ƒhttps://pypi.tuna.tsinghua.edu.cn/simple/  
```

#### 4. å®‰è£…git

```java
cd ~

# 1.å®‰è£…å‰é¦–å…ˆå¾—å®‰è£…ä¾èµ–ç¯å¢ƒ
yum install -y perl-devel

# 2.ä¸‹è½½æºç åŒ…åˆ° CentOS æœåŠ¡å™¨åè¿›è¡Œè§£å‹
wget https://mirrors.edge.kernel.org/pub/software/scm/git/git-2.9.5.tar.gz

tar -zxf git-2.9.5.tar.gz

cd git-2.9.5

# 3.æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤è¿›è¡Œç¼–è¯‘å®‰è£… 

./configure --prefix=/usr/local/git

make && make install

# 4.æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡
vim ~/.bashrc

export PATH="/usr/local/git/bin:$PATH"

# 5.ä½¿é…ç½®ç”Ÿæ•ˆ
source ~/.bashrc

# 6.æµ‹è¯•
git version

```

### æ­¥éª¤2ï¼šä»£ç ä¸‹è½½

åœ¨LinuxæœåŠ¡å™¨ï¼Œå¯ä»¥ç›´æ¥åœ¨ cd ~ ç›®å½•ä¸‹æ‰§è¡Œï¼›`git clone git://github.com/THUDM/ChatGLM-6B.git` 

### æ­¥éª¤3ï¼šæ¨¡å‹ä¸‹è½½

å¯ä»¥ä»å®˜ç½‘ï¼š[https://huggingface.co/THUDM/chatglm-6b/tree/main](https://huggingface.co/THUDM/chatglm-6b/tree/main) æˆ–è€…æ¸…åçš„é•œåƒä»“åº“ä¸‹è½½ [https://cloud.tsinghua.edu.cn/d/fb9f16d6dc8f482596c2/](https://cloud.tsinghua.edu.cn/d/fb9f16d6dc8f482596c2/) - å¦‚æœä½ éœ€è¦å…¶ä»–æ¨¡å‹ï¼Œå¯ä»¥åœ¨`ç›®å½•ï¼šåŸºç¡€ç¯å¢ƒ`ä¸­æ‰¾åˆ°ã€‚

æœ¬åœ°ç›´æ¥ç¯å¢ƒç›´æ¥ä¸‹è½½ï¼Œç½‘ç»œç¯å¢ƒå¯ä»¥é€šè¿‡ SFTP - Termius ä¼ åˆ°ä¸€ä¸ª `ChatGLM-6B/data` ç›®å½•ä¸‹ã€‚æˆ–è€…ç›´æ¥é€šè¿‡ `wget http://...` è¿™æ ·çš„å‘½ä»¤æ–¹å¼ç›´æ¥ä¸‹è½½æ¨¡å‹ã€‚**ä¼šéœ€è¦è¾ƒé•¿çš„è€—æ—¶**

### æ­¥éª¤4ï¼šå®‰è£…é…ç½®

```java
# sudo su - åˆ‡æ¢åˆ°root æˆ–è€…é€šè¿‡ sudo æ‰§è¡Œã€‚é•œåƒå¯ä»¥æ¢ä¸€æ¢ï¼Œçœ‹çœ‹å“ªä¸ªå¿«ç”¨å“ªä¸ªã€‚
sudo pip install -r requirements.txt -i https://mirror.baidu.com/pypi/simple

# æ‰§è¡ŒæˆåŠŸæ¡ˆä¾‹ - è¿‡ç¨‹è¾ƒé•¿
  
  Looking in indexes: https://mirror.baidu.com/pypi/simple
Collecting protobuf
  Downloading https://mirror.baidu.com/pypi/packages/06/38/e72c556c25aaaaafca75018d2d0ebc50c5ab80983dd4def086624fba43f2/protobuf-4.23.0-cp37-abi3-manylinux2014_x86_64.whl (304 kB)
     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 304.5/304.5 KB 19.4 MB/s eta 0:00:00
Collecting transformers==4.27.1
  Downloading https://mirror.baidu.com/pypi/packages/6d/9b/2f536f9e73390209e0b27b74691355dac494b7ec8154f3012fdc6debbae7/transformers-4.27.1-py3-none-any.whl (6.7 MB)
     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 6.7/6.7 MB 10.4 MB/s eta 0:00:00
```

- å¯¹äºæœ¬åœ°çš„ç½‘ç»œå’Œæ™®é€šçš„æœåŠ¡å™¨ï¼Œè¿™ä¸ªæ­¥éª¤ä¼šæ‰§è¡Œè¾ƒé•¿çš„æ—¶é—´ã€‚å¦‚æœæ‰§è¡Œå¤±è´¥äº†ï¼Œåœ¨æ­¤ç»§ç»­æ‰§è¡Œå°±å¯ä»¥ï¼Œç›´è‡³å¾—åˆ°ä¸Šå¤©çš„çœ·é¡¾ï¼Œä½ æˆåŠŸäº†ï¼ï¼ï¼

### æ­¥éª¤5ï¼šå¯åŠ¨æ‰§è¡Œ

```java
# åˆ‡æ¢åˆ° ChatGLM-6B å·¥ç¨‹ç›®å½•ï¼Œæ‰§è¡Œ
python3 -m streamlit run ./web_demo2.py --server.port 7397 --server.address 0.0.0.0

# æ‰§è¡Œç»“æœ - æˆåŠŸåæœ‰è¿™æ ·çš„æ•ˆæœ
Collecting usage statistics. To deactivate, set browser.gatherUsageStats to False.


  You can now view your Streamlit app in your browser.

  URL: http://0.0.0.0:7397

Explicitly passing a `revision` is encouraged when loading a model with custom code to ensure no malicious code has been contributed in a newer revision.
Explicitly passing a `revision` is encouraged when loading a configuration with custom code to ensure no malicious code has been contributed in a newer revision.
Explicitly passing a `revision` is encouraged when loading a model with custom code to ensure no malicious code has been contributed in a newer revision.
Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 8/8 [01:30<00:00, 11.35s/it]
```

- ä½ å¯ä»¥æŒ‡å®šç«¯å£ï¼Œå¹¶å¯¹ç«¯å£å¼€æ”¾è®¿é—®æƒé™ã€‚ä¹‹åå°±å¯ä»¥åé—®åœ°å€ï¼›`http://ä½ çš„æœåŠ¡å™¨åœ°å€:ç«¯å£`
- åˆæ¬¡ä½¿ç”¨çš„æ—¶å€™ï¼Œä¼šè¿›è¡Œæ¨¡å‹çš„å¯åŠ¨ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªé˜¶æ®µï¼Œå¾ˆå¤šé…ç½®ä¸ä½³çš„æœåŠ¡å™¨æ˜¯æ²¡æ³•å¯åŠ¨æˆåŠŸçš„ã€‚

## å››ã€ç¯å¢ƒé…ç½® - AIGCç‰ˆæœ¬

è¿™æ˜¯ä¸€ä¸ª`é’èƒ½åŠ›`ç‰ˆæœ¬ï¼Œä½ åªéœ€è¦èŠ±é’±åˆ°ä½ï¼Œä½“éªŒä¸ªå‡ å°æ—¶ï¼Œé‚£ä¹ˆè¿™ä¸ªæ˜¯æœ€èŠ‚çœæˆæœ¬çš„ã€‚ä½ å¯ä»¥é€šè¿‡æˆ‘çš„é‚€è¯·é“¾æ¥è¿›å…¥ï¼Œè¿™æ ·ä¼šå¾—åˆ°ä¸€äº›ä½¿ç”¨é…é¢ï¼Œå¯èƒ½ä¸éœ€è¦èŠ±é’±ã€‚

### 1. æ³¨å†ŒæœåŠ¡

åœ°å€ï¼š[https://www.lanrui-ai.com/register?invitation_code=3931177594](https://www.lanrui-ai.com/register?invitation_code=3931177594)

åå°ï¼š[https://www.lanrui-ai.com/console/workspace](https://www.lanrui-ai.com/console/workspace)

### 2. é€‰æ‹©æœåŠ¡

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/model/model-3-08.png?raw=true" width="950px">
</div>

- ï¿¥1.90/æ—¶ï¼Œä¸ç¡®å®šä¸€ç›´æœ‰ã€‚åŒé…ç½®çš„4.9å…ƒæ¯å°æ—¶ã€‚ä»ä½ è´­ä¹°å¯åŠ¨å¼€å§‹è®¡è´¹ï¼Œå®‰è£…ç¯å¢ƒè¾ƒå¥½æ—¶ï¼Œæ•´ä¸ªè¿‡ç¨‹éœ€è¦å¤§æ¦‚éœ€è¦20å…ƒå·¦å³ï¼Œèƒ½ä½“éªŒåˆ°ã€‚

### 3. é…ç½®ç¯å¢ƒ

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/model/model-3-09.png?raw=true" width="950px">
</div>

- åˆ›å»ºæœåŠ¡åï¼Œè¿è¡Œé•œåƒé€‰æ‹©ï¼›pytorch -> cuda æœ€åè¿™ä¸ªç‰ˆæœ¬ã€‚
- é¢„è®­ç»ƒæ¨¡å‹é€‰æ‹© chatglm-6b è¿™æ ·ä½ ä¹Ÿä¸éœ€è¦è‡ªå·±ä¸‹è½½æ¨¡å‹æ•°æ®äº†ã€‚

### 4. æ§åˆ¶å¹³å°

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/model/model-3-10.png?raw=true" width="950px">
</div>

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/model/model-3-11.png?raw=true" width="950px">
</div>

- ä»å·¥ä½œç©ºé—´è¿›å…¥åˆ°æ§åˆ¶å°ï¼Œä½ å¯ä»¥åˆ†åˆ«`ä» data çœ‹åˆ° ChatGLM-6B çš„ä»£ç ` åœ¨`imported_models çœ‹åˆ°é¢„è®­ç»ƒæ¨¡å‹ chatglm-6b`

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/model/model-3-12.png?raw=true" width="950px">
</div>

- æ£€æŸ¥å·¥ç¨‹ web_demo2.py ä¸­åŠ è½½æ¨¡å‹çš„è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼Œå¦‚æœä¸å¯¹éœ€è¦ä¿®æ”¹ã€‚
- å¦‚æœä½ çš„æœåŠ¡ä¸­ï¼Œæ²¡æœ‰é»˜è®¤ä¸‹è½½æˆ–è€…éœ€è¦é‡æ–°ä¸‹è½½ã€‚é‚£ä¹ˆä½ å¯ä»¥å®‰è£… git æŒ‡ä»¤ï¼Œä¸‹è½½ä»£ç åˆ° data ä»“åº“å³å¯ã€‚

### 5. åˆå§‹é…ç½®

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/model/model-3-13.png?raw=true" width="950px">
</div>

```java
user@lsp-ws:~/data$ sudo su
root@lsp-ws:/home/user/data# cd ChatGLM-6B/
root@lsp-ws:/home/user/data/ChatGLM-6B# pip install -r requirements.txt
```

- è¿™ä¸ªå®‰è£…é€Ÿåº¦ä¼šéå¸¸å¿«ï¼Œå‡ ä¹ä¸éœ€è¦å¤ªä¹…çš„ç­‰å¾…ã€‚

### 6. å¯åŠ¨æœåŠ¡

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/model/model-3-14.png?raw=true" width="950px">
</div>

```java
python3 -m streamlit run ./web_demo2.py --server.port 27777 --server.address 0.0.0.0
```

- å¦å¤– ChatGLM-6B è¿˜æä¾›äº†å‘½ä»¤è¡Œæµ‹è¯• `python cli_demo.py` å’Œ API å¯åŠ¨ `python api.py`

```java
curl -X POST "http://127.0.0.1:8000" \
     -H 'Content-Type: application/json' \
     -d '{"prompt": "ä½ å¥½", "history": []}'
```

### 7. è®¿é—®æœåŠ¡

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/model/model-3-15.png?raw=true" width="950px">
</div>

- å›åˆ°æ§åˆ¶å°å¤åˆ¶è°ƒè¯•åœ°å€ï¼Œå³å¯è®¿é—®ï¼›

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/model/model-3-16.png?raw=true" width="650px">
</div>

- å¦‚æœä½ æŠ¥é”™äº†ï¼Œé‚£ä¹ˆåœ¨æ§åˆ¶å°æ‰§è¡Œå®‰è£…å³å¯ã€‚
- `control + c` åœæ­¢æœåŠ¡ï¼Œæ‰§è¡Œ `pip install icetk`
- å†æ¬¡æ‰§è¡Œæ­¥éª¤6å¯åŠ¨æœåŠ¡ï¼Œç°åœ¨åœ¨è®¿é—®ã€‚`python3 -m streamlit run ./web_demo2.py --server.port 27777 --server.address 0.0.0.0`

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/model/model-3-17.png?raw=true" width="650px">
</div>

- åˆæ¬¡è¿è¡Œï¼Œå®ƒä¼šåŠ è½½æ¨¡å‹ã€‚åœ¨æ§åˆ¶å°å¯ä»¥çœ‹åˆ°åŠ è½½çš„æ¨¡å‹è¿›åº¦ï¼Œå¤§æ¦‚å‡ åˆ†é’Ÿå°±åŠ è½½å¥½äº†ã€‚

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/model/model-3-18.png?raw=true" width="650px">
</div>

- çœ‹åˆ°æ§åˆ¶å°çš„æ¨¡å‹åŠ è½½å®Œæ¯•åï¼Œå†æ¬¡ç‚¹å‡»ä¸‹**å‘é€** å¥½äº†ï¼Œåˆ°ä½ ä¹Ÿå¯ä»¥æµ‹è¯•ä¸‹å‘é€å…¶ä»–çš„å†…å®¹ï¼Œè¿›è¡Œä½“éªŒã€‚

## äº”ã€ç¯å¢ƒé…ç½® - Docker ç‰ˆæœ¬

åœ¨å®˜ç½‘çš„åœ°å€ä¸­è¿˜çœ‹åˆ°äº†ä¸€ä¸ª Docker çš„é…ç½®æ–¹å¼ï¼Œæˆ‘æŠŠå®ƒå¼•å…¥è¿‡æ¥ï¼Œæ–¹ä¾¿æœ‰éœ€è¦çš„ä¼™ä¼´è¿›è¡Œæ“ä½œã€‚åŸæ–‡åœ°å€ï¼š[https://www.luckzym.com/posts/e95da08c/](https://www.luckzym.com/posts/e95da08c/)

### 1. ç¼–å†™`DockerFile`æ–‡ä»¶

```
# è®¾ç½®åŸºç¡€æ˜ åƒ
FROM nvidia/cuda:11.8.0-cudnn8-devel-ubuntu22.04

# å®šä¹‰æ„å»ºå‚æ•°
# ä¾‹å¦‚ARG USER=testä¸ºUSERå˜é‡è®¾ç½®é»˜è®¤å€¼"test"ã€‚
ARG USER=test
ARG PASSWORD=${USER}123$

# å¤„ç†è®¨åŒçš„ Python 3 ç¼–ç é—®é¢˜
ENV LANG C.UTF-8
ENV DEBIAN_FRONTEND noninteractive
ENV MPLLOCALFREETYPE 1

# æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨å¹¶å®‰è£…è½¯ä»¶å±æ€§é€šç”¨åŒ…
RUN apt-get update && apt-get install -y software-properties-common

# æ·»åŠ Python ppaï¼Œä»¥ä¾¿åç»­å®‰è£…Pythonç‰ˆæœ¬
RUN add-apt-repository ppa:deadsnakes/ppa

# å®‰è£…Ubuntuçš„å¸¸ç”¨è½¯ä»¶åŒ…ï¼ŒåŒ…æ‹¬wgetã€vimã€curlã€zipã€unzipç­‰
RUN apt-get update && apt-get install -y \
    build-essential \
    git \
    wget \
    vim \
    curl \
    zip \
    zlib1g-dev \
    unzip \
    pkg-config \
    libgl-dev \
    libblas-dev \
    liblapack-dev \
    python3-tk \
    python3-wheel \
    graphviz \
    libhdf5-dev \
    python3.9 \
    python3.9-dev \
    python3.9-distutils \
    openssh-server \
    swig \
    apt-transport-https \
    lsb-release \
    libpng-dev \
    ca-certificates &&\
    apt-get clean &&\
    ln -s /usr/bin/python3.9 /usr/local/bin/python &&\
    ln -s /usr/bin/python3.9 /usr/local/bin/python3 &&\
    curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py &&\
    python3 get-pip.py &&\
    rm get-pip.py &&\
    # æ¸…ç†APTç¼“å­˜ä»¥å‡å°Dockeré•œåƒå¤§å°
    rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*

# è®¾ç½®æ—¶åŒº
ENV TZ=Asia/Seoul
RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone

# ä¸ºåº”ç”¨ç¨‹åºåˆ›å»ºä¸€ä¸ªç”¨æˆ·
RUN useradd --create-home --shell /bin/bash --groups sudo ${USER}
RUN echo ${USER}:${PASSWORD} | chpasswd
USER ${USER}
ENV HOME /home/${USER}
WORKDIR $HOME

# å®‰è£…ä¸€äº›Pythonåº“ï¼Œä¾‹å¦‚numpyã€matplotlibã€scipyç­‰
RUN python3 -m pip --no-cache-dir install \
    blackcellmagic\
    pytest \
    pytest-cov \
    numpy \
    matplotlib \
    scipy \
    pandas \
    jupyter \
    scikit-learn \
    scikit-image \
    seaborn \
    graphviz \
    gpustat \
    h5py \
    gitpython \
    ptvsd \
    Pillow==6.1.0 \
    opencv-python

# å®‰è£…PyTorchå’ŒDataJointç­‰å…¶ä»–åº“
# å…¶ä¸­torch==1.13.1è¡¨ç¤ºå®‰è£…ç‰ˆæœ¬ä¸º1.13.1çš„PyTorch
RUN python3 -m pip --no-cache-dir install \
    torch==1.13.1 \
    torchvision==0.14.1 \
    torchaudio==0.13.1 \
    'jupyterlab>=2'

RUN python3 -m pip --no-cache-dir install datajoint==0.12.9

# è®¾ç½®ç¯å¢ƒå˜é‡LD_LIBRARY_PATHï¼Œä»¥ä¾¿æ”¯æŒæ€§èƒ½åˆ†æåº“
ENV LD_LIBRARY_PATH /usr/local/cuda/extras/CUPTI/lib64:${LD_LIBRARY_PATH}

# å¯åŠ¨sshæœåŠ¡å™¨ï¼Œæ‰“å¼€22å·ç«¯å£
USER root

RUN mkdir /var/run/sshd
EXPOSE 22
CMD ["/usr/sbin/sshd", "-D"]
```

### 2. ç¼–å†™`Docker-Compose`æ–‡ä»¶

```
version: "3.9"
services:
  nvidia:
    build: .        # å‘Šè¯‰Docker Composeåœ¨å½“å‰ç›®å½•ä¸­æŸ¥æ‰¾Dockerfileå¹¶æ„å»ºé•œåƒ
    runtime: nvidia # å¯ç”¨nvidia-container-runtimeä½œä¸ºDockerå®¹å™¨çš„å‚æ•°ï¼Œä»è€Œå®ç°å¯¹GPUçš„æ”¯æŒ
    environment:
      - NVIDIA_VISIBLE_DEVICES=all  # è®¾ç½®æ‰€æœ‰å¯ç”¨çš„GPUè®¾å¤‡
    ports:
      - "22:22"         # port for ssh
      - "80:80"         # port for Web
      - "8000:8000"     # port for API
    tty: true           # åˆ›å»ºä¸€ä¸ªä¼ªç»ˆç«¯ä»¥ä¿æŒå®¹å™¨è¿è¡ŒçŠ¶æ€
```

### 3. æ­å»ºæ­¥éª¤

#### 3.1 å‡†å¤‡Dockerå®¹å™¨&AIæ¨¡å‹æ–‡ä»¶

- ä¿®æ”¹`Docker Compose`æ–‡ä»¶ï¼Œæ·»åŠ `volumes`è·¯å¾„

```
version: "3.9"
services:
  nvidia:
    build: .        # å‘Šè¯‰Docker Composeåœ¨å½“å‰ç›®å½•ä¸­æŸ¥æ‰¾Dockerfileå¹¶æ„å»ºé•œåƒ
    runtime: nvidia # å¯ç”¨nvidia-container-runtimeä½œä¸ºDockerå®¹å™¨çš„å‚æ•°ï¼Œä»è€Œå®ç°å¯¹GPUçš„æ”¯æŒ
    environment:
      - NVIDIA_VISIBLE_DEVICES=all  # è®¾ç½®æ‰€æœ‰å¯ç”¨çš„GPUè®¾å¤‡
    ports:
      - "22:22"         # port for ssh
      - "80:80"         # port for Web
      - "8000:8000"     # port for API
    tty: true           # åˆ›å»ºä¸€ä¸ªä¼ªç»ˆç«¯ä»¥ä¿æŒå®¹å™¨è¿è¡ŒçŠ¶æ€
    # æ·»åŠ ä¸€ä¸ªå’Œå®¿ä¸»æœºè¿æ¥çš„è·¯å¾„
    volumes:
      - ./:/data
```

- ä¸‹è½½å¯¹åº”çš„AIæ¨¡å—æ–‡ä»¶

ä»`Hugging Face Hub`ä¸‹è½½æ‰€éœ€è¦çš„æ¨¡å‹ï¼Œç”±äºæˆ‘ä½¿ç”¨çš„æ˜¾å¡åªæœ‰`8G`æ˜¾å­˜ï¼Œæ‰€ä»¥ç›´æ¥ä¸‹è½½äº†`INT4`é‡åŒ–åçš„æ¨¡å‹ã€‚

> **AIæ¨¡å‹ä¸‹è½½åœ°å€ï¼š**
>
> - [THUDM/chatglm-6b](https://huggingface.co/THUDM/chatglm-6b)
> - [THUDM/chatglm-6b-int4](https://huggingface.co/THUDM/chatglm-6b-int4)
> - [THUDM/chatglm-6b-int8](https://huggingface.co/THUDM/chatglm-6b-int8)

è¿™é‡Œæ¨èä½¿ç”¨`Git`å·¥å…·è¿›è¡Œæ‹–æ‹½å¯¹åº”çš„ä»“åº“ï¼Œåœ¨æ‹–æ‹½å‰è®°å¾—ç»™`Git`å·¥å…·å®‰è£…ä¸Š[Git LFS](https://docs.github.com/zh/repositories/working-with-files/managing-large-files/installing-git-large-file-storage)ã€‚

ä»“åº“å­˜å‚¨çš„åœ°æ–¹å°±æ”¾åœ¨æˆ‘å½“å‰åˆ›å»º`Docker Compose`æ–‡ä»¶ç›®å½•ä¸‹ï¼Œè¿™æ ·åˆšå¥½å¯ä»¥åˆ©ç”¨`volumes`å°†å…¶æ˜ å°„è¿›å®¹å™¨ä¸­ã€‚

```
# Make sure you have git-lfs installed (https://git-lfs.com)
git lfs install
git clone https://huggingface.co/THUDM/chatglm-6b-int4

# if you want to clone without large files â€“ just their pointers
# prepend your git clone with the following env var:
GIT_LFS_SKIP_SMUDGE=1
```

#### 3.2 å‡†å¤‡ChatGLM-6Bå¹¶è¿è¡Œ

- æ‹‰å–å®˜æ–¹`ChatGLM-6B`é¡¹ç›®ä»“åº“æ–‡ä»¶

```
git clone https://github.com/THUDM/ChatGLM-6B.git
```

ä»“åº“å­˜å‚¨çš„åœ°æ–¹ä¾æ—§æ˜¯å½“å‰åˆ›å»º`Docker Compose`æ–‡ä»¶ç›®å½•ã€‚å¦‚æœå¤§å®¶ä¸å¸Œæœ›å­˜æ”¾åœ¨è¯¥ç›®å½•ä¸‹å¯ä»¥è‡ªè¡Œä¿®æ”¹ä¸€ä¸‹`Docker Compose`ä¸­çš„`volumes`æ˜ å°„è·¯å¾„ã€‚

- æ‹‰èµ·è¯¥æ·±åº¦å­¦ä¹ `Docker`å®¹å™¨

```
docker-compose up --build -d
```

- è¿›å…¥å®¹å™¨ä¸­

```
# æŸ¥çœ‹åˆšåˆšå¯åŠ¨çš„æ·±åº¦å­¦ä¹ å®¹å™¨çš„IDå·
docker ps

# è¿›å…¥å®¹å™¨å†…éƒ¨
docker exec -it xxxxxxx /bin/bash # xxxxxxx æ˜¯PSåå®¹å™¨çš„CONTAINER IDå·
```

- å®‰è£…é¡¹ç›®ä¾èµ–

```
# cdåˆ°åˆšåˆšæ‹–æ‹½ä¸‹æ¥çš„é¡¹ç›®ä»“åº“ä¸­

cd /data/ChatGLM-6B

# å®‰è£…é¡¹ç›®ä¾èµ–æ–‡ä»¶

pip install -r requirements.txt
```

- ä¿®æ”¹æœ¬åœ°AIæ¨¡å‹è·¯å¾„

åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨å®˜æ–¹æä¾›çš„å‘½ä»¤è¡ŒDemoç¨‹åºæ¥åšæµ‹è¯•ã€‚

```
# æ‰“å¼€cli_demo.pyæ–‡ä»¶å¯¹å…¶è¿›è¡Œä¿®æ”¹
VI cli_demo.py

# ä¿®æ”¹ç¬¬6ã€ç¬¬7è¡Œçš„ä»£ç ï¼Œå°†åŸæœ‰çš„æ¨¡å‹åç§°ä¿®æ”¹ä¸ºæœ¬åœ°AIæ¨¡å‹è·¯å¾„
# ä¿®æ”¹ç»“æœå¦‚ä¸‹,å…¶ä¸­/data/chatglm-6b-int4ä¸ºä½ æœ¬åœ°AIæ¨¡å‹çš„è·¯å¾„åœ°å€
tokenizer = AutoTokenizer.from_pretrained("/data/chatglm-6b-int4", trust_remote_code=True)
model = AutoModel.from_pretrained("/data/chatglm-6b-int4", trust_remote_code=True).half().cuda()
```

- è¿è¡Œä»“åº“ä¸­å‘½ä»¤è¡ŒDemoç¨‹åºï¼š

```
python cli_demo.py
```

ä¸å‡ºæ„å¤–ï¼Œåœ¨å‘½ä»¤æ‰§è¡Œå®Œä¹‹åä½ å°†å¯ä»¥ä½“éªŒåˆ°æ¸…åå¼€æºçš„ChatGLM-6Bè‡ªç„¶è¯­è¨€æ¨¡å‹äº†ã€‚
