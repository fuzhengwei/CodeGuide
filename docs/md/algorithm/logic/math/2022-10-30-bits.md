---
title: ä½è¿ç®— Bit Manipulation 
lock: need
---

# ä½è¿ç®— Bit Manipulation 

ä½œè€…ï¼šå°å‚…å“¥
<br/>åšå®¢ï¼š[https://bugstack.cn](https://bugstack.cn)
<br/>æºç ï¼š[https://github.com/fuzhengwei/java-algorithms](https://github.com/fuzhengwei/java-algorithms)

> æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„

## ä¸€ã€å‰è¨€

`ä½ æ˜¯ä»€ä¹ˆæ—¶å€™æ³¨æ„åˆ°ä½è¿ç®—ï¼Ÿ`

ä»æ¯•ä¸šå…¥èŒå…¬å¸çœ‹å¤§ä½¬çš„ä»£ç å‡ºç° `2 << 4` å¼€å§‹ï¼Ÿä»å°ç™½æ™‹å‡é«˜å¼€è¯»æ¡†æ¶çš„æºç çœ‹åˆ° `MAXIMUM_CAPACITY = 1 << 30;` å¼€å§‹ï¼Ÿè¿˜æ˜¯ä»ä»€ä¹ˆæ—¶å€™å¼€å§‹ï¼Ÿ

å…¶å®äºŒè¿›åˆ¶çš„ä½è¿ç®—ä¸€ç›´åœ¨æˆ‘ä»¬é‚£èº«è¾¹ï¼Œä»ä½ å¼€å§‹ç¼–å†™ Hello Word æ‰“å°è¾“å‡ºæ—¶å°±æœ‰äºŒè¿›åˆ¶æµçš„å¤„ç†ï¼Œåªä¸è¿‡éšè—çš„å¾ˆæ·±ä¸å¥½å‘ç°ã€‚æ‰€ä»¥åœ¨æˆ‘ä»¬å¼€å§‹æ„è¯†åˆ°ä»£ç å’ŒäºŒè¿›åˆ¶çš„å…³ç³»å¾€å¾€éƒ½æ˜¯æ¥è‡ªäºçœ‹åˆ°å¯ä»¥ç”¨äºŒè¿›åˆ¶å®Œæˆçš„è®¡ç®—ï¼ŒåŒ…æ‹¬ï¼›äºŒè¿›åˆ¶è®¡ç®—æ•ˆç‡é«˜äºä¹˜æœºï¼Œä¹ŸåŒ…æ‹¬äºŒè¿›åˆ¶å¯ä»¥æ›´å¥½çš„ä½“ç°å‡ºä½ è¦è®¾ç½®å€¼çš„å¤§å°èŒƒå›´ã€‚æ¯”å¦‚ä½ è¦è®¾å®šä¸€ä¸ªæŒ‡å®šèŒƒå›´å¤§å°çš„ Int å€¼ = 1073741824ï¼Œé‚£ä¹ˆæ˜¯ç»™è¿™æ ·ä¸€ä¸ªæ•´æ•°å€¼çœ‹èµ·æ¥ç›´è§‚ï¼Œè¿˜æ˜¯äºŒè¿›åˆ¶ 1<< 30 æ›´ç›´è§‚å‘¢ï¼Ÿå…¶å®ä»–ä»¬ä¸¤ä¸ªå€¼æ˜¯ç›¸ç­‰çš„ã€‚æ‰€ä»¥è¿™æ ·çš„æƒ…å†µä¸‹ä¹Ÿä¼šæœ‰äºŒè¿›åˆ¶è¿ç®—çš„ä½“ç°ã€‚

è€Œå°å‚…å“¥åœ¨å­¦ä¹ ç¼–ç¨‹é˜¶æ®µï¼Œç¬¬ä¸€æ¬¡æ³¨æ„åˆ°äºŒè¿›åˆ¶çš„è¿ç®—æ˜¯å…³äºaã€bä¸¤ä¸ªå€¼çš„äº’æ¢ï¼Œå¦‚æœä¸å¼•å…¥ç¬¬ä¸‰ä¸ªå€¼å°±å¯ä»¥å®Œæˆï¼Ÿ

```java
int a = 2, b = 3;
a = a ^ b;
b = a ^ b;
a = a ^ b;
```

ä¸€ä¸ª ^ å¸½å­ä¸€æ ·çš„è¿ç®—ç¬¦ï¼Œå°±æŠŠä¸¤ä¸ªæ•°ç»™æ›¿æ¢ï¼Œæ›¿æ¢å a = 3ï¼Œb = 2 é‚£å®ƒæ˜¯æ€ä¹ˆåŠåˆ°çš„å‘¢ï¼Ÿ

**^ å¼‚æˆ–è¿ç®—**ï¼šä¸¤ä¸ªæ“ä½œæ•°çš„åŒä½ä¸­ï¼Œå¦‚æœå€¼ç›¸åŒï¼ˆéƒ½æ˜¯ 0 æˆ–è€…éƒ½æ˜¯ 1ï¼‰åˆ™ä¸º 0ï¼Œä¸åŒï¼ˆä¸€ä¸ªæ˜¯ 0ï¼Œä¸€ä¸ªæ˜¯ 1ï¼‰åˆ™ä¸º 1

- ä»¥äºŒè¿›åˆ¶æ•°æ®ä¸ºåŸºç¡€è¿›è¡Œè¿ç®—è§£æ
	-	a = 2 äºŒè¿›åˆ¶æ•°ä¸º 0010ã€b = 3 äºŒè¿›åˆ¶æ•°ä¸º 0011
	-	a = a ^ b = 0010 ^ 0011 = 0001
	-	b = a ^ b = 0001 ^ 0011 = 0010 = 2
	-	a = a ^ b = 0001 ^ 0010 = 0011 = 3
- å¼‚æˆ–è¿ç®—çš„åŸºæœ¬å®šç†è§£æ
	- a = a ^ b
	-	b = a ^ b = a ^ b ^ b = a = 2
	-	a = a ^ b = a ^ a ^ b = b = 3

è€ŒäºŒè¿›åˆ¶çš„è¿ç®—é­…åŠ›è¿˜è¿œä¸è‡³äºæ­¤ï¼Œè¿˜å¯ä»¥å®Œæˆå¥‡å¶åˆ¤æ–­ã€æœ‰æ•ˆä½è®¡ç®—ã€ä¹˜æ³•ã€åŠ æ³•ç­‰ã€‚è¿™äº›å†…å®¹çš„å­¦ä¹ å¯ä»¥è®©æˆ‘ä»¬ç ”å‘äººå‘˜ï¼Œç§¯ç´¯ç¼–ç¨‹é€»è¾‘å’Œæ‹“å±•æ€ç»´æ¨¡å¼ã€‚æ¥ä¸‹æ¥å°å‚…å“¥å°±å¸¦ç€å¤§å®¶å­¦ä¹ ä¸€ä¸‹ã€‚

## äºŒã€ä½æ“ä½œä»‹ç»

ä½æ“ä½œæ˜¯ç¨‹åºè®¾è®¡ä¸­å¯¹ä½æ•°ç»„æˆ–äºŒè¿›åˆ¶æ•°çš„ä¸€å…ƒå’ŒäºŒå…ƒæ“ä½œã€‚åœ¨è®¸å¤šå¤è€çš„å¾®å¤„ç†å™¨ä¸Šï¼Œä½è¿ç®—æ¯”åŠ å‡è¿ç®—ç•¥å¿«ï¼Œé€šå¸¸ä½è¿ç®—æ¯”ä¹˜é™¤æ³•è¿ç®—è¦å¿«å¾ˆå¤šã€‚åœ¨ç°ä»£æ¶æ„ä¸­ï¼Œä½è¿ç®—çš„è¿ç®—é€Ÿåº¦é€šå¸¸ä¸åŠ æ³•è¿ç®—ç›¸åŒï¼ˆä»ç„¶å¿«äºä¹˜æ³•è¿ç®—ï¼‰ï¼Œä½†æ˜¯é€šå¸¸åŠŸè€—è¾ƒå°ï¼Œå› ä¸ºèµ„æºä½¿ç”¨å‡å°‘ã€‚

å››ç§åŸºæœ¬çš„ä½è¿ç®—åŒ…æ‹¬ï¼›ä¸&ã€æˆ–|ã€é^ã€å¼‚æˆ–~

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/logic/bits-00.png?raw=true" width="650px">
</div>

```java
int a = 1; // 0001
int b = 2; // 0010
int c = 4; // 0100
int d = 8; // 1000
int e = 15;// 1111

// ä¸è¿ç®—ï¼›0001
System.out.println(Integer.toBinaryString(a & e)); // 0001
// æˆ–è¿ç®—ï¼›0011
System.out.println(Integer.toBinaryString(a | b)); // 0011
// éè¿ç®—ï¼›0101
System.out.println(Integer.toBinaryString(a ^ c)); // 0101
// å¼‚æˆ–è¿ç®—ï¼›...11110111
System.out.println(Integer.toBinaryString(~d));
```

- ä¸è¿ç®—ï¼›ä¸¤ä¸ªæ•°éƒ½è½¬ä¸ºäºŒè¿›åˆ¶ï¼Œç„¶åä»é«˜ä½å¼€å§‹æ¯”è¾ƒï¼Œå¦‚æœä¸¤ä¸ªæ•°éƒ½ä¸º1åˆ™ä¸º1ï¼Œå¦åˆ™ä¸º0ã€‚
- æˆ–è¿ç®—ï¼›ä¸¤ä¸ªæ•°éƒ½è½¬ä¸ºäºŒè¿›åˆ¶ï¼Œç„¶åä»é«˜ä½å¼€å§‹æ¯”è¾ƒï¼Œä¸¤ä¸ªæ•°åªè¦æœ‰ä¸€ä¸ªä¸º1åˆ™ä¸º1ï¼Œå¦åˆ™å°±ä¸º0ã€‚
- éè¿ç®—ï¼›ä¸¤ä¸ªæ•°è½¬ä¸ºäºŒè¿›åˆ¶ï¼Œç„¶åä»é«˜ä½å¼€å§‹æ¯”è¾ƒï¼Œå¦‚æœç›¸åŒåˆ™ä¸º0ï¼Œä¸ç›¸åŒåˆ™ä¸º1ã€‚
- å¼‚æˆ–è¿ç®—ï¼›å¦‚æœä½ä¸º0ï¼Œç»“æœæ˜¯1ï¼Œå¦‚æœä½ä¸º1ï¼Œç»“æœæ˜¯0

## ä¸‰ã€ä½è¿ç®—æ¡ˆä¾‹

### 1. è·å–ä½å€¼

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/logic/bits-01.png?raw=true" width="480px">
</div>

```java
public int getBit(int number, int bitPosition) {
    return (number >> bitPosition) & 1;
}
```

- **ç›®çš„**ï¼šè·å–äºŒè¿›åˆ¶æ•°å­—ä¸­ï¼ŒæŒ‡å®šä½ç½®çš„å€¼ã€‚
- **é€»è¾‘**ï¼šè¯¥æ–¹æ³•å°†ç›®æ ‡å€¼å³ç§»åˆ°æœ€å³è¾¹ï¼Œå³ä½æ•°ç»„çš„ç¬¬0ä¸ªä½ç½®ä¸Šï¼Œå¦‚ï¼›0001 çš„äºŒè¿›åˆ¶å½¢å¼ã€‚ä¹‹åä¸ 1 è¿›è¡Œä¸æ“ä½œã€‚å¦‚æœç›®æ ‡ä½æ˜¯1ï¼Œé‚£ä¹ˆç»“æœå°±æ˜¯1ï¼Œåä¹‹ç»“æœæ˜¯0ï¼›

### 2. è®¾ç½®ä½å€¼

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/logic/bits-02.png?raw=true" width="480px">
</div>

```java
public int setBit(int number, int bitPosition) {
    return number | (1 << bitPosition);
}
```

- **ç›®çš„**ï¼šè®¾ç½®äºŒè¿›åˆ¶æ•°å­—ä¸­ï¼ŒæŒ‡å®šä½ç½®çš„å€¼
- **é€»è¾‘**ï¼š1 å°±åƒä¸€ä¸ªå­å¼¹ï¼Œå·¦ç§»æŒ‡å®šä½æ•°åˆ°ç›®æ ‡ä½ç½®ï¼Œå¦‚ï¼›0010 çš„äºŒè¿›åˆ¶å½¢å¼ã€‚ä¸ç›®æ ‡å€¼ number åšæˆ–è¿ç®—(æŠŠå­å¼¹æ‰“è¿›å»)ï¼Œè®¾ç½®ç»“æœå¹¶è¿”å›ã€‚

### 3. æ¸…ç©ºä½å€¼

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/logic/bits-03.png?raw=true" width="480px">
</div>

```java
public int clearBit(int number, int bitPosition) {
    int mask = ~(1 << bitPosition);
    return number & mask;
}
```

- **ç›®çš„**ï¼šæ¸…ç©ºäºŒè¿›åˆ¶æ•°å­—ä¸­ï¼ŒæŒ‡å®šä½ç½®çš„å€¼
- **é€»è¾‘**ï¼šç±»ä¼¼äº`è®¾ç½®ä½å€¼`ï¼ŒæŠŠ1å·¦ç§»æŒ‡å®šä½æ•°åå–åï¼Œä» 0010 å¾—åˆ° 1101 å¹¶ä¸ç›®æ ‡å€¼ number åšä¸&è¿ç®—ï¼Œæ¸…æ‰ç›®æ ‡ä½çš„å€¼ã€‚

### 4. æ›´æ–°ä½å€¼

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/logic/bits-04.png?raw=true" width="480px">
</div>

```java
public int updateBit(int number, int bitPosition, int bitValue) {
    int clearMask = ~(1 << bitPosition);
    return (number & clearMask) | (bitValue << bitPosition);
}
```

- **ç›®çš„**ï¼šæ¸…ç©ºäºŒè¿›åˆ¶æ•°å­—ä¸­ï¼ŒæŒ‡å®šä½ç½®çš„å€¼
- **é€»è¾‘**ï¼šç»“åˆæ¸…ç©ºclearBitã€è®¾ç½®setBitï¼Œä¸¤ä¸ªæ–¹æ³•å°†åˆ¶å®šä½ç½®æ›¿æ¢ä¸ºè®¾ç½®å€¼ã€‚

### 5. å¶æ•°åˆ¤æ–­

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/logic/bits-05.png?raw=true" width="480px">
</div>

```java
public boolean isEven(int number) {
    return (number & 1) == 0;
}
```

- **ç›®çš„**ï¼šæ£€æµ‹ number æ˜¯å¦ä¸ºå¶æ•°
- **é€»è¾‘**ï¼šæ£€æµ‹äºŒè¿›åˆ¶çš„æœ€å³ä¾§ä¸€ä½ï¼Œå¦‚æœæ˜¯1ï¼Œé‚£ä¹ˆä¸€å®šæ˜¯å¥‡æ•°ã€‚æ‰€ä»¥å¯ä»¥ä¸1åšä¸&è¿ç®—çš„ç»“æœå’Œ0åˆ¤æ–­ã€‚ä¸ç­‰äº0æ˜¯å¥‡æ•°ï¼Œç­‰äº0æ˜¯å¶æ•°ã€‚

### 6. æ­£æ•°åˆ¤æ–­

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/logic/bits-06.png?raw=true" width="480px">
</div>

```java
public boolean isPositive(int number) {
    if (number == 0) {
        return false;
    }
    return ((number >> 31) & 1) == 0;
}
```

- **ç›®çš„**ï¼šåˆ¤æ–­ number å€¼æ˜¯å¦ä¸ºæ­£æ•°ã€‚
- **é€»è¾‘**ï¼šåŸºäºäºŒè¿›åˆ¶æ­£æ•°æœ€å·¦è¾¹çš„å€¼æ˜¯0çš„è¿™ä¸ªäº‹å®ï¼Œå³ç§»31ä½ï¼Œå’Œ1åšä¸&è¿ç®—ï¼Œå¦‚æœç»“æœç­‰äº1ä¸ºè´Ÿæ•°ï¼Œåæ­£ä¸ºæ­£æ•°ã€‚

### 7. å·¦ç§»ä¹˜äºŒ

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/logic/bits-07.png?raw=true" width="480px">
</div>

```java
public int multiplyByTwo(int number) {
    return number << 1;
}
```

- **ç›®çš„**ï¼šä¹˜ä»¥2
- **é€»è¾‘**ï¼šè¯¥æ–¹æ³•å°†åŸå§‹æ•°å­—å‘å·¦ç§»åŠ¨ä¸€ä½ã€‚å› æ­¤æ‰€æœ‰ä½éƒ½å°†ä¹˜ä»¥2ï¼Œå› æ­¤æ•°å­—æœ¬èº«ä¹Ÿå°†ä¹˜ä»¥2ã€‚

### 8. å³ç§»é™¤äºŒ

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/logic/bits-08.png?raw=true" width="480px">
</div>

```java
public int divideByTwo(int number) {
    return number >> 1;
}
```

- **ç›®çš„**ï¼šé™¤ä»¥2
- **é€»è¾‘**ï¼šè¯¥æ–¹æ³•å°†åŸå§‹æ•°å­—å‘å³ç§»åŠ¨ä¸€ä½ã€‚å› æ­¤æ‰€æœ‰ä½éƒ½å°†é™¤ä»¥2ï¼Œå› æ­¤æ•°å­—æœ¬èº«ä¹Ÿå°†é™¤ä»¥2,ä¸”ä¸ä¼šäº§ç”Ÿä½™æ•°ã€‚

### 9. æ­£è´Ÿäº¤æ¢

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/logic/bits-09.png?raw=true" width="480px">
</div>

```java
public int switchSign(int number) {
    return ~number + 1;
}
```

- **ç›®çš„**ï¼šæ­£æ•°è½¬è´Ÿæ•°ï¼Œè´Ÿæ•°è½¬æ­£æ•°
- **é€»è¾‘**ï¼šé€šè¿‡äºŒè¿›åˆ¶å¼‚æˆ–è¿ç®—å–åï¼Œå¦‚ 1000 = 8 å–å 1.....0111 = -9 + 1 = -8

### 10. ä¹˜æ³•è¿ç®—(æœ‰ç¬¦å·)

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/logic/bits-10.png?raw=true" width="500px">
</div>


```java
public int multiply(int a, int b) {
    int multiply = 0;
    while (a != 0 && b != 0) {
        System.out.print("è®¡ç®—æ­¥éª¤(" + (isEven(b) ? "å¶æ•°" : "å¥‡æ•°") + ")ï¼ša(" + String.format("%04d", Integer.valueOf(Integer.toBinaryString(a))) + ") = " + a + " | b(" + String.format("%04d", Integer.valueOf(Integer.toBinaryString(b))) + ") = " + b);
        // b æ˜¯å¶æ•°ï¼š2a * (b/2)
        if (isEven(b)) {
            a = multiplyByTwo(a);
            b = divideByTwo(b);
        }
        // b å¥‡æ•°
        else {
            // b æ­£æ•°ï¼š2a * (b - 1)/2 + a
            if (isPositive(b)) {
                multiply += a;
                a = multiplyByTwo(a);
                b = divideByTwo(b - 1);
            }
            // b è´Ÿæ•°ï¼š2a * (b + 1)/2 - a
            else {
                multiply -= a;
                a = multiplyByTwo(a);
                b = divideByTwo(b + 1);
            }
        }
        System.out.println(" | multiply(" + String.format("%04d", Integer.valueOf(Integer.toBinaryString(multiply))) + ") = " + multiply);
    }
    return multiply;
}
```

- **ç›®çš„**ï¼šè®¡ç®—æœ‰ç¬¦å·äºŒè¿›åˆ¶ä¹˜ç§¯
- **å…¬å¼**ï¼šæ¨åˆ°å…¬å¼ä¸ä»£ç å‘å¯¹åº”
  - = a * b
  - = 2a * (b/2) â€”â€” bä¸ºå¶æ•°
  - = 2a * (b - 1)/2 + a â€”â€” b ä¸ºå¥‡æ•°ã€æ­£æ•°
  - = 2a * (b + 1)/2 - a â€”â€” b ä¸ºå¥‡æ•°ã€è´Ÿæ•°
- **é€»è¾‘**ï¼šä¹˜æ•°aä¸æ–­å·¦ç§»ã€ä¹˜æ•°bä¸æ–­å³ç§»ã€‚å½“bå½’0æ—¶ï¼Œaå·¦ç§»ç´¯è®¡ä¸‹æ¥çš„å€¼å°±æ˜¯ä¹˜ç§¯æ€»å’Œã€‚å¦‚å›¾

### 11. ä¹˜æ³•è¿ç®—(æ— ç¬¦å·)

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/logic/bits-11.png?raw=true" width="500px">
</div>

```java
public int multiplyUnsigned(int number1, int number2) {
    int result = 0;
    int multiplier = number2;
    int bitIdx = 0;
    while (multiplier != 0) {
        if ((multiplier & 1) == 1) {
            System.out.println(number1 + " << " + bitIdx + " = " + (number1 << bitIdx));
            result += number1 << bitIdx;
        }
        bitIdx += 1;
        multiplier = multiplier >> 1;
    }
    return result;
}
```

- **ç›®çš„**ï¼šè®¡ç®—æ— ç¬¦å·äºŒè¿›åˆ¶ä¹˜ç§¯
- **å…¬å¼**ï¼š
  - `13 = 2^3 + 2^2 + 2^0`
  - `x*13 = x*2^3 + x*2^2 + x*2^0`
  - `x*13 = x<<3 + x<<2 + x<<0`
  - `2*13 = 2<<3 + 2<<2 + 2<<0`
  - `    = 16 + 8 + 2`
  - `    = 26`

- **é€»è¾‘**ï¼šæ¯ä¸ªæ•°å­—éƒ½å¯ä»¥è¡¨ç¤ºæˆä¸€ç³»åˆ—2çš„å¹‚ä¹‹å’Œã€‚ä¾‹å¦‚ 13 çš„äºŒè¿›åˆ¶æ˜¯ 1101ï¼Œæœ€å³ä¾§ç¬¬1ä½1ï¼Œæ˜¯2çš„0æ¬¡å¹‚ï¼Œæ‰€ä»¥å¯¹åº”2çš„è¿›åˆ¶å€¼æ˜¯å·¦ç§»0ä½ã€‚å†æ¯”å¦‚13çš„å³æ•°ç¬¬3ä½æ˜¯1ï¼Œå¯¹åº”ä½ç½®å€¼æ˜¯4ä¹Ÿå°±æ˜¯2çš„2æ¬¡å¹‚ï¼Œæ‰€ä»¥å¯¹åº”2çš„è¿›åˆ¶å€¼æ˜¯å·¦ç§»2ä½ã€‚æœ€ç»ˆæŠŠè¿™äº›å€¼ç›¸åŠ å°±æ˜¯ä¹˜ç§¯å€¼ã€‚

### 12. ä¸€çš„æ•°é‡

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/logic/bits-12.png?raw=true" width="480px">
</div>

```java
public int countSetBits(int originalNumber) {
    int setBitsCount = 0;
    int number = originalNumber;
    while (number != 0) {
        setBitsCount += number & 1;
        number >>>= 1;
    }
    return setBitsCount;
}
```

- **ç›®çš„**ï¼šä½¿ç”¨ä½è¿ç®—ç¬¦å¯¹ä¸€ä¸ªæ•°å­—é‡Œè®¾ç½®ä¸º1çš„ä½è¿›è¡Œè®°æ•°
- **é€»è¾‘**ï¼šæŠŠæ•°å­—æ¯æ¬¡å‘å³ç§»åŠ¨1ä½ï¼Œç„¶åä½¿ç”¨&æ“ä½œç¬¦å–å‡ºæœ€å³è¾¹ä¸€ä½çš„å€¼ï¼Œ1åˆ™è®°æ•°åŠ 1ï¼Œ0åˆ™ä¸è®¡ã€‚

### 13. è½¬æ¢è®¡ç®—

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/logic/bits-13.png?raw=true" width="480px">
</div>

```java
public int bitsDiff(int number1, int number2) {
    return countSetBits(number1 ^ number2);
}
```

- **ç›®çš„**ï¼šè®¡ç®—ä¸€ä¸ªæ•°å­—ï¼Œè½¬æ¢ä¸ºå¦å¤–ä¸€ä¸ªæ•°å­—ï¼Œæ‰€éœ€è¦çš„è½¬æ¢ä½æ•°ã€‚
- **é€»è¾‘**ï¼šå½“æ•°å­—è¿›è¡ŒXORå¼‚æˆ–è¿ç®—æ—¶ï¼Œç»“æœå°†æ˜¯ä¸åŒä½æ•°çš„æ•°é‡(å³å¼‚æˆ–çš„ç»“æœä¸­æ‰€æœ‰è¢«è®¾ç½®ä¸º1çš„ä½çš„æ•°é‡)ã€‚

### 14. æœ‰æ•ˆä½æ•°

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/logic/bits-14.png?raw=true" width="480px">
</div>

```java
public int bitLength(int number) {
    int bitsCounter = 0;
    while ((1 << bitsCounter) <= number) {
        bitsCounter += 1;
    }
    return bitsCounter;
}
```

- **ç›®çš„**ï¼šè®¡ç®—äºŒè¿›åˆ¶æ•°å€¼çš„æœ‰æ•ˆä½æ•°ï¼Œä¾‹å¦‚ 14 = 1110 æœ‰æ•ˆä½ä¸º4ä½ã€‚
- **é€»è¾‘**ï¼šé€šè¿‡1ä¸æ–­åœ°å·¦ç§»åŠ å’Œä¸ number åšå¯¹æ¯”ï¼Œåªè¦æ¯”numberå°å°±ç´¯åŠ 1ä½ã€‚

### 15. å¹‚å€¼åˆ¤æ–­

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/logic/bits-15.png?raw=true" width="480px">
</div>


```java
public boolean isPowerOfTwo(int number) {
    return (number & (number - 1)) == 0;
}
```

- **ç›®çš„**ï¼šæ£€æŸ¥numberæ˜¯å¦ä¸º2çš„å¹‚å€¼ã€‚
- **é€»è¾‘**ï¼š2çš„å¹‚å€¼å½¢å¼çš„æ•°å­—ä¸º2ã€4ã€8ã€16 ç­‰ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠä¸€ä¸ªäºŒè¿›åˆ¶æ•°è¿›è¡Œé”™ä½ä¸&è¿ç®—ï¼Œå¦‚æœé”™ä½æ¯”å¯¹éƒ½ä¸º0ï¼Œé‚£ä¹ˆå°±æ˜¯2çš„å¹‚æ•°ã€‚

### 16. åŠ æ³•è¿ç®—(Ripple-carry adder)

<div align="center">
    <img src="https://bugstack.cn/images/article/algorithm/logic/bits-16.png?raw=true" width="650px">
</div>

```java
public int fullAdder(int a, int b) {
    int result = 0;
    // è®¡ç®—æ¯æ¬¡çš„è¿›ä½å€¼ï¼Œ1 + 1 = 0010 è¿›ä½ä¸º1ã€‚æ˜¯ä¸€ç§&è¿ç®—ã€‚
    int carryOut = 0;
    System.out.println("| aBit | bBit | carryIn | aiPlusBi | bitSum | carryOut | result |");
    for (int i = 0; i < 32; i++) {
        int aBit = getBit(a, i);
        int bBit = getBit(b, i);
        int carryIn = carryOut;
        System.out.print("|   " + aBit + "  |  " + bBit + "   |       " + carryIn);
        // åŠ å’Œ - ä¸¤ä¸ªå€¼ï¼›å¦‚æœç›¸åŒåˆ™ä¸º0ï¼Œä¸ç›¸åŒåˆ™ä¸º1
        int aiPlusBi = aBit ^ bBit;
        System.out.print(" |        " + aiPlusBi);
      
        // åŠ å’Œ - è¿›ä½ï¼›
        int bitSum = aiPlusBi ^ carryIn;
        System.out.print(" |      " + bitSum);
      
        // è¿›ä½ï¼›åŒä½ç½® ai & bi = 1 | ä¸è¿›ä½ aiPlusBi & carryIn = 1
        carryOut = (aBit & bBit) | (aiPlusBi & carryIn);
        System.out.print(" |  " + carryOut + "(" + Integer.toBinaryString(carryOut) + ")   ");
      
        // ç´¯åŠ ï¼›æŠŠå½“å‰ä½ç½®è®¡ç®—çš„å€¼ï¼Œå·¦ç§»nä½
        result = result | (bitSum << i);
        System.out.println(" | " + result + "(" + String.format("%04d", Integer.valueOf(Integer.toBinaryString(result))) + ")|");
    }
    return result;
}
```

- **ç›®çš„**ï¼šè®¡ç®—æœ‰ç¬¦å·äºŒè¿›åˆ¶åŠ æ³•
- **é€»è¾‘**ï¼šäºŒè¿›åˆ¶çš„ç´¯åŠ å¯ä»¥å¯¹ç…§ä¸‹è®¡ç®—10è¿›åˆ¶ç´¯åŠ æ—¶ä¸€æ ·ï¼Œå¯¹åº”2ä¸ªæ•°å­—ç›¸åŠ ï¼Œå½“æœ‰è¿›ä½çš„æ—¶å€™è®°å½•è¿›ä½ã€‚
  - é¦–å…ˆäºŒè¿›åˆ¶çš„åŠ å’Œè®¡ç®—ï¼Œ1+1 = 10ã€1+0=01ã€0+1=01ã€0+0=00ï¼Œé‚£ä¹ˆæ­£å¥½å¯¹åº”ä¸Š ^ éè¿ç®—ï¼Œç›¸åŒåˆ™ä¸º0ï¼Œä¸ç›¸åŒåˆ™ä¸º1ï¼Œå› ä¸ºå³ä½¿ä¸¤ä¸ª1ç›¸åŠ ï¼Œå½“å‰ä½çš„å€¼ä¹Ÿæ˜¯0ã€‚
  - ä¹‹åæ˜¯è¿›ä½ç›¸åŠ ï¼Œä¸¤æ•°æƒ³åŠ åï¼Œè¿˜å¯èƒ½æœ‰è¿›ä½ä¸Šæ¥çš„æ•°å€¼ä¸ä¸¤æ•°è¿›è¡Œç›¸åŠ ã€‚
  - ç»“æœç›¸åŠ å®Œæˆåï¼Œè®¡ç®—è¿›ä½ï¼Œå¹¶ä¿ç•™è¿›ä½ç”¨äºä¸‹æ¬¡è®¡ç®—ã€‚è¿›ä½çš„è®¡ç®—ä¸ºï¼›ai & bi = 1 | ä¸è¿›ä½ aiPlusBi & carryIn = 1ï¼Œæ— è®ºæ˜¯ä¸¤æ•°ç›¸åŠ ï¼Œè¿˜æ˜¯ä¸¤æ•°çš„å’Œ aiPlusBi ä¸è¿›ä½ç›¸åŠ ï¼Œåªè¦ä¸è¿ç®—æ˜¯1ï¼Œé‚£ä¹ˆå°±è¦ä¿ç•™è¿›ä½ã€‚
  - æœ€åæ˜¯ç´¯åŠ ç»“æœï¼ŒæŠŠå¯¹åº”ä½ç½®çš„ç»“æœè®¡ç®—ï¼ŒæŒ‰ç…§å½“å‰è®¡ç®—åˆ°åˆ°äºŒè¿›åˆ¶çš„ä½æ•°å·¦ç§»åˆ°ç›®æ ‡ä¸ºæ­¢ï¼Œç´¯åŠ åˆ° resultï¼Œæœ€åå°±æ˜¯ç»“æœå€¼ã€‚

## å››ã€å¸¸è§é¢è¯•é¢˜

- & å’Œ ~ æ˜¯ä»€ä¹ˆè¿ç®—ï¼Ÿ
- ä¸¤æ•°äº¤æ¢ä¸å¼•å…¥ç¬¬ä¸‰ä¸ªå˜é‡å¦‚ä½•å¤„ç†ï¼Ÿ
- äºŒè¿›åˆ¶ä¸­1ä¸ªä¸ªæ•°æ€ä¹ˆè®¡ç®—ï¼Ÿ
- å®ç°ä¸€ä¸ªä¸¤æ•°åŠ å’Œï¼Ÿ
- å®ç°ä¸€ä¸ªæ— ç¬¦å·ä¸¤æ•°æˆç»©ï¼Ÿ







